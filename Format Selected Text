custombutton://%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%3F%3E%0D%0A%3Ccustombutton%20xmlns%3Acb%3D%22http%3A//xsms.nm.ru/custombuttons/%22%3E%0A%20%20%3Cname%3EFormat%20Selected%20Text%3C/name%3E%0A%20%20%3Cimage%3E%3C%21%5BCDATA%5Bdata%3Aimage/png%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADWUlEQVR42s2WW2gTQRSGZ5OSUqqGSGMbNWLVVmwUBEFRKlIUxYJUqFDwwQuCVkXQKihoUYuCgqBIveCLIggi3hVB8IYX9E0EoxRJogRNo0gMdcmFXPxPd1LWdbed2ebBAx87Oztz5t8zZ2ePwkwsEAg4I5FIrq6uTg2Hw2NYGayhocFZUVFxP5vNXgyFQtdK/YrZYLfbfT2ZTLbX1NSwRCLRieuFeDxeHI0Av9+/NhqNXvH5fKdisdiuYQW4XK6cw+FwptNp5nQ6qcuRz+dtC8ALKXihAq5vc7lcv6qqrZYCEKZGDOpTFEUtFovVEMLQXg0Bd+wKqKysXINLI8I/DT5b0J4+XAROgx1YdACDx+LKSAQEKKILjlZAgfevBBtAB49CM0S8sqmBts8NNoNjgBI7bSZgAXgDesBB0AZu0wMSUSgUZKOwil/ngUP8/i6YA96bCXgBmsEk8A1MAV9KAhCFAKLwQfLNycaDBG0D6AO0JTeMAqrBgMW2DBq+iJsQ0C64+HJwgLcXG0R1g6NGAdvAGfAbZHT942htLQiDUZgMEV8F336vIRJkO8FjsM4o4CcPFZkP9PN2ra5NUTgLAdtHWHwJ0/Kny+TZPTCBafk2JGAueMa0TNUvXrImEGRaGLKIQi1E/CqngEs8JAqzzoHBMPJzoRsCjowQ/lIiG+0E2AQ8egFRPkHhYjYaJkWAl2mJmoCIPA4Ur8XiT5m2bR+BMWF7eJ+DR7nF9ulWLvs/BfB6IFVfX98bDAa7ZJ3K+DEV4PF4OlEHnPN6vT+QcLSfzE49IOLHVAD+Xu8w4XsqlVqG24VM+z9Im4gfxWSSI5PJ5JHpTch0OvfPg602FhfyYxaBGeBTVVVVNZSraL9kf5/loibkx0wAKd3Cn10FHRLbsELXPglmMe08cDGtCPkMOnVjHpoJSDKtELnFdPUAE/tkZRNVMTqlMzoOJoIY09UDElGQ8mMUQOf7fgun5GCqoABhP0YB9J/vBY90fZQ4S0ErEz85hf0YKyIqRhaB14Z+OkRC4DjYN8LiUn4U3cPDYLfFWw7VA2z4XJD2oxfwBMwvgwApP6VBfvAAzAbrwWXdJKoV6VCZybT9o+/b6gcl7UcfAVlTbcz5x0oC6JNpk5i3Bzwvh4A/y8o6MDeRlhoAAAAASUVORK5CYII%3D%5D%5D%3E%3C/image%3E%0A%20%20%3Cmode%3E0%3C/mode%3E%0A%20%20%3Cinitcode%3E%3C%21%5BCDATA%5B%27use%20strict%27%3B%0A%0A//%20START%20EDITS%20------------------------------------------------------------------------------------%0A%0Avar%20formatList%20%3D%20%27b%2C%20i%2C%20u%2C%20s%2C%20img%2C%20url%2C%20code%27%2C%0A%20%20%20%20bbcSites%20%3D%20%22custombuttons.sourceforge.net%2C%20forums.mozillazine.org%2C%20tabmixplus.org%22%2C%0A%20%20%20%20htmlSites%20%3D%20%22forum.userstyles.org%22%3B%0A%20%20%20%20%0A//%20END%20EDITS%20--------------------------------------------------------------------------------------%0A%0Aconst%20ios%20%3D%20Cc%5B%27@mozilla.org/network/io-service%3B1%27%5D.getService%28Ci.nsIIOService%29%2C%0A%20%20%20%20%20%20sss%20%3D%20Cc%5B%27@mozilla.org/content/style-sheet-service%3B1%27%5D.getService%28Ci.nsIStyleSheetService%29%3B%0A%20%20%20%20%20%20%0Afunction%20getSS%28filepath%29%20%7B%20return%20ios.newURI%28%27data%3Atext/css%2C%27%20+%20filepath%2C%20null%2C%20null%29%20%7D%0A%0Afunction%20loadSheet%28filepath%29%20%7B%20sss.loadAndRegisterSheet%28getSS%28filepath%29%2C%20sss.AGENT_SHEET%29%20%7D%0A%0Avar%20pop%20%3D%20%27%3Cmenupopup%20id%3D%22formatList%22%20xmlns%3D%22%27%20+%20xulns%20+%20%27%22%20%5C%0A%20%20onpopupshowing%3D%22document.getElementById%28%26quot%3Bcustombuttons-contextpopup%26quot%3B%29.hidden%20%3D%20true%22%20%5C%0A%20%20onpopuphiding%3D%22document.getElementById%28%26quot%3Bcustombuttons-contextpopup%26quot%3B%29.hidden%20%3D%20false%22%3E%5C%0A%3C/menupopup%3E%27%3B%0A%0Apop%20%3D%20pop.replace%28/%3E%5Cs+%3C/g%2C%20%27%3E%3C%27%29%3B%0Apop%20%3D%20new%20DOMParser%28%29.parseFromString%28pop%2C%20%27application/xml%27%29.documentElement%3B%0A%0Avar%20fmItems%20%3D%20formatList.split%28%27%2C%27%29%3B%0Afor%20%28let%20i%20%3D%200%3B%20i%20%3C%20fmItems.length%3B%20i++%29%20%7B%0A%20%20let%20mi%20%3D%20document.createElement%28%27menuitem%27%29%2C%0A%20%20%20%20%20%20el%20%3D%20fmItems%5Bi%5D.trim%28%29%3B%0A%20%20mi.setAttribute%28%27id%27%2C%20%27menuitem%27%20+%20%28i+1%29%29%3B%0A%20%20mi.setAttribute%28%27class%27%2C%20%27menuitem-iconic%27%29%3B%0A%20%20mi.setAttribute%28%27label%27%2C%20el%29%3B%0A%20%20mi.setAttribute%28%27value%27%2C%20el%29%3B%0A%20%20mi.setAttribute%28%27closemenu%27%2C%20%27none%27%29%3B%0A%20%20if%20%28el%20%3D%3D%3D%20%27b%27%29%20mi.tooltipText%20%3D%20%27bold%27%3B%0A%20%20else%20if%20%28el%20%3D%3D%3D%20%27i%27%29%20mi.tooltipText%20%3D%20%27italic%27%3B%0A%20%20else%20if%20%28el%20%3D%3D%3D%20%27u%27%29%20mi.tooltipText%20%3D%20%27underline%27%3B%0A%20%20else%20if%20%28el%20%3D%3D%3D%20%27s%27%29%20mi.tooltipText%20%3D%20%27strikethrough%27%3B%0A%20%20else%20mi.tooltipText%20%3D%20el%3B%0A%20%20pop.appendChild%28mi%29%3B%0A%7D%0A%0Athis.appendChild%28pop%29%3B%0Athis.type%20%3D%20%27menu%27%3B%0Athis.boxObject.lastChild.collapsed%20%3D%20true%3B%0A%0AloadSheet%28encodeURIComponent%28this.CSS%29%29%3B%0A%0Apop.onclick%20%3D%20function%28e%29%20%7B%20%0A%20%20let%20val%20%3D%20e.target.value%2C%20end%2C%20posSel%2C%20start%2C%20s1%2C%20s2%2C%20str%2C%0A%20%20%20%20%20%20win%20%3D%20content.document.domain%2C%0A%20%20%20%20%20%20tb%20%3D%20gBrowser.contentWindow.document.activeElement%2C%0A%20%20%20%20%20%20sel%20%3D%20tb.value.substring%28tb.selectionStart%2C%20tb.selectionEnd%29%2C%0A%20%20%20%20%20%20bbcStr%20%3D%20%27%5B%27%20+%20val.trim%28%29%20+%20%27%5D%27%20+%20sel%20+%20%27%5B/%27%20+%20val.trim%28%29%20+%20%27%5D%27%2C%0A%20%20%20%20%20%20htmlStr%20%3D%20%27%3C%27%20+%20val.trim%28%29%20+%20%27%3E%27%20+%20sel%20+%20%27%3C/%27%20+%20val.trim%28%29%20+%20%27%3E%27%2C%0A%20%20%20%20%20%20bbc%20%3D%20bbcSites.split%28%27%2C%27%29%2C%0A%20%20%20%20%20%20html%20%3D%20htmlSites.split%28%27%2C%27%29%3B%0A%20%20if%20%28bbc%20%21%3D%3D%20%27%27%29%20for%20%28let%20i%20%3D%200%3B%20i%20%3C%20bbc.length%3B%20i++%29%20if%20%28win.match%28bbc%5Bi%5D.trim%28%29%29%29%20str%20%3D%20bbcStr%3B%0A%20%20if%20%28html%20%21%3D%3D%20%27%27%29%20for%20%28let%20j%20%3D%200%3B%20j%20%3C%20html.length%3B%20j++%29%20if%20%28win.match%28html%5Bj%5D.trim%28%29%29%29%20str%20%3D%20%20htmlStr%3B%0A%20%20s1%20%3D%20tb.value.substr%280%2C%20tb.selectionStart%29%3B%0A%20%20if%20%28e.button%29%20%7B%0A%20%20%20%20tb.value%20%3D%20tb.value.replace%28str%2C%20sel%29%3B%0A%20%20%20%20start%20%3D%20s1.length%20-%20val.length%20-%202%3B%0A%20%20%20%20end%20%3D%20start%20+%20sel.length%3B%0A%20%20%20%20tb.setSelectionRange%28start%2C%20end%29%3B%0A%20%20%20%20return%3B%0A%20%20%7D%0A%20%20s2%20%3D%20tb.value.substr%28tb.selectionEnd%29%3B%0A%20%20start%20%3D%20s1.length%20+%20val.length%20+%202%3B%0A%20%20end%20%3D%20start%20+%20sel.length%3B%0A%20%20tb.value%20%3D%20s1%20+%20str%20+%20s2%3B%0A%20%20tb.setSelectionRange%28start%2C%20end%29%3B%0A%7D%5D%5D%3E%3C/initcode%3E%0A%20%20%3Ccode%3E%3C%21%5BCDATA%5B/*CODE*/%0A%5D%5D%3E%3C/code%3E%0A%20%20%3Caccelkey%3E%3C%21%5BCDATA%5B%5D%5D%3E%3C/accelkey%3E%0A%20%20%3CCSS%3E%3C%21%5BCDATA%5B%23formatList%20%7B%0A%20%20-moz-appearance%3A%20none%20%21important%3B%0A%20%20padding%3A%200%20%21important%3B%0A%7D%0A%0A%23formatList%20.menuitem-iconic%20%7B%0A%20%20-moz-appearance%3A%20none%20%21important%3B%0A%20%20color%3A%20%23000%20%21important%3B%0A%20%20list-style-image%3A%20url%28%27data%3Aimage/png%3Bbase64%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%3D%27%29%20%21important%3B%0A%20%20padding%3A%200%20%21important%3B%0A%7D%0A%0A%23formatList%20.menuitem-iconic%3Ahover%20%7B%0A%20%20background%3A%20%23444%20%21important%3B%0A%20%20color%3A%20%23FFF%20%21important%3B%0A%20%20list-style-image%3A%20url%28%27data%3Aimage/png%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAAEAAAAAgCAYAAACinX6EAAAFJUlEQVR42u2ZeYwVRRDGa8E/RBACohhROQUVwUSUwyMGD0CSBVHxDmLEi4ABgnJHJZqgQCSBoAgKGAXlkEPAROUQIiisqygqKsRFkUsOE5RL4Pl9qZpsO7y53s7zLQmd/PbN9ExPd3/dXV3VW5TJZKQSp2rgH3AsXxUUVWIBqoLt4B0wsFACvA8uAn3BFxXoyGIwDcxOUO4msAz8ChqCXEZqEVgCJuciQFvwuV2/BR7KUYD7RUdxPBiQoNwkcAT0B+2dtsRNLcE34CtwVS4CTAWP2PVBUB/8mbARReCENWIn6BKzXBVwHFQHO8AUMChh3c+LDmJHcAnYkkSAmqAMrAOdLO8pMCFhI+4CzUBj0AE0iVnuRrDSBHwbPGDXSdJ6cCfYDEaCl5II8KToGmSHP7W8jaLTKknix2uBx8BoUAMcjlGO9c4Hy0E3sEB0NNdFiN3Grrl73A5miS7dv8A8593p4PswAUrBYPAx2ASaW/51YE3MzheD1uA5u15kAm6MKOdN/zPs90ywS9SQPRNS7glws12z3jKwF5wPrhedUXvsOWdDSZAA14B3QVPREXwavOwo93BMAVi2Dtgvugx+tFGaF1GOjZ0puvt4ifbjkOhSils3Z9vfoK6oHRkGxvhfzCYADU7vgA/HNYY0PCPADb5GcS2+GFGWuwVnyQYnj98ZJzo4JRHlOVs5a3s5ec+CP0SXUagAZ4vuu6+JWm+3Q1fbdT8wMaIR/Ohg+e/eze2M+3rPkHI0dKXWUdf7426wW9Q2DImoezhoAH528q4U3Y4bga1hAjwuavXv8H20M/jQrr8FrUIaQAtOw+X33j4A52UbBaeTPUQdpma+DlwO3rDy3BHCfAI+uxUccPJoB7gMuJWOCxKgHlhqKs8VtZzuB762d5huA6tF15g/8YNcJtt9+WNF/YraAQ3nmh9m12tFnS8v9RE1oDR0r0iwa8z9/ifJvmVmTJz2QQKssI6KVfK68x7dSb8BGmuj4qYVJtIPonuwl0bZPS08DVqHAAGSpN9895eBOdZ5uvAjnWcTrU7WT6N8bTYBCp24drvFfJdTeVUalVYmAQqSTguQggCFVjBpjBApgBsGe+kcsC9EAFro3XbPrSrK3XXLMjXMsf1laQngxctnifrbxc6H+QLD2UelPJChR8jtrDQlAUbn2P4haQlAH32Ok88taZtdXygnbzlMdFrmSjpLIKoT3Fp3ZcnPpCUA/1wgGu11Fw2G3ETvkIFEmaivsNNpeEUakXG+E5QYB6ySYOcmNQGGirqhnqvKDjMk5XR+FXwp5Y4MY4OP8iQAlxaX4u92P0N0qrNuLr39+RKgK7hY9ADjCvCm6JE03U5GVwxjGUgcFfUKS3wCuL+x6vYJQLHp6tIVp+9Pb/JcUdvC5/T0eIjBYIzB2rG0BahveaPs1zsPZHjayK6727ucFS1CBGAo/AK4x8q95zzjKfHxLALcInoA08I6ysSIkkdby+2ewnxn7y5LWwBGfAxAGElt8L33oGg4e6/o4WI70YAlaOS9+2wCiOXPlpOXAAdhm3WQnT7hPONpzyeiRtlbHqkKwE5y9BkR9vW9xzNCboOt7Z7LZaEEz4AwAdwGhxlBRpyXigZmQSlVARiD9zN1aen72zsrwWei8TUbc9Q6dHeeBXCP1PIuAKc2T1BpgHpb59lBhpS0+FyLPGfneSCND9fpfaLbZb62Qf4PYWmM8qm5wkkdGtdTzKcf8L8JkGuq6Ad+kfJdJqc+FFqAUzr9C1t0nNBv2OWuAAAAAElFTkSuQmCC%27%29%20%21important%3B%0A%7D%0A%0A%23formatList%20.menu-accel%20%7B%0A%20%20display%3A%20none%20%21important%3B%0A%7D%0A%0A%23formatList%20%23menuitem1%20%7B%0A%20%20-moz-image-region%3A%20rect%280%2016px%2016px%200%29%20%21important%3B%0A%7D%0A%0A%23formatList%20%23menuitem2%20%7B%0A%20%20-moz-image-region%3A%20rect%280%2032px%2016px%2016px%29%20%21important%3B%0A%7D%0A%0A%23formatList%20%23menuitem3%20%7B%0A%20%20-moz-image-region%3A%20rect%280%2048px%2016px%2032px%29%20%21important%3B%0A%7D%0A%0A%23formatList%20%23menuitem4%20%7B%0A%20%20-moz-image-region%3A%20rect%280%2064px%2016px%2048px%29%20%21important%3B%0A%7D%0A%0A%23formatList%20%23menuitem5%20%7B%0A%20%20-moz-image-region%3A%20rect%2816px%2016px%2032px%200px%29%20%21important%3B%0A%7D%0A%0A%23formatList%20%23menuitem6%20%7B%0A%20%20-moz-image-region%3A%20rect%2816px%2032px%2032px%2016px%29%20%21important%3B%0A%7D%0A%0A%23formatList%20%23menuitem7%20%7B%0A%20%20-moz-image-region%3A%20rect%2816px%2048px%2032px%2032px%29%20%21important%3B%0A%7D%0A%5D%5D%3E%3C/CSS%3E%0A%20%20%3CxCSS%3E%3C%21%5BCDATA%5B%5D%5D%3E%3C/xCSS%3E%0A%20%20%3CCSS2%3E%3C%21%5BCDATA%5B%5D%5D%3E%3C/CSS2%3E%0A%20%20%3CxCSS2%3E%3C%21%5BCDATA%5B%5D%5D%3E%3C/xCSS2%3E%0A%20%20%3CCSS3%3E%3C%21%5BCDATA%5B%5D%5D%3E%3C/CSS3%3E%0A%20%20%3CxCSS3%3E%3C%21%5BCDATA%5B%5D%5D%3E%3C/xCSS3%3E%0A%20%20%3CCSS4%3E%3C%21%5BCDATA%5B%5D%5D%3E%3C/CSS4%3E%0A%20%20%3CxCSS4%3E%3C%21%5BCDATA%5B%5D%5D%3E%3C/xCSS4%3E%0A%20%20%3CHTML%3E%3C%21%5BCDATA%5B%5D%5D%3E%3C/HTML%3E%0A%20%20%3CxHTML%3E%3C%21%5BCDATA%5B%5D%5D%3E%3C/xHTML%3E%0A%20%20%3Cnotes%3E%3C%21%5BCDATA%5B%5D%5D%3E%3C/notes%3E%0A%20%20%3Cattributes/%3E%0A%3C/custombutton%3E
