custombutton://%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%3F%3E%0D%0A%3Ccustombutton%20xmlns%3Acb%3D%22http%3A//xsms.nm.ru/custombuttons/%22%3E%0A%20%20%3Cname%3EPin%20Tabs%3C/name%3E%0A%20%20%3Cimage%3E%3C%21%5BCDATA%5Bfile%3A///C%3A/images2/pp1.png%5D%5D%3E%3C/image%3E%0A%20%20%3Cmode%3E0%3C/mode%3E%0A%20%20%3Cinitcode%3E%3C%21%5BCDATA%5B%22use%20strict%22%0A%0Aconst%20_this%20%3D%20this%2C%0A%20%20%20%20%20%20sp%20%3D%20Services.prefs%2C%0A%20%20%20%20%20%20ht%20%3D%20encodeURIComponent%28this.Help%29%2C%0A%20%20%20%20%20%20fp%20%3D%20Cc%5B%22@mozilla.org/filepicker%3B1%22%5D.createInstance%28Ci.nsIFilePicker%29%2C%0A%20%20%20%20%20%20ios%20%3D%20Cc%5B%22@mozilla.org/network/io-service%3B1%22%5D.getService%28Ci.nsIIOService%29%2C%0A%20%20%20%20%20%20str%20%3D%20Cc%5B%22@mozilla.org/supports-string%3B1%22%5D.createInstance%28Ci.nsISupportsString%29%2C%0A%20%20%20%20%20%20sss%20%3D%20Cc%5B%22@mozilla.org/content/style-sheet-service%3B1%22%5D.getService%28Ci.nsIStyleSheetService%29%2C%0A%20%20%20%20%20%20wm%20%3D%20Cc%5B%22@mozilla.org/appshell/window-mediator%3B1%22%5D.getService%28Ci.nsIWindowMediator%29.getMostRecentWindow%2C%0A%20%20%20%20%20%20noDropmarker%20%3D%20%22%2523%22%20+%20this.id%20+%20%22%20.toolbarbutton-menu-dropmarker%20%7Bdisplay%3A%20none%20%21important%7D%22%3B%0A%0Apref.root%20%3D%20%22custombuttons.PinTabs%22%20+%20this.id.match%28/%5Cd+/%29%20+%20%22.%22%3B%0Apref.defaults%20%3D%20%7B%0A%20%20closeDelayText%3A%20%22Close%20Delay%22%2C%0A%20%20dialogTitleText%3A%20%22Pin%20Tabs%20Settings%22%2C%0A%20%20editBtnText%3A%20%22Edit%20Text%22%2C%0A%20%20editorTitleText%3A%20%22Pin%20Tabs%20Text%20Editor%22%2C%0A%20%20hideDropmarkerText%3A%20%22Hide%20Dropmarker%22%2C%0A%20%20iconPinTabText%3A%20%22Icon%20State%20On%20For%20Active%20Pinned%20Tab%22%2C%0A%20%20openDelayText%3A%20%22Open%20Delay%22%2C%0A%20%20pinOffText%3A%20%22Off%22%2C%0A%20%20pinOnText%3A%20%22On%22%2C%0A%20%20popupList%3A%20%22Pin%20Left%20Tabs%2CPin%20Active%20Tab%2CPin%20Right%20Tabs%2CPin%20All%20Tabs%2CUnpin%20Active%20Tab%2CUnpin%20All%20Tabs%22%2C%0A%20%20popupOnHoverText%3A%20%22Popup%20On%20Hover%22%2C%0A%20%20removePrefsText%3A%20%22Remove%20All%20Prefs%20%28default/user%20set%29%20When%20Deleting%20Button%22%2C%0A%20%20selectIconText%3A%20%22Select%20Icon%20For%20State%3A%22%2C%0A%20%20tooltipText%3A%20%22Pin%20Tabs%20%28Middle-click%20for%20settings%29%22%2C%0A%20%20pinOff%3A%20%22data%3Aimage/png%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAC10lEQVR42qVUO0sjURQ+V40a%5C%0A41uwUUSNxAcG1vgCLQai2EgEH0jCVpJGbLfQdhFSJp0W/oeEQAQb4xRZQWHdLoyYgM1CTDRRNCbG197vLDNE2K08cLnMzL3nfI9zRlit1%5C%0Am9vb28uIQSVh/6s7+/v7x/28pD3o8Jms/3q7u7+Qp+IZDKZEuPj42p/f79S/gFVX19fyWKx0NraGvX09PD7RCJBOzs7VFlZSRUVFcZ5TY%5C%0AaYm5tTR0ZGPiR6fn6mh4cHGh0dpcXFRaqpqaGnpyd+j/D5fGQ2mzkh4uzsTBNut1udmppSytHc399TNpsl+Y36+vqgAZVKJXp5eeHLQKa%5C%0AqKjU1NTGy4+NjTayvr6uzs7NKOZpMJgPe5HK5aHh4mAUHQqBCsra2Ntrb26Pe3l6qq6ujaDSqic3NTXV+ft5IVCgUKJVKcaLBwUFSFIWp%5C%0A3dzcULFYZMSxWIzS6TTZ7XZqb2+ng4MDTWxvb6tLS0uKjgaUsHd1dTEN0AKKx8dHLgJap6enJN0mh8PBiSKRiCb8fr+6urqq4PD19bVRq%5C%0AbGxkenoCwmPjo4gLCcZGxtjas3NzRQKhTQRCAQ4UT6fp/PzcxZPtgRVVVUxAgiPHZR0NNBtaGiIWlpaWKNgMPiX2vLyspLL5Sgej/OlhY%5C%0AUFqq+vNwSGY6CLM4eHh5xER4NgaltbWyw2KkNg2VvkdDppYmKCk0Jg0AY1mLC/v8+JZBNzLyFY7I2NDXVmZkZBVdh+cXHBWq2srJAcHU6%5C%0AEJLe3txQOh/kZ1Do6OpgWgu33eDzckBgJILi6umIKXq+XbT45OeFxgWtwEW52dnZyM5pMJk7EDYkRkTay/dADlVtbW2l6epp2d3fp7u6O%5C%0AKWA1NDQYAtfW1hojxSMyOTlpDC20gHuoBBRAh2bEperqal5wE6v8tyNN0sTAwMBPqYXjM7+Ry8vL30Jy/i6rf/3fIX3CgfBfIftOSMd//%5C%0AAFdLKc1Vri3kgAAAABJRU5ErkJggg%3D%3D%22%2C%0A%20%20pinOn%3A%20%22data%3Aimage/png%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAADPElEQVR42qVUXUhaYRh+Tmlpz%5C%0AKVrRZaZFVmzhJREFgsvDC8Wg34git1HdNFNkHUTjaKboHbRXXfBoIuwFl3EYCLbcldrNZYdFzHZT+myrNSystx7vk0x2K564eFwvnO+53%5C%0Ave93nfj6uoqOi/vr5+wnEc0iP5nnwmEokbz/Sg/U5Oq9V+1Gg0dbhF7Ozs+DmTyeSqqqqypH8QTr26ukJpqQRDQ48hk8lxeXkJr/cK4+M%5C%0AvkJmZiYyMjNT/PAVns9lcBoPhBpGwKRqNoru7FAZDI62ICVHE4wFEIvcxPPwSEomUEQqxtrbGc52dna6GhgZLuppwOEybDjAwoIRUWkmr%5C%0AEcI3wg9SeoCtrUY4HIfIzc1lytxuN8/19PS4mpqaLOlq9vf3sbu7DbtdDrn8Hq2KCE6Ch/ALp6dtmJgoQXl5OXJycuB0OnnObre7mpubU%5C%0A0RnZ2fw+/0IBn1obf2OsrIyWtUSnhM+E2KUSiuWlqqg1+tRUFCAlZUVnhsdHXW1tbVZkmpCoUMUFnroNCVEonck/Q198ZPCXYjFMpyc6D%5C%0AEzU0kEehiNRka0vLzMc5OTk66Ojg5LPB4nFUHqGzfq6vKIQPU3nVc4Pn5PtcnAxoYFs7N5UKt1qK+vZ6nJ5XIsLCzw3NTUFCMSXPJ6vai%5C%0Ap2aR0FERQIPhBWCIDNqguwNevWszNWVFZaYZOp4NCoWA1cjgcf1Jrb2+3hEIheDweaDQeWK0qUlbE1FCXEL5QOxwgELiL+fkWFBfbUmqE%5C%0AYKkNDg6yYguWU4fC5+PR1/cAJSWXRDZPv30ikjBTFI2qMT39iA57CGpiag0pI2LF7u3tdVmtVsvFxQWzfXt7m3ooiJGRGPLz31IDRggJx%5C%0AGJ5lFY1qS5CbW0tqSpmaQnB7O/q6mINKYyEYH0gEKAhPMXYmBabm6+xuJhFREHs7V1To96hQquhUqlYM4rFYkbEGlIYEbKR2X9+fo6joy%5C%0AOYTDq0tETR379K6R6zFATIZLJUgSUSSWqk2IiYzebU0AotILinVErJ/ijW1w+QnZ3NNmVlZTGIRCKG9GuHTOK56urqD3SNGG9zjfh8vp8%5C%0Ac5fyM6vP0fz8lJ1yo4b+ChpYjx1d/A8otcDVLfoXKAAAAAElFTkSuQmCC%22%2C%0A%20%20dialogLeft%3A%20200%2C%0A%20%20dialogTop%3A%20200%2C%0A%20%20editorLeft%3A%20200%2C%0A%20%20editorTop%3A%20200%2C%0A%20%20popupCloseDelay%3A%20500%2C%0A%20%20popupOpenDelay%3A%20100%2C%0A%20%20hideDropmarker%3A%20false%2C%0A%20%20iconPinTab%3A%20true%2C%0A%20%20menuSeparator%3A%20true%2C%0A%20%20popupOnHover%3A%20false%2C%0A%20%20removePrefs%3A%20false%0A%7D%0A%0Afor%20%28let%20key%20in%20pref.defaults%29%20%7B%0A%20%20if%20%28pref.defaults.hasOwnProperty%28key%29%29%20%7B%0A%20%20%20%20let%20val%20%3D%20pref.defaults%5Bkey%5D%3B%0A%20%20%20%20switch%20%28typeof%20val%29%20%7B%0A%20%20%20%20%20%20case%20%22boolean%22%3A%0A%20%20%20%20%20%20%20%20sp.getDefaultBranch%28pref.root%29.setBoolPref%28key%2C%20val%29%3B%0A%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20case%20%22number%22%3A%0A%20%20%20%20%20%20%20%20sp.getDefaultBranch%28pref.root%29.setIntPref%28key%2C%20val%29%3B%0A%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20case%20%22string%22%3A%0A%20%20%20%20%20%20%20%20str.data%20%3D%20val%3B%0A%20%20%20%20%20%20%20%20sp.getDefaultBranch%28pref.root%29.setComplexValue%28key%2C%20Ci.nsISupportsString%2C%20str%29%3B%0A%20%20%20%20%20%20%20%20break%3B%0A%7D%20%7D%20%7D%0A%0Afunction%20pref%28key%29%20%7B%0A%20%20let%20%7Bbranch%2C%20defaults%7D%20%3D%20pref%3B%0A%20%20if%20%28branch%20%3D%3D%20null%29%20branch%20%3D%20sp.getBranch%28pref.root%29%3B%0A%20%20switch%20%28typeof%20defaults%5Bkey%5D%29%20%7B%0A%20%20%20%20case%20%22boolean%22%3A%20return%20branch.getBoolPref%28key%29%3B%0A%20%20%20%20case%20%22number%22%3A%20return%20branch.getIntPref%28key%29%3B%0A%20%20%20%20case%20%22string%22%3A%20return%20branch.getComplexValue%28key%2C%20Ci.nsISupportsString%29.data%3B%0A%20%20%7D%0A%20%20return%20null%3B%0A%7D%0A%0Apref.observe%20%3D%20function%28prefs%2C%20callback%29%20%7B%0A%20%20let%20%7Broot%7D%20%3D%20pref%3B%0A%20%20function%20observe%28subject%2C%20topic%2C%20data%29%20%7B%0A%20%20%20%20if%20%28topic%20%21%3D%3D%20%22nsPref%3Achanged%22%29%20return%3B%0A%20%20%20%20let%20pref%20%3D%20data.slice%28root.length%29%3B%0A%20%20%20%20if%20%28prefs.indexOf%28pref%29%20%3D%3D%3D%20-1%29%20return%3B%0A%20%20%20%20callback%28pref%29%3B%0A%20%20%7D%0A%20%20sp.addObserver%28root%2C%20observe%2C%20false%29%3B%0A%20%20unload%20%3D%3E%20sp.removeObserver%28root%2C%20observe%29%3B%0A%7D%0A%0Afunction%20getSS%28filepath%29%20%7Breturn%20ios.newURI%28%22data%3Atext/css%2C%22%20+%20filepath%2C%20null%2C%20null%29%7D%0A%0Afunction%20loadSheet%28filepath%29%20%7Bsss.loadAndRegisterSheet%28getSS%28filepath%29%2C%20sss.USER_SHEET%29%7D%0A%0Afunction%20unloadSheet%28filepath%29%20%7B%0A%20%20let%20uri%20%3D%20getSS%28filepath%29%3B%0A%20%20if%20%28sss.sheetRegistered%28uri%2C%20sss.USER_SHEET%29%29%20sss.unregisterSheet%28uri%2C%20sss.USER_SHEET%29%3B%0A%7D%0A%0Afunction%20loadAndObserve%28prefName%2C%20filepath%29%20%7B%0A%20%20if%20%28pref%28prefName%29%29%20loadSheet%28filepath%29%3B%0A%20%20pref.observe%28%5BprefName%5D%2C%20function%28%29%20%7Bpref%28prefName%29%20%3F%20loadSheet%28filepath%29%20%3A%20unloadSheet%28filepath%29%3B%7D%29%3B%0A%20%20unload%20%3D%3E%20unloadSheet%28filepath%29%3B%0A%7D%0A%0Afunction%20unload%28callback%2C%20container%29%20%7B%0A%20%20let%20unloaders%20%3D%20unload.unloaders%3B%0A%20%20if%20%28unloaders%20%3D%3D%20null%29%20unloaders%20%3D%20unload.unloaders%20%3D%20%5B%5D%3B%0A%20%20if%20%28callback%20%3D%3D%20null%29%20%7B%0A%20%20%20%20unloaders.slice%28%29.forEach%28unloader%20%3D%3E%20unloader%28%29%29%3B%0A%20%20%20%20unloaders.length%20%3D%200%3B%0A%20%20%20%20return%3B%0A%20%20%7D%0A%20%20if%20%28container%20%21%3D%20null%29%20%7B%0A%20%20%20%20container.addEventListener%28%22unload%22%2C%20removeUnloader%2C%20false%29%3B%0A%20%20%20%20let%20origCallback%20%3D%20callback%3B%0A%20%20%20%20callback%20%3D%20function%28%29%20%7B%0A%20%20%20%20%20%20container.removeEventListener%28%22unload%22%2C%20removeUnloader%2C%20false%29%3B%0A%20%20%20%20%20%20origCallback%28%29%3B%0A%20%20%7D%20%7D%0A%20%20function%20unloader%28%29%20%7B%0A%20%20%20%20try%20%7B%0A%20%20%20%20%20%20callback%28%29%3B%0A%20%20%20%20%7D%20catch%28ex%29%20%7B%7D%0A%20%20%7D%0A%20%20unloaders.push%28unloader%29%3B%0A%20%20function%20removeUnloader%28%29%20%7B%0A%20%20%20%20let%20index%20%3D%20unloaders.indexOf%28unloader%29%3B%0A%20%20%20%20if%20%28index%20%21%3D%3D%20-1%29%20unloaders.splice%28index%2C%201%29%3B%0A%20%20%7D%0A%20%20return%20removeUnloader%3B%0A%7D%0A%0Afunction%20gCV%28aKey%2C%20aPrefDef%29%20%7B%0A%20%20return%20sp.getComplexValue%28aPrefDef%20%3F%20pref.root%20+%20aKey%20%3A%20aKey%2C%20Ci.nsISupportsString%29.data%3B%0A%7D%0A%0Afunction%20sCV%28aKey%2C%20aVal%2C%20aPrefDef%29%20%7B%0A%20%20str.data%20%3D%20aVal%3B%0A%20%20sp.setComplexValue%28aPrefDef%20%3F%20pref.root%20+%20aKey%20%3A%20aKey%2C%20Ci.nsISupportsString%2C%20str%29%3B%0A%7D%0A%0Afunction%20setIcon%28%29%20%7B%0A%20%20if%20%28pref%28%22iconPinTab%22%29%29%20%0A%20%20%20%20_this.image%20%3D%20gBrowser.selectedTab.hasAttribute%28%22pinned%22%29%20%3F%20gCV%28%22pinOn%22%2C%20true%29%20%3A%20gCV%28%22pinOff%22%2C%20true%29%3B%0A%20%20else%20%7B%0A%20%20%20%20let%20tabs%20%3D%20gBrowser.tabContainer.childNodes%3B%0A%20%20%20%20for%20%28let%20i%20%3D%200%2C%20cnt%20%3D%200%3B%20i%20%3C%20tabs.length%3B%20i++%29%20if%20%28tabs%5Bi%5D.hasAttribute%28%22pinned%22%29%29%20cnt++%3B%0A%20%20%20%20_this.image%20%3D%20cnt%20%3E%200%20%3F%20gCV%28%22pinOn%22%2C%20true%29%20%3A%20gCV%28%22pinOff%22%2C%20true%29%3B%0A%7D%20%7D%0A%0Afunction%20setTabs%28e%29%20%7B%0A%20%20let%20tabs%20%3D%20gBrowser.tabContainer%2C%20leftTabs%2C%20allTabs%2C%20rightTabs%3B%0A%20%20switch%20%28e%29%20%7B%0A%20%20%20%20case%20%22pinTab1%22%3A%0A%20%20%20%20%20%20for%20%28let%20i%20%3D%200%3B%20i%20%3C%20tabs.selectedIndex%3B%20i++%29%20%7B%0A%20%20%20%20%20%20%20%20leftTabs%20%3D%20tabs.childNodes%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20gBrowser.pinTab%28leftTabs%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20break%3B%0A%20%20%20%20case%20%22pinTab2%22%3A%0A%20%20%20%20%20%20if%20%28%21gBrowser.selectedTab.hasAttribute%28%22pinned%22%29%29%20gBrowser.pinTab%28gBrowser.selectedTab%29%3B%0A%20%20%20%20%20%20break%3B%0A%20%20%20%20case%20%22pinTab3%22%3A%0A%20%20%20%20%20%20for%20%28let%20i%20%3D%20tabs.selectedIndex%20+%201%3B%20i%20%3C%20tabs.childNodes.length%3B%20i++%29%20%7B%0A%20%20%20%20%20%20%20%20rightTabs%20%3D%20tabs.childNodes%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20gBrowser.pinTab%28rightTabs%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20break%3B%0A%20%20%20%20case%20%22pinTab4%22%3A%0A%20%20%20%20%20%20for%20%28let%20i%20%3D%200%3B%20i%20%3C%20tabs.childNodes.length%3B%20i++%29%20%7B%0A%20%20%20%20%20%20%20%20allTabs%20%3D%20tabs.childNodes%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20gBrowser.pinTab%28allTabs%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20break%3B%0A%20%20%20%20case%20%22pinTab5%22%3A%0A%20%20%20%20%20%20if%20%28gBrowser.selectedTab.hasAttribute%28%22pinned%22%29%29%20gBrowser.unpinTab%28gBrowser.selectedTab%29%3B%0A%20%20%20%20%20%20break%3B%0A%20%20%20%20case%20%22pinTab6%22%3A%0A%20%20%20%20%20%20for%20%28let%20i%20%3D%20tabs.childNodes.length%20-%201%3B%20i%20%3E%3D%200%3B%20i--%29%20%7B%0A%20%20%20%20%20%20%20%20allTabs%20%3D%20tabs.childNodes%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20gBrowser.unpinTab%28allTabs%29%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20break%3B%0A%20%20%7D%0A%20%20setIcon%28%29%3B%0A%7D%0A%0Afunction%20popHover%28%29%20%7B%0A%20%20if%20%28pref%28%22popupOnHover%22%29%29%20%7B%0A%20%20%20%20_this.timer%20%3D%200%3B%0A%20%20%20%20_this.onmouseover%20%3D%20function%28%29%20%7B%0A%20%20%20%20%20%20clearTimeout%28_this.timer%29%3B%0A%20%20%20%20%20%20_this.timer%20%3D%20setTimeout%28function%28%29%20%7B_this.open%20%3D%20true%7D%2C%20pref%28%22popupOpenDelay%22%29%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20_this.onmouseout%20%3D%20function%28%29%20%7B%0A%20%20%20%20%20%20clearTimeout%28_this.timer%29%3B%20%0A%20%20%20%20%20%20_this.timer%20%3D%20setTimeout%28function%28%29%20%7B_this.open%20%3D%20false%7D%2C%20pref%28%22popupCloseDelay%22%29%29%3B%0A%20%20%20%20%7D%20%0A%20%20%7D%20else%20%7B%0A%20%20%20%20_this.onmouseover%20%3D%20%7B%7D%0A%20%20%20%20_this.onmouseout%20%3D%20%7B%7D%0A%20%20%20%20popup.onmouseover%20%3D%20function%28%29%20%7B_this.open%20%3D%20true%7D%0A%20%20%20%20popup.onmouseout%20%3D%20function%28%29%20%7B_this.open%20%3D%20false%7D%0A%7D%20%7D%0A%0Alet%20gRoot%20%3D%20sp.getBranch%28pref.root%29%2C%20popup%20%3D%20document.createElement%28%22menupopup%22%29%2C%20dialog%3B%0A%0Afor%20%28let%20i%20%3D%200%2C%20list%20%3D%20gCV%28%22popupList%22%2C%20true%29.split%28%22%2C%22%29%3B%20i%20%3C%20list.length%3B%20i++%29%20%7B%0A%20%20let%20item%20%3D%20document.createElement%28%22menuitem%22%29%3B%0A%20%20item.setAttribute%28%22id%22%2C%20%22pinTab%22%20+%20%28i+1%29%29%3B%0A%20%20item.setAttribute%28%22class%22%2C%20%22menuitem-iconic%22%29%3B%0A%20%20item.setAttribute%28%22label%22%2C%20list%5Bi%5D%29%3B%0A%20%20item.setAttribute%28%22closemenu%22%2C%20%22none%22%29%3B%0A%20%20item.onclick%20%3D%20function%28e%29%20%7BsetTabs%28e.target.id%29%7D%0A%20%20popup.appendChild%28item%29%3B%0A%7D%0A%0Apopup.id%20%3D%20%22pinTabs%22%3B%0Athis.type%20%3D%20%22menu%22%3B%0Athis.appendChild%28popup%29%3B%0A%0Athis.onclick%20%3D%20function%28e%29%20%7B%0A%20%20if%20%28e.button%20%3D%3D%3D%201%29%20%7B%0A%20%20%20%20if%20%28wm%28%22pin%3Atabs%22%29%29%20return%3B%0A%20%20%20%20let%20data%20%3D%20%27%3C%3Fxml%20version%3D%221.0%22%3F%3E%3C%3Fxml-stylesheet%20href%3D%22chrome%3A//global/skin/%22%20type%3D%22text/css%22%3F%3E%5C%0A%20%20%20%20%20%20%3Cwindow%20xmlns%3D%22%27%20+%20xulns%20+%20%27%22%20id%3D%22pinTabsDialog%22%20windowtype%3D%22pin%3Atabs%22%20%5C%0A%20%20%20%20%20%20%20%20title%3D%22%27%20+%20gCV%28%22dialogTitleText%22%2C%20true%29%20+%20%27%22%20persist%3D%22screenX%20screenY%20width%20height%22%20%5C%0A%20%20%20%20%20%20%20%20minwidth%3D%22356%22%20minheight%3D%22%22%20onload%3D%22self.onLoadDialog%28this%29%22%20onclose%3D%22self.onCloseDialog%28this%29%22%3E%5C%0A%20%20%20%20%20%20%20%20%3Chbox%20id%3D%22hbox1%22%20class%3D%22hbox%22%20align%3D%22center%22%3E%5C%0A%20%20%20%20%20%20%20%20%20%20%3Clabel%20id%3D%22selectIcon%22%20value%3D%22%27%20+%20gCV%28%22selectIconText%22%2C%20true%29%20+%20%27%22/%3E%5C%0A%20%20%20%20%20%20%20%20%20%20%3Cbutton%20id%3D%22pinOff%22%20class%3D%22button%22%20label%3D%22%27%20+%20gCV%28%22pinOffText%22%2C%20true%29%20+%20%27%22%20%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20image%3D%22%27%20+%20gCV%28%22pinOff%22%2C%20true%29%20+%20%27%22%20oncommand%3D%22self.onIcon%28this%29%22/%3E%5C%0A%20%20%20%20%20%20%20%20%20%20%3Cbutton%20id%3D%22pinOn%22%20class%3D%22button%22%20label%3D%22%27%20+%20gCV%28%22pinOnText%22%2C%20true%29%20+%20%27%22%20%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20image%3D%22%27%20+%20gCV%28%22pinOn%22%2C%20true%29%20+%20%27%22%20oncommand%3D%22self.onIcon%28this%29%22/%3E%5C%0A%20%20%20%20%20%20%20%20%20%20%3Cbutton%20id%3D%22editBtn%22%20class%3D%22button%22%20label%3D%22%27%20+%20gCV%28%22editBtnText%22%2C%20true%29%20+%20%27%22%20%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20oncommand%3D%22self.onEdit%28this%29%22/%3E%5C%0A%20%20%20%20%20%20%20%20%3C/hbox%3E%5C%0A%20%20%20%20%20%20%20%20%3Chbox%20id%3D%22hbox2%22%20class%3D%22hbox%22%20align%3D%22center%22%3E%5C%0A%20%20%20%20%20%20%20%20%20%20%3Ccheckbox%20id%3D%22hideDropmarker%22%20label%3D%22%27%20+%20gCV%28%22hideDropmarkerText%22%2C%20true%29%20+%20%27%22%20%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20checked%3D%22%27%20+%20pref%28%22hideDropmarker%22%29%20+%20%27%22%20oncommand%3D%22self.onCheckbox%28this%29%22/%3E%5C%0A%20%20%20%20%20%20%20%20%20%20%3Ccheckbox%20id%3D%22iconPinTab%22%20label%3D%22%27%20+%20gCV%28%22iconPinTabText%22%2C%20true%29%20+%20%27%22%20%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20checked%3D%22%27%20+%20pref%28%22iconPinTab%22%29%20+%20%27%22%20oncommand%3D%22self.onCheckbox%28this%29%22/%3E%5C%0A%20%20%20%20%20%20%20%20%3C/hbox%3E%5C%0A%20%20%20%20%20%20%20%20%3Chbox%20id%3D%22hbox3%22%20class%3D%22hbox%22%20align%3D%22center%22%3E%5C%0A%20%20%20%20%20%20%20%20%20%20%3Ccheckbox%20id%3D%22popupOnHover%22%20label%3D%22%27%20+%20gCV%28%22popupOnHoverText%22%2C%20true%29%20+%20%27%22%20%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20checked%3D%22%27%20+%20pref%28%22popupOnHover%22%29%20+%20%27%22%20oncommand%3D%22self.onCheckbox%28this%29%22/%3E%5C%0A%20%20%20%20%20%20%20%20%20%20%3Chbox%20id%3D%22delayGroup%22%20align%3D%22center%22%20hidden%3D%22%27%20+%20%21pref%28%22popupOnHover%22%29%20+%20%27%22%3E%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Clabel%20id%3D%22openDelay%22%20value%3D%22%27%20+%20gCV%28%22openDelayText%22%2C%20true%29%20+%20%27%22/%3E%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Ctextbox%20id%3D%22popupOpenDelay%22%20class%3D%22textbox%22%20value%3D%22%27%20+%20pref%28%22popupOpenDelay%22%29%20+%20%27%22%20%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20oninput%3D%22self.onTextbox%28this%29%22/%3E%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Clabel%20id%3D%22closeDelay%22%20value%3D%22%27%20+%20gCV%28%22closeDelayText%22%2C%20true%29%20+%20%27%22/%3E%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Ctextbox%20id%3D%22popupCloseDelay%22%20class%3D%22textbox%22%20value%3D%22%27%20+%20pref%28%22popupCloseDelay%22%29%20+%20%27%22%20%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20oninput%3D%22self.onTextbox%28this%29%22/%3E%5C%0A%20%20%20%20%20%20%20%20%20%20%3C/hbox%3E%5C%0A%20%20%20%20%20%20%20%20%3C/hbox%3E%5C%0A%20%20%20%20%20%20%20%20%3Chbox%20id%3D%22hbox4%22%20class%3D%22hbox%22%20align%3D%22center%22%3E%5C%0A%20%20%20%20%20%20%20%20%20%20%3Ccheckbox%20id%3D%22removePrefs%22%20label%3D%22%27%20+%20gCV%28%22removePrefsText%22%2C%20true%29%20+%20%27%22%20%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20checked%3D%22%27%20+%20pref%28%22removePrefs%22%29%20+%20%27%22%20oncommand%3D%22self.onCheckbox%28this%29%22/%3E%5C%0A%20%20%20%20%20%20%20%20%3C/hbox%3E%5C%0A%20%20%20%20%20%20%3C/window%3E%27%3B%0A%20%20%20%20data%20%3D%20data.replace%28/self/g%2C%20%22opener.document.getElementById%28%26quot%3B%22%20+%20self.id%20+%20%22%26quot%3B%29%22%29%3B%0A%20%20%20%20let%20url%20%3D%20%22data%3Aapplication/vnd.mozilla.xul+xml%3Btext/plain%2C%22%20+%20encodeURIComponent%28data%29%3B%0A%20%20%20%20dialog%20%3D%20window.openDialog%28url%2C%20%22%22%2C%20%22chrome%2Cresizable%2CalwaysRaised%22%29%3B%0A%7D%20%7D%0A%0Athis.onEdit%20%3D%20function%28e%29%20%7B%0A%20%20if%20%28wm%28%22text%3Aeditor%22%29%29%20return%3B%0A%20%20let%20data%20%3D%20%27%3C%3Fxml%20version%3D%221.0%22%3F%3E%3C%3Fxml-stylesheet%20href%3D%22chrome%3A//global/skin/%22%20type%3D%22text/css%22%3F%3E%5C%0A%20%20%20%20%3Cwindow%20xmlns%3D%22%27%20+%20xulns%20+%20%27%22%20id%3D%22textEditorDialog%22%20windowtype%3D%22text%3Aeditor%22%20%5C%0A%20%20%20%20%20%20title%3D%22%27%20+%20gCV%28%22editorTitleText%22%2C%20true%29%20+%20%27%22%20persist%3D%22screenX%20screenY%20width%20height%22%20%5C%0A%20%20%20%20%20%20minwidth%3D%22324%22%20minheight%3D%22%22%20onload%3D%22self.onLoadEditor%28this%29%22%20onclose%3D%22self.onCloseEditor%28this%29%22%3E%5C%0A%20%20%20%20%20%20%3Ctextbox%20id%3D%22dialogTitleText%22%20class%3D%22textbox%22%20value%3D%22%27%20+%20gCV%28%22dialogTitleText%22%2C%20true%29%20+%20%27%22%20%5C%0A%20%20%20%20%20%20%20%20oninput%3D%22self.onText%28this%2C%20true%29%22/%3E%5C%0A%20%20%20%20%20%20%3Ctextbox%20id%3D%22editorTitleText%22%20class%3D%22textbox%22%20value%3D%22%27%20+%20gCV%28%22editorTitleText%22%2C%20true%29%20+%20%27%22%20%5C%0A%20%20%20%20%20%20%20%20oninput%3D%22self.onText%28this%2C%20true%29%22/%3E%5C%0A%20%20%20%20%20%20%3Ctextbox%20id%3D%22selectIconText%22%20class%3D%22textbox%22%20value%3D%22%27%20+%20gCV%28%22selectIconText%22%2C%20true%29%20+%20%27%22%20%5C%0A%20%20%20%20%20%20%20%20oninput%3D%22self.onText%28this%2C%20true%29%22/%3E%5C%0A%20%20%20%20%20%20%3Ctextbox%20id%3D%22pinOffText%22%20class%3D%22textbox%22%20value%3D%22%27%20+%20gCV%28%22pinOffText%22%2C%20true%29%20+%20%27%22%20%5C%0A%20%20%20%20%20%20%20%20oninput%3D%22self.onText%28this%2C%20false%29%22/%3E%5C%0A%20%20%20%20%20%20%3Ctextbox%20id%3D%22pinOnText%22%20class%3D%22textbox%22%20value%3D%22%27%20+%20gCV%28%22pinOnText%22%2C%20true%29%20+%20%27%22%20%5C%0A%20%20%20%20%20%20%20%20oninput%3D%22self.onText%28this%2C%20false%29%22/%3E%5C%0A%20%20%20%20%20%20%3Ctextbox%20id%3D%22editBtnText%22%20class%3D%22textbox%22%20value%3D%22%27%20+%20gCV%28%22editBtnText%22%2C%20true%29%20+%20%27%22%20%5C%0A%20%20%20%20%20%20%20%20oninput%3D%22self.onText%28this%2C%20false%29%22/%3E%5C%0A%20%20%20%20%20%20%3Ctextbox%20id%3D%22hideDropmarkerText%22%20class%3D%22textbox%22%20value%3D%22%27%20+%20gCV%28%22hideDropmarkerText%22%2C%20true%29%20+%20%27%22%20%5C%0A%20%20%20%20%20%20%20%20oninput%3D%22self.onText%28this%2C%20false%29%22/%3E%5C%0A%20%20%20%20%20%20%3Ctextbox%20id%3D%22iconPinTabText%22%20class%3D%22textbox%22%20value%3D%22%27%20+%20gCV%28%22iconPinTabText%22%2C%20true%29%20+%20%27%22%20%5C%0A%20%20%20%20%20%20%20%20oninput%3D%22self.onText%28this%2C%20false%29%22/%3E%5C%0A%20%20%20%20%20%20%3Ctextbox%20id%3D%22popupOnHoverText%22%20class%3D%22textbox%22%20value%3D%22%27%20+%20gCV%28%22popupOnHoverText%22%2C%20true%29%20+%20%27%22%20%5C%0A%20%20%20%20%20%20%20%20oninput%3D%22self.onText%28this%2C%20false%29%22/%3E%5C%0A%20%20%20%20%20%20%3Ctextbox%20id%3D%22openDelayText%22%20class%3D%22textbox%22%20value%3D%22%27%20+%20gCV%28%22openDelayText%22%2C%20true%29%20+%20%27%22%20%5C%0A%20%20%20%20%20%20%20%20oninput%3D%22self.onText%28this%2C%20true%29%22/%3E%5C%0A%20%20%20%20%20%20%3Ctextbox%20id%3D%22closeDelayText%22%20class%3D%22textbox%22%20value%3D%22%27%20+%20gCV%28%22closeDelayText%22%2C%20true%29%20+%20%27%22%20%5C%0A%20%20%20%20%20%20%20%20oninput%3D%22self.onText%28this%2C%20true%29%22/%3E%5C%0A%20%20%20%20%20%20%3Ctextbox%20id%3D%22removePrefsText%22%20class%3D%22textbox%22%20value%3D%22%27%20+%20gCV%28%22removePrefsText%22%2C%20true%29%20+%20%27%22%20%5C%0A%20%20%20%20%20%20%20%20oninput%3D%22self.onText%28this%2C%20false%29%22/%3E%5C%0A%20%20%20%20%20%20%3Ctextbox%20id%3D%22tooltipText%22%20class%3D%22textbox%22%20value%3D%22%27%20+%20gCV%28%22tooltipText%22%2C%20true%29%20+%20%27%22%20%5C%0A%20%20%20%20%20%20%20%20oninput%3D%22self.onText%28this%2C%20false%29%22/%3E%5C%0A%20%20%20%20%3C/window%3E%27%3B%0A%20%20data%20%3D%20data.replace%28/self/g%2C%20%22opener.document.getElementById%28%26quot%3B%22%20+%20self.id%20+%20%22%26quot%3B%29%22%29%3B%0A%20%20let%20url%20%3D%20%22data%3Aapplication/vnd.mozilla.xul+xml%3Btext/plain%2C%22%20+%20encodeURIComponent%28data%29%3B%0A%20%20dialog%20%3D%20window.openDialog%28url%2C%20%22%22%2C%20%22chrome%2Cresizable%2CalwaysRaised%22%29%3B%0A%7D%0A%0Athis.onLoadDialog%20%3D%20function%28e%29%20%7Be.moveTo%28pref%28%22dialogLeft%22%29%2C%20pref%28%22dialogTop%22%29%29%7D%0A%0Athis.onLoadEditor%20%3D%20function%28e%29%20%7Be.moveTo%28pref%28%22editorLeft%22%29%2C%20pref%28%22editorTop%22%29%29%7D%0A%0Athis.onIcon%20%3D%20function%28e%29%20%7B%0A%20%20fp.init%28window%2C%20null%2C%20fp.modeOpen%29%3B%0A%20%20fp.appendFilters%28fp.filterImages%29%3B%0A%20%20if%20%28fp.show%28%29%20%21%3D%20fp.returnCancel%29%20%7B%0A%20%20%20%20sCV%28e.id%2C%20fp.fileURL.spec%2C%20true%29%3B%0A%20%20%20%20e.image%20%3D%20gCV%28e.id%2C%20true%29%3B%0A%20%20%20%20setIcon%28%29%3B%0A%7D%20%7D%0A%0Athis.onCheckbox%20%3D%20function%28e%29%20%7B%0A%20%20let%20bool%20%3D%20pref%28e.id%29%20%21%3D%3D%20false%20%3F%20false%20%3A%20true%3B%0A%20%20gRoot.setBoolPref%28e.id%2C%20bool%29%3B%0A%20%20switch%20%28e.id%29%20%7B%0A%20%20%20%20case%20%22iconPinTab%22%3A%0A%20%20%20%20%20%20setIcon%28%29%3B%0A%20%20%20%20%20%20break%3B%0A%20%20%20%20case%20%22hideDropmarker%22%3A%0A%20%20%20%20%20%20if%20%28pref%28%22hideDropmarker%22%29%29%20loadSheet%28noDropmarker%29%3B%0A%20%20%20%20%20%20else%20unloadSheet%28noDropmarker%29%3B%0A%20%20%20%20%20%20break%3B%0A%20%20%20%20case%20%22popupOnHover%22%3A%0A%20%20%20%20%20%20e.nextSibling.hidden%20%3D%20%21bool%3B%0A%20%20%20%20%20%20popHover%28%29%3B%0A%20%20%20%20%20%20break%3B%0A%7D%20%7D%0A%0Athis.onTextbox%20%3D%20function%28e%29%20%7B%0A%20%20e.value%20%3D%20e.value.replace%28/%5B%5E0-9%5D%7C%5Cs+/g%2C%20%22%22%29%3B%0A%20%20gRoot.setIntPref%28e.id%2C%20e.value%29%3B%0A%7D%0A%0Athis.onText%20%3D%20function%28e%2C%20x%29%20%7B%0A%20%20e.value%20%3D%20e.value.replace%28/%22/g%2C%20%22%27%22%29%3B%0A%20%20sCV%28e.id%2C%20e.value%2C%20true%29%3B%0A%20%20let%20str%20%3D%20e.id.split%28%22Text%22%29%5B0%5D%2C%20mrw%20%3D%20wm%28%22pin%3Atabs%22%29%3B%0A%20%20switch%20%28str%29%20%7B%0A%20%20%20%20case%20%22dialogTitle%22%3A%0A%20%20%20%20%20%20mrw.document.title%20%3D%20gCV%28%22dialogTitleText%22%2C%20true%29%3B%0A%20%20%20%20%20%20break%3B%0A%20%20%20%20case%20%22editorTitle%22%3A%0A%20%20%20%20%20%20e.ownerDocument.title%20%3D%20gCV%28%22editorTitleText%22%2C%20true%29%3B%0A%20%20%20%20%20%20break%3B%0A%20%20%20%20case%20%22tooltip%22%3A%20%0A%20%20%20%20%20%20_this.tooltipText%20%3D%20gCV%28%22tooltipText%22%2C%20true%29%3B%0A%20%20%20%20%20%20break%3B%0A%20%20%20%20default%3A%0A%20%20%20%20%20%20if%20%28x%29%20mrw.document.getElementById%28str%29.value%20%3D%20e.value%3B%0A%20%20%20%20%20%20else%20mrw.document.getElementById%28str%29.label%20%3D%20e.value%3B%0A%7D%20%7D%0A%0Athis.onCloseDialog%20%3D%20function%28e%29%20%7B%0A%20%20gRoot.setIntPref%28%22dialogLeft%22%2C%20e.screenX%29%3B%0A%20%20gRoot.setIntPref%28%22dialogTop%22%2C%20e.screenY%29%3B%0A%20%20e.close%28%29%3B%0A%7D%0A%0Athis.onCloseEditor%20%3D%20function%28e%29%20%7B%0A%20%20gRoot.setIntPref%28%22editorLeft%22%2C%20e.screenX%29%3B%0A%20%20gRoot.setIntPref%28%22editorTop%22%2C%20e.screenY%29%3B%0A%20%20e.close%28%29%3B%0A%7D%0A%0Athis.tooltipText%20%3D%20gCV%28%22tooltipText%22%2C%20true%29%3B%0A%0Athis.onDestroy%20%3D%20function%28reason%29%20%7B%0A%20%20if%20%28reason%20%3D%3D%3D%20%22delete%22%29%20%7B%0A%20%20%20%20removeEventListener%28%22DOMContentLoaded%22%2C%20setIcon%29%3B%0A%20%20%20%20removeEventListener%28%22TabSelect%22%2C%20setIcon%29%3B%0A%20%20%20%20unloadSheet%28noDropmarker%29%3B%0A%20%20%20%20unloadSheet%28ht%29%3B%0A%20%20%20%20if%20%28pref%28%22removePrefs%22%29%29%20sp.deleteBranch%28pref.root%29%3B%0A%7D%20%7D%0A%0Aif%20%28pref%28%22menuSeparator%22%29%29%20%7B%0A%20%20let%20sep%20%3D%20document.createElement%28%22menuseparator%22%29%3B%0A%20%20popup.insertBefore%28sep%2C%20popup.childNodes%5B4%5D%29%3B%0A%20%20sep.id%20%3D%20%22separator1%22%3B%0A%7D%0A%0ApopHover%28%29%3B%0AsetIcon%28%29%3B%0A%0AloadSheet%28ht%29%3B%0AloadAndObserve%28%22hideDropmarker%22%2C%20noDropmarker%29%3B%0A%0AaddEventListener%28%22DOMContentLoaded%22%2C%20setIcon%29%3B%0AaddEventListener%28%22TabSelect%22%2C%20setIcon%29%3B%5D%5D%3E%3C/initcode%3E%0A%20%20%3Ccode%3E%3C%21%5BCDATA%5B/*CODE*/%5D%5D%3E%3C/code%3E%0A%20%20%3Caccelkey%3E%3C%21%5BCDATA%5B%5D%5D%3E%3C/accelkey%3E%0A%20%20%3Chelp%3E%3C%21%5BCDATA%5B@namespace%20url%28%22http%3A//www.mozilla.org/keymaster/gatekeeper/there.is.only.xul%22%29%3B%0A%0Amenupopup%23pinTabs%20%7B%0A%20%20-moz-appearance%3A%20none%20%21important%3B%0A%20%20padding%3A%200%200%202px%200%20%21important%3B%0A%7D%0A%0Amenupopup%23pinTabs%20.menuitem-iconic%20%7B%0A%20%20padding%3A%200%206px%20%21important%3B%0A%7D%0A%0Amenupopup%23pinTabs%20.menu-iconic-left%2C%0Amenupopup%23pinTabs%20.menu-accel-container%20%7B%0A%20%20display%3A%20none%20%21important%3B%0A%7D%0A%0Amenupopup%23pinTabs%20%23separator1%20%7B%0A%20%20-moz-appearance%3A%20none%20%21important%3B%0A%20%20border%3A%201px%20solid%20%23999%20%21important%3B%0A%20%20border-top%3A%20none%20%21important%3B%0A%20%20margin%3A%201px%200%20%21important%3B%0A%20%20padding%3A%200%20%21important%3B%0A%7D%0A%0A%23pinTabsDialog%20.button%20%7B%0A%20%20min-width%3A%2032px%20%21important%3B%0A%7D%0A%0A%23pinTabsDialog%20.button%20.button-icon%20%7B%0A%20%20margin%3A%200%206px%200%200%20%21important%3B%0A%7D%0A%0A%23pinTabsDialog%20%23editBtn%20.button-icon%20%7B%0A%20%20display%3A%20none%20%21important%3B%0A%7D%0A%0A%23pinTabsDialog%20.textbox%20%7B%0A%20%20width%3A%2035px%20%21important%3B%0A%7D%0A%0A%23pinTabsDialog%20%23hbox3%20%7B%0A%20%20height%3A%2032px%20%21important%3B%0A%7D%0A%0A%23pinTabsDialog%20%23delayGroup%20%7B%0A%20%20margin-top%3A%202px%20%21important%3B%0A%7D%5D%5D%3E%3C/help%3E%0A%20%20%3Cattributes/%3E%0A%3C/custombutton%3E
