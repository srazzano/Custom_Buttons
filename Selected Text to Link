custombutton://%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%3F%3E%0D%0A%3Ccustombutton%20xmlns%3Acb%3D%22http%3A//xsms.nm.ru/custombuttons/%22%3E%0A%20%20%3Cname%3ESelected%20Text%20to%20Link%20%3C/name%3E%0A%20%20%3Cimage%3E%3C%21%5BCDATA%5Bfile%3A///C%3A/Users/srazz/Downloads/Images32/link.png%5D%5D%3E%3C/image%3E%0A%20%20%3Cmode%3E0%3C/mode%3E%0A%20%20%3Cinitcode%3E%3C%21%5BCDATA%5B%27use%20strict%27%3B%0A%0Apref.root%20%3D%20%27extensions.custombuttons.Selected_Text_to_Link-%27%20+%20this.id.match%28/%5Cd+/%29%20+%20%27.%27%3B%0A%0Avar%20%7Bclasses%3A%20Cc%2C%20interfaces%3A%20Ci%2C%20utils%3A%20Cu%7D%20%3D%20Components%2C%0A%20%20%20%20CSS%2C%20CSS2%2C%20CSS3%2C%20CSS4%2C%20HTML%2C%20sym%20%3D%20%27%5Cn%20%5Cu2022%20%27%3B%0A%0Aconst%20fp%20%3D%20Cc%5B%27@mozilla.org/filepicker%3B1%27%5D.createInstance%28Ci.nsIFilePicker%29%2C%0A%20%20%20%20%20%20ios%20%3D%20Cc%5B%27@mozilla.org/network/io-service%3B1%27%5D.getService%28Ci.nsIIOService%29%2C%0A%20%20%20%20%20%20os%20%3D%20Cc%5B%27@mozilla.org/observer-service%3B1%27%5D.getService%28Ci.nsIObserverService%29%2C%0A%20%20%20%20%20%20pb%20%3D%20Cc%5B%27@mozilla.org/preferences-service%3B1%27%5D.getService%28Ci.nsIPrefService%29.QueryInterface%28Ci.nsIPrefBranch%29%2C%0A%20%20%20%20%20%20sss%20%3D%20Cc%5B%27@mozilla.org/content/style-sheet-service%3B1%27%5D.getService%28Ci.nsIStyleSheetService%29%2C%0A%20%20%20%20%20%20str%20%3D%20Cc%5B%27@mozilla.org/supports-string%3B1%27%5D.createInstance%28Ci.nsISupportsString%29%2C%0A%20%20%20%20%20%20wm%20%3D%20Cc%5B%27@mozilla.org/appshell/window-mediator%3B1%27%5D.getService%28Ci.nsIWindowMediator%29.getMostRecentWindow%3B%0A%0Apref.defaults%20%3D%20%7B%0A%20%20bbcSites%3A%20%27custombuttons.sourceforge.net%2C%20forums.mozillazine.org%2C%20forum.palemoon.org%2C%20tabmixplus.org%27%2C%0A%20%20htmlSites%3A%20%27forum.userstyles.org%27%2C%0A%20%20defaultURL%3A%20%27http%3A//most_used_link_here.ext%27%2C%0A%20%20urlList%3A%20%27http%3A//aaa.com%2C%20https%3A//bbb.org%2C%20http%3A//ccc.net%2C%20https%3A//ddd.gov%27%2C%0A%20%20dialogLeft%3A%20300%2C%0A%20%20dialogTop%3A%20300%2C%0A%20%20settingsLeft%3A%20300%2C%0A%20%20settingsTop%3A%20300%2C%0A%20%20toolbarButton%3A%20%27data%3Aimage/png%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABGUlEQVR42p2SsW7CMBCG7SkSz9Clb5KxA40yJLCYJTNL13aGJ+icBRbCkqSMSLDzEO3QN8iULu5/VS8ciS1FnGSdz+f/89lnrWBxHKdwhfJY27YqCAIOZ2VZ7jnQQrw3xqQ+SNM0X1VVXTBNJYQANooilWWZViMsz3Nb17UCQI8CUJ7nJHICqHxABuXTRoLLmPbSNTpA/5QxxuIO4DMC42FVkiTdvsEVXMLZ++cUbo7xgPGNsSuWjwcXRDvEK7hXmkNEMafWiN/6EO04+YPF1lqlcYaAPHMlPsAGzrC4e6grZPs0OZn/jvx1ow84QRxKcQ9y/jm+hLIbgwoAMBzzFUR+i/ziBnzvG3j/AXeBAGJt0AUvYMw/kPYLYh+03shM2k0AAAAASUVORK5CYII%3D%27%0A%7D%0A%0Afor%20%28let%20key%20in%20pref.defaults%29%20%7B%0A%20%20if%20%28pref.defaults.hasOwnProperty%28key%29%29%20%7B%0A%20%20%20%20let%20val%20%3D%20pref.defaults%5Bkey%5D%3B%0A%20%20%20%20switch%20%28typeof%20val%29%20%7B%0A%20%20%20%20%20%20case%20%27boolean%27%3A%0A%20%20%20%20%20%20%20%20pb.getDefaultBranch%28pref.root%29.setBoolPref%28key%2C%20val%29%3B%0A%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20case%20%27number%27%3A%0A%20%20%20%20%20%20%20%20pb.getDefaultBranch%28pref.root%29.setIntPref%28key%2C%20val%29%3B%0A%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20case%20%27string%27%3A%0A%20%20%20%20%20%20%20%20str.data%20%3D%20val%3B%0A%20%20%20%20%20%20%20%20pb.getDefaultBranch%28pref.root%29.setComplexValue%28%28key%29%2C%20Ci.nsISupportsString%2C%20str%29%3B%0A%7D%20%7D%20%7D%0A%0Afunction%20pref%28key%29%20%7B%0A%20%20let%20%7Bbranch%2C%20defaults%7D%20%3D%20pref%3B%0A%20%20if%20%28branch%20%3D%3D%20null%29%20branch%20%3D%20pb.getBranch%28pref.root%29%3B%0A%20%20switch%20%28typeof%20defaults%5Bkey%5D%29%20%7B%0A%20%20%20%20case%20%27boolean%27%3A%20return%20branch.getBoolPref%28key%29%3B%0A%20%20%20%20case%20%27number%27%3A%20return%20branch.getIntPref%28key%29%3B%0A%20%20%20%20case%20%27string%27%3A%20return%20branch.getComplexValue%28key%2C%20Ci.nsISupportsString%29.data%3B%0A%20%20%7D%0A%20%20return%20null%3B%0A%7D%0A%0Afunction%20getSS%28filepath%29%20%7B%20return%20ios.newURI%28%27data%3Atext/css%2C%27%20+%20filepath%2C%20null%2C%20null%29%20%7D%0A%0Afunction%20loadSheet%28filepath%29%20%7B%20sss.loadAndRegisterSheet%28getSS%28filepath%29%2C%20sss.AGENT_SHEET%29%20%7D%0A%0Afunction%20unloadSheet%28filepath%29%20%7B%0A%20%20let%20uri%20%3D%20getSS%28filepath%29%3B%0A%20%20if%20%28sss.sheetRegistered%28uri%2C%20sss.AGENT_SHEET%29%29%20sss.unregisterSheet%28uri%2C%20sss.AGENT_SHEET%29%3B%0A%7D%0A%0Afunction%20gCV%28aKey%2C%20aBranch%29%20%7B%20%0A%20%20return%20pb.getComplexValue%28%21aBranch%20%3F%20pref.root%20+%20aKey%20%3A%20aKey%2C%20Ci.nsISupportsString%29.data%3B%0A%7D%0A%0Afunction%20sCV%28aKey%2C%20aVal%2C%20aBranch%29%20%7B%0A%20%20str.data%20%3D%20aVal%3B%0A%20%20pb.setComplexValue%28%21aBranch%20%3F%20pref.root%20+%20aKey%20%3A%20aKey%2C%20Ci.nsISupportsString%2C%20str%29%3B%0A%7D%0A%0Afunction%20doRestart%28%29%20%7B%0A%20%20let%20cancelQuit%20%3D%20Cc%5B%27@mozilla.org/supports-PRBool%3B1%27%5D.createInstance%28Ci.nsISupportsPRBool%29%3B%0A%20%20os.notifyObservers%28cancelQuit%2C%20%27quit-application-requested%27%2C%20%27restart%27%29%3B%0A%20%20if%20%28cancelQuit.data%29%20return%3B%0A%20%20let%20appStartup%20%3D%20Cc%5B%27@mozilla.org/toolkit/app-startup%3B1%27%5D.getService%28Ci.nsIAppStartup%29%3B%0A%20%20appStartup.quit%28Ci.nsIAppStartup.eAttemptQuit%20%7C%20Ci.nsIAppStartup.eRestart%29%3B%0A%7D%0A%0Aif%20%28this.xCSS%20%26%26%20this.xCSS%20%21%3D%3D%20gCV%28%27css%27%29%29%20sCV%28%27css%27%2C%20this.xCSS%29%3B%0Aif%20%28this.xCSS2%20%26%26%20this.xCSS2%20%21%3D%3D%20gCV%28%27css2%27%29%29%20sCV%28%27css2%27%2C%20this.xCSS2%29%3B%0Aif%20%28this.xCSS3%20%26%26%20this.xCSS3%20%21%3D%3D%20gCV%28%27css3%27%29%29%20sCV%28%27css3%27%2C%20this.xCSS3%29%3B%0Aif%20%28this.xCSS4%20%26%26%20this.xCSS4%20%21%3D%3D%20gCV%28%27css4%27%29%29%20sCV%28%27css4%27%2C%20this.xCSS4%29%3B%0Aif%20%28this.xHTML%20%26%26%20this.xHTML%20%21%3D%3D%20gCV%28%27html%27%29%29%20sCV%28%27html%27%2C%20this.xHTML%29%3B%0A%0Apref%28%27css%27%29%20%3F%20CSS%20%3D%20encodeURIComponent%28gCV%28%27css%27%29%29%20%3A%20CSS%20%3D%20encodeURIComponent%28this.CSS%29%3B%0Apref%28%27css2%27%29%20%3F%20CSS2%20%3D%20encodeURIComponent%28gCV%28%27css2%27%29%29%20%3A%20CSS2%20%3D%20encodeURIComponent%28this.CSS2%29%3B%0Apref%28%27css3%27%29%20%3F%20CSS3%20%3D%20encodeURIComponent%28gCV%28%27css3%27%29%29%20%3A%20CSS3%20%3D%20encodeURIComponent%28this.CSS3%29%3B%0Apref%28%27css4%27%29%20%3F%20CSS4%20%3D%20encodeURIComponent%28gCV%28%27css4%27%29%29%20%3A%20CSS4%20%3D%20encodeURIComponent%28this.CSS4%29%3B%0Apref%28%27html%27%29%20%3F%20HTML%20%3D%20encodeURIComponent%28gCV%28%27html%27%29%29%20%3A%20HTML%20%3D%20encodeURIComponent%28this.HTML%29%3B%0A%0AloadSheet%28CSS%29%3B%0AloadSheet%28CSS2%29%3B%0AloadSheet%28CSS3%29%3B%0AloadSheet%28CSS4%29%3B%0AloadSheet%28HTML%29%3B%0A%0Avar%20gRoot%20%3D%20pb.getBranch%28pref.root%29%3B%0A%0Athis.image%20%3D%20pref%28%27toolbarButton%27%29%3B%0A%0Athis.onAccept%20%3D%20function%28%29%20%7B%0A%20%20let%20doc%20%3D%20wm%28%27link%3Asettings%27%29%2C%0A%20%20%20%20%20%20tb0%20%3D%20doc.document.getElementById%28%27urlList%27%29%2C%0A%20%20%20%20%20%20tb1%20%3D%20doc.document.getElementById%28%27bbcSites%27%29%2C%0A%20%20%20%20%20%20tb2%20%3D%20doc.document.getElementById%28%27htmlSites%27%29%2C%0A%20%20%20%20%20%20tb3%20%3D%20doc.document.getElementById%28%27defaultURL%27%29%0A%20%20if%20%28tb0.value%20%3D%3D%3D%20pref%28%27urlList%27%29%20%26%26%20tb1.value%20%3D%3D%3D%20pref%28%27bbcSites%27%29%20%26%26%20tb2.value%20%3D%3D%3D%20pref%28%27htmlSites%27%29%20%26%26%20tb3.value%20%3D%3D%3D%20pref%28%27defaultURL%27%29%29%20%7B%0A%20%20%20%20doc.close%28%29%3B%0A%20%20%20%20return%3B%0A%20%20%7D%0A%20%20if%20%28tb0.value%20%21%3D%3D%20pref%28%27urlList%27%29%29%20gRoot.setCharPref%28%27urlList%27%2C%20tb0.value%29%3B%0A%20%20if%20%28tb1.value%20%21%3D%3D%20pref%28%27bbcSites%27%29%29%20gRoot.setCharPref%28%27bbcSites%27%2C%20tb1.value%29%3B%0A%20%20if%20%28tb2.value%20%21%3D%3D%20pref%28%27htmlSites%27%29%29%20gRoot.setCharPref%28%27htmlSites%27%2C%20tb2.value%29%3B%0A%20%20if%20%28tb3.value%20%21%3D%3D%20pref%28%27defaultURL%27%29%29%20gRoot.setCharPref%28%27defaultURL%27%2C%20tb3.value%29%3B%0A%20%20doc.close%28%29%3B%0A%20%20doRestart%28%29%3B%0A%7D%0A%0Athis.onAddDomain%20%3D%20function%28e%29%20%7B%0A%20%20let%20doc%20%3D%20wm%28%22link%3Asettings%22%29%2C%0A%20%20%20%20%20%20tb%20%3D%20doc.document.getElementById%28%22addDomain%22%29%2C%0A%20%20%20%20%20%20tb1%20%3D%20doc.document.getElementById%28%22bbcSites%22%29%2C%0A%20%20%20%20%20%20tb2%20%3D%20doc.document.getElementById%28%22htmlSites%22%29%2C%0A%20%20%20%20%20%20btn%20%3D%20doc.document.getElementById%28%22accept%22%29%3B%0A%20%20if%20%28e.id%20%3D%3D%3D%20%22bbcButton%22%29%20%7B%0A%20%20%20%20if%20%28pref%28%22bbcSites%22%29%29%20tb1.value%20%3D%20tb1.value%20+%20%22%2C%20%22%20+%20tb.value%3B%0A%20%20%20%20else%20tb1.value%20%3D%20tb.value%3B%0A%20%20%7D%0A%20%20if%20%28e.id%20%3D%3D%3D%20%22htmlButton%22%29%20%7B%0A%20%20%20%20if%20%28pref%28%22htmlSites%22%29%29%20tb2.value%20%3D%20tb2.value%20+%20%22%2C%20%22%20+%20tb.value%3B%0A%20%20%20%20else%20tb2.value%20%3D%20tb.value%3B%0A%20%20%7D%0A%20%20btn.disabled%20%3D%20false%3B%0A%7D%0A%0Athis.onButton%20%3D%20function%28e%29%20%7B%0A%20%20let%20end%2C%20start%2C%20s1%2C%20s2%2C%20str%2C%20dialog%20%3D%20wm%28%27link%3Adialog%27%29%2C%0A%20%20%20%20%20%20win%20%3D%20content.document.domain%2C%0A%20%20%20%20%20%20tb%20%3D%20gBrowser.contentWindow.document.activeElement%2C%0A%20%20%20%20%20%20sel%20%3D%20tb.value.substring%28tb.selectionStart%2C%20tb.selectionEnd%29%2C%0A%20%20%20%20%20%20bbc%20%3D%20pref%28%27bbcSites%27%29.split%28%27%2C%27%29%2C%0A%20%20%20%20%20%20html%20%3D%20pref%28%27htmlSites%27%29.split%28%27%2C%27%29%2C%0A%20%20%20%20%20%20bbcStr%20%3D%20%27%5Burl%3D%27%20+%20dialog.document.getElementById%28%27linkURL%27%29.value%20+%20%27%5D%27%20+%20sel%20+%20%27%5B/url%5D%27%2C%0A%20%20%20%20%20%20htmlStr%20%3D%20%27%3Ca%20href%3D%22%27%20+%20dialog.document.getElementById%28%27linkURL%27%29.value%20+%20%27%22%3E%27%20+%20sel%20+%20%27%3C/a%3E%27%2C%0A%20%20%20%20%20%20ret%20%3D%20%28bbc%20+%20%22%2C%22%20+%20html%29.replace%28/%5Cs+/g%2C%20%22%22%29.replace%28/%5E%2C+%7C%2C+%24/%2C%20%22%22%29.replace%28/%2C+/g%2C%20%22%2C%22%29%3B%0A%20%20if%20%28%21ret.match%28win%29%29%20%7B%0A%20%20%20%20let%20msg%20%3D%20%27Need%20to%20add%20domain%3A%20%27%20+%20%20win%20+%20%27%5CnOpen%20Options%20to%20insert%3F%27%3B%0A%20%20%20%20if%20%28confirm%28msg%29%29%20self.onSettings%28false%29%3B%0A%20%20%20%20return%3B%0A%20%20%7D%0A%20%20s1%20%3D%20tb.value.substr%280%2C%20tb.selectionStart%29%3B%0A%20%20s2%20%3D%20tb.value.substr%28tb.selectionEnd%29%3B%0A%20%20if%20%28bbc%20%21%3D%3D%20%27%27%29%20for%20%28let%20i%20%3D%200%3B%20i%20%3C%20bbc.length%3B%20i++%29%20if%20%28win.match%28bbc%5Bi%5D.trim%28%29%29%29%20%7B%0A%20%20%20%20str%20%3D%20bbcStr%3B%0A%20%20%20%20start%20%3D%20s1.length%20+%20str.length%20-%20sel.length%20-%206%3B%0A%20%20%7D%0A%20%20if%20%28html%20%21%3D%3D%20%27%27%29%20for%20%28let%20j%20%3D%200%3B%20j%20%3C%20html.length%3B%20j++%29%20if%20%28win.match%28html%5Bj%5D.trim%28%29%29%29%20%7B%0A%20%20%20%20str%20%3D%20%20htmlStr%3B%0A%20%20%20%20start%20%3D%20s1.length%20+%20str.length%20-%20sel.length%20-%204%3B%0A%20%20%7D%0A%20%20if%20%28e.id%20%3D%3D%3D%20%27undoBtn%27%29%20%7B%20tb.value%20%3D%20tb.value.replace%28str%2C%20sel%29%3B%20return%20%7D%0A%20%20tb.value%20%3D%20s1%20+%20str%20+%20s2%3B%0A%20%20end%20%3D%20start%20+%20sel.length%3B%0A%20%20tb.setSelectionRange%28start%2C%20end%29%3B%0A%7D%0A%0Athis.onChange%20%3D%20function%28e%29%20%7B%0A%20%20let%20doc%20%3D%20wm%28%27link%3Asettings%27%29%3B%0A%20%20e.value%20%3D%20e.value.replace%28/%5Cs+/g%2C%20%27%27%29.replace%28/%5E%2C+%7C%2C+%24/%2C%20%27%27%29.replace%28/%2C+/g%2C%20%27%2C%20%27%29.trim%28%29%3B%0A%20%20doc.document.getElementById%28%27accept%27%29.disabled%20%3D%20false%3B%0A%7D%0A%0Athis.onclick%20%3D%20function%28e%29%20%7B%0A%20%20if%20%28e.button%20%3D%3D%3D%200%29%20%7B%0A%20%20%20%20if%20%28wm%28%27link%3Adialog%27%29%29%20%7B%20wm%28%27link%3Adialog%27%29.focus%28%29%3B%20return%3B%20%7D%0A%20%20%20%20let%20data%20%3D%20%27%3C%3Fxml%20version%3D%221.0%22%3F%3E%3C%3Fxml-stylesheet%20href%3D%22chrome%3A//global/skin/%22%20type%3D%22text/css%22%3F%3E%5C%0A%20%20%20%20%20%20%3Cwindow%20xmlns%3D%22%27%20+%20xulns%20+%20%27%22%20id%3D%22linkDialog%22%20title%3D%22%27%20+%20this.label%20+%20%27%22%20windowtype%3D%22link%3Adialog%22%20%5C%0A%20%20%20%20%20%20%20%20onload%3D%22self.onDialogLoad%28this%29%22%20onclose%3D%22self.onDialogClose%28this%29%22%20persist%3D%22width%20height%22%3E%5C%0A%20%20%20%20%20%20%20%20%3Ckeyset%3E%3Ckey%20keycode%3D%22VK_ESCAPE%22%20oncommand%3D%22close%28%29%22/%3E%3C/keyset%3E%5C%0A%20%20%20%20%20%20%20%20%3Chbox%20id%3D%22hbox1%22%20class%3D%22hbox%22%20align%3D%22center%22%3E%5C%0A%20%20%20%20%20%20%20%20%20%20%3Cimage%20id%3D%22linkImage%22%20class%3D%22image%22%20src%3D%22%27%20+%20this.image%20+%20%27%22/%3E%5C%0A%20%20%20%20%20%20%20%20%20%20%3Cvbox%20id%3D%22vbox1%22%20class%3D%22vbox%22%20flex%3D%221%22%3E%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Clabel%20id%3D%22linkLabel%22%20class%3D%22label%22%20value%3D%22What%20link%20do%20you%20want%20to%20use%3F%22/%3E%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cmenulist%20id%3D%22linkURL%22%20class%3D%22menulist%22%20value%3D%22%27%20+%20pref%28%27defaultURL%27%29%20+%20%27%22%20editable%3D%22true%22%3E%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cmenupopup%20id%3D%22urlPopup%22%20class%3D%22menupopup%22/%3E%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/menulist%3E%5C%0A%20%20%20%20%20%20%20%20%20%20%3C/vbox%3E%5C%0A%20%20%20%20%20%20%20%20%3C/hbox%3E%5C%0A%20%20%20%20%20%20%20%20%3Chbox%20id%3D%22hbox2%22%20class%3D%22hbox%22%20align%3D%22center%22%20pack%3D%22end%22%3E%5C%0A%20%20%20%20%20%20%20%20%20%20%3Cbutton%20id%3D%22undoBtn%22%20class%3D%22button%22%20label%3D%22Undo%22%20oncommand%3D%22self.onButton%28this%29%22/%3E%5C%0A%20%20%20%20%20%20%20%20%20%20%3Cbutton%20id%3D%22settingsBtn%22%20class%3D%22button%22%20label%3D%22Settings%22%20oncommand%3D%22self.onSettings%28true%29%22/%3E%5C%0A%20%20%20%20%20%20%20%20%20%20%3Cspacer%20id%3D%22spacer1%22%20class%3D%22spacer%22%20flex%3D%221%22/%3E%5C%0A%20%20%20%20%20%20%20%20%20%20%3Cbutton%20id%3D%22okBtn%22%20class%3D%22button%22%20label%3D%22Insert%22%20oncommand%3D%22self.onButton%28this%29%22/%3E%5C%0A%20%20%20%20%20%20%20%20%20%20%3Cbutton%20id%3D%22cancelBtn%22%20class%3D%22button%22%20label%3D%22Cancel%22%20oncommand%3D%22close%28%29%22/%3E%5C%0A%20%20%20%20%20%20%20%20%3C/hbox%3E%5C%0A%20%20%20%20%20%20%3C/window%3E%27%3B%0A%20%20%20%20data%20%3D%20data.replace%28/self/g%2C%20%27opener.document.getElementById%28%26quot%3B%27%20+%20self.id%20+%20%27%26quot%3B%29%27%29%3B%0A%20%20%20%20let%20url%20%3D%20%27data%3Aapplication/vnd.mozilla.xul+xml%3Btext/plain%2C%27%20+%20encodeURIComponent%28data%29%3B%0A%20%20%20%20window.openDialog%28url%2C%20%27%27%2C%20%27chrome%2Cdialog%3Dno%2Cresizable%2CalwaysRaised%27%29%3B%0A%20%20%7D%0A%20%20if%20%28e.button%20%3D%3D%3D%201%29%20self.onSettings%28true%29%3B%0A%7D%0A%0Athis.onDestroy%20%3D%20function%28reason%29%20%7B%0A%20%20if%20%28reason%20%3D%3D%3D%20%27delete%27%29%20%7B%0A%20%20%20%20unloadSheet%28CSS%29%3B%0A%20%20%20%20unloadSheet%28CSS2%29%3B%0A%20%20%20%20unloadSheet%28CSS3%29%3B%0A%20%20%20%20unloadSheet%28CSS4%29%3B%0A%20%20%20%20unloadSheet%28HTML%29%3B%0A%7D%20%7D%0A%0Athis.onDialogClose%20%3D%20function%28e%29%20%7B%0A%20%20let%20doc%20%3D%20wm%28%27link%3Adialog%27%29%3B%0A%20%20gRoot.setIntPref%28%27dialogLeft%27%2C%20doc.screenX%29%3B%0A%20%20gRoot.setIntPref%28%27dialogTop%27%2C%20doc.screenY%29%3B%0A%20%20doc.close%28%29%3B%0A%7D%0A%0Athis.onDialogLoad%20%3D%20function%28e%29%20%7B%0A%20%20let%20doc%20%3D%20wm%28%27link%3Adialog%27%29%2C%0A%20%20%20%20%20%20pop%20%3D%20e.document.getElementById%28%27urlPopup%27%29%2C%0A%20%20%20%20%20%20url%20%3D%20pref%28%27urlList%27%29.split%28%27%2C%27%29%3B%0A%20%20for%20%28let%20i%20in%20url%29%20%7B%0A%20%20%20%20let%20mi%20%3D%20document.createElement%28%27menuitem%27%29%3B%0A%20%20%20%20mi.setAttribute%28%27label%27%2C%20url%5Bi%5D.trim%28%29%29%3B%0A%20%20%20%20mi.setAttribute%28%27value%27%2C%20url%5Bi%5D.trim%28%29%29%3B%0A%20%20%20%20pop.appendChild%28mi%29%3B%0A%20%20%7D%0A%20%20doc.moveTo%28pref%28%27dialogLeft%27%29%2C%20pref%28%27dialogTop%27%29%29%3B%0A%7D%0A%0Athis.onIcon%20%3D%20function%28e%29%20%7B%0A%20%20fp.init%28window%2C%20null%2C%20fp.modeOpen%29%3B%0A%20%20fp.appendFilters%28fp.filterImages%29%3B%0A%20%20if%20%28fp.show%28%29%20%21%3D%20fp.returnCancel%29%20%7B%0A%20%20%20%20var%20url%20%3D%20fp.fileURL.spec%3B%0A%20%20%20%20gRoot.setCharPref%28e.id%2C%20url%29%3B%0A%20%20%20%20e.nextSibling.src%20%3D%20url%3B%0A%20%20%20%20wm%28%27navigator%3Abrowser%27%29.document.getElementById%28this.id%29.image%20%3D%20pref%28%27toolbarButton%27%29%3B%0A%7D%20%7D%0A%0Athis.onSettings%20%3D%20function%28bool%2C%20e%29%20%7B%0A%20%20if%20%28wm%28%27link%3Asettings%27%29%29%20%7B%20wm%28%27link%3Asettings%27%29.focus%28%29%3B%20return%3B%20%7D%0A%20%20let%20aTitle%20%3D%20this.label%20+%20%27%20Settings%27%3B%0A%20%20let%20data%20%3D%20%27%3C%3Fxml%20version%3D%221.0%22%3F%3E%5C%0A%20%20%20%20%3C%3Fxml-stylesheet%20href%3D%22chrome%3A//global/skin/%22%20type%3D%22text/css%22%3F%3E%5C%0A%20%20%20%20%3Cwindow%20id%3D%22linkSettings%22%20windowtype%3D%22link%3Asettings%22%20xmlns%3D%22%27%20+%20xulns%20+%20%27%22%20title%3D%22%27%20+%20aTitle%20+%20%27%22%20onload%3D%22self.onSettingsLoad%28this%29%22%20onclose%3D%22self.onSettingsClose%28this%29%22%20persist%3D%22width%20height%22%3E%5C%0A%20%20%20%20%20%20%3Ckeyset%3E%3Ckey%20keycode%3D%22VK_ESCAPE%22%20oncommand%3D%22close%28%29%22/%3E%3C/keyset%3E%5C%0A%20%20%20%20%20%20%3Chbox%20id%3D%22hbox1%22%20class%3D%22hbox%22%20align%3D%22center%22%20hidden%3D%22%27+%20bool%20+%27%22%3E%5C%0A%20%20%20%20%20%20%20%20%3Clabel%20id%3D%22addDomainLabel%22%20class%3D%22label%22%20value%3D%22Add%20Domain%22/%3E%5C%0A%20%20%20%20%20%20%20%20%3Ctextbox%20id%3D%22addDomain%22%20class%3D%22textbox%22%20flex%3D%221%22/%3E%5C%0A%20%20%20%20%20%20%20%20%3Clabel%20id%3D%22addDomainToLabel%22%20class%3D%22label%22%20value%3D%22to%22/%3E%5C%0A%20%20%20%20%20%20%20%20%3Cbutton%20id%3D%22bbcButton%22%20class%3D%22button%22%20label%3D%22BBC%22%20oncommand%3D%22self.onAddDomain%28this%29%22/%3E%5C%0A%20%20%20%20%20%20%20%20%3Cbutton%20id%3D%22htmlButton%22%20class%3D%22button%22%20label%3D%22HTML%22%20oncommand%3D%22self.onAddDomain%28this%29%22/%3E%5C%0A%20%20%20%20%20%20%3C/hbox%3E%5C%0A%20%20%20%20%20%20%3Cvbox%20id%3D%22vbox1%22%20class%3D%22vbox%22%3E%5C%0A%20%20%20%20%20%20%20%20%3Clabel%20id%3D%22defaultURLLabel%22%20class%3D%22label%22%20value%3D%22Menulist%20Default%20URL%20%28Restarts%20on%20list%20change%20on%20Accept%29%22%20hidden%3D%22%27+%20%21bool%20+%27%22/%3E%5C%0A%20%20%20%20%20%20%20%20%3Ctextbox%20id%3D%22defaultURL%22%20class%3D%22textbox%22%20value%3D%22%27%20+%20pref%28%22defaultURL%22%29%20+%20%27%22%20oninput%3D%22self.onTextbox%28this%29%22%20onchange%3D%22self.onChange%28this%29%22%20hidden%3D%22%27+%20%21bool%20+%27%22/%3E%5C%0A%20%20%20%20%20%20%20%20%3Clabel%20id%3D%22urlListLabel%22%20class%3D%22label%22%20value%3D%22Menulist%20URL%20List%20%28Restarts%20on%20list%20change%20on%20Accept%29%22%20hidden%3D%22%27+%20%21bool%20+%27%22/%3E%5C%0A%20%20%20%20%20%20%20%20%3Ctextbox%20id%3D%22urlList%22%20class%3D%22textbox%22%20value%3D%22%27%20+%20pref%28%22urlList%22%29%20+%20%27%22%20multiline%3D%22true%22%20rows%3D%224%22%20oninput%3D%22self.onTextbox%28this%29%22%20onchange%3D%22self.onChange%28this%29%22%20hidden%3D%22%27+%20%21bool%20+%27%22/%3E%5C%0A%20%20%20%20%20%20%20%20%3Clabel%20id%3D%22bbcSitesLabel%22%20class%3D%22label%22%20value%3D%22%5BBBCode%5D%20Sites%20%28Restarts%20on%20list%20change%20on%20Accept%29%22/%3E%5C%0A%20%20%20%20%20%20%20%20%3Ctextbox%20id%3D%22bbcSites%22%20class%3D%22textbox%22%20value%3D%22%27%20+%20pref%28%22bbcSites%22%29%20+%20%27%22%20multiline%3D%22true%22%20rows%3D%223%22%20oninput%3D%22self.onTextbox%28this%29%22%20onchange%3D%22self.onChange%28this%29%22/%3E%5C%0A%20%20%20%20%20%20%20%20%3Clabel%20id%3D%22htmlSitesLabel%22%20class%3D%22label%22%20value%3D%22%26lt%3BHTML%26gt%3B%20Sites%20%28Restarts%20on%20list%20change%20on%20Accept%29%22/%3E%5C%0A%20%20%20%20%20%20%20%20%3Ctextbox%20id%3D%22htmlSites%22%20class%3D%22textbox%22%20value%3D%22%27%20+%20pref%28%22htmlSites%22%29%20+%20%27%22%20multiline%3D%22true%22%20rows%3D%222%22%20oninput%3D%22self.onTextbox%28this%29%22%20onchange%3D%22self.onChange%28this%29%22/%3E%5C%0A%20%20%20%20%20%20%3C/vbox%3E%5C%0A%20%20%20%20%20%20%3Chbox%20id%3D%22hbox2%22%20class%3D%22hbox%22%20align%3D%22center%22%3E%5C%0A%20%20%20%20%20%20%20%20%3Cbutton%20id%3D%22toolbarButton%22%20class%3D%22button%22%20label%3D%22Change%20Toolbarbutton%22%20tooltiptext%3D%22%22%20oncommand%3D%22self.onIcon%28this%29%22/%3E%5C%0A%20%20%20%20%20%20%20%20%3Cimage%20id%3D%22buttonIcon%22%20class%3D%22image%22%20src%3D%22%27%20+%20pref%28%22toolbarButton%22%29%20+%20%27%22/%3E%5C%0A%20%20%20%20%20%20%20%20%3Cspacer%20id%3D%22spacer1%22%20class%3D%22spacer%22%20flex%3D%221%22/%3E%5C%0A%20%20%20%20%20%20%20%20%3Cbutton%20id%3D%22accept%22%20class%3D%22button%22%20label%3D%22Accept%22%20oncommand%3D%22self.onAccept%28%29%22%20disabled%3D%22true%22/%3E%5C%0A%20%20%20%20%20%20%20%20%3Cbutton%20id%3D%22cancel%22%20class%3D%22button%22%20label%3D%22Cancel%22%20oncommand%3D%22self.onSettingsClose%28%29%22/%3E%5C%0A%20%20%20%20%20%20%3C/hbox%3E%5C%0A%20%20%20%20%3C/window%3E%27%3B%0A%20%20data%20%3D%20data.replace%28/self/g%2C%20%27opener.document.getElementById%28%26quot%3B%27%20+%20self.id%20+%20%27%26quot%3B%29%27%29%3B%0A%20%20let%20url%20%3D%20%27data%3Aapplication/vnd.mozilla.xul+xml%3Btext/plain%2C%27%20+%20encodeURIComponent%28data%29%3B%0A%20%20dialog%20%3D%20window.openDialog%28url%2C%20%27%27%2C%20%27chrome%2Cdialog%3Dno%2Cresizable%2CalwaysRaised%27%29%3B%0A%7D%0A%0Athis.onSettingsClose%20%3D%20function%28e%29%20%7B%0A%20%20let%20doc%20%3D%20wm%28%27link%3Asettings%27%29%3B%0A%20%20gRoot.setIntPref%28%27settingsLeft%27%2C%20doc.screenX%29%3B%0A%20%20gRoot.setIntPref%28%27settingsTop%27%2C%20doc.screenY%29%3B%0A%20%20doc.close%28%29%3B%0A%7D%0A%0Athis.onSettingsLoad%20%3D%20function%28e%29%20%7B%0A%20%20let%20doc%20%3D%20wm%28%27link%3Asettings%27%29%2C%0A%20%20%20%20%20%20win%20%3D%20content.document.domain%2C%0A%20%20%20%20%20%20aDom%20%3D%20doc.document.getElementById%28%22addDomain%22%29%2C%0A%20%20%20%20%20%20bBtn%20%3D%20doc.document.getElementById%28%22bbcButton%22%29%2C%20hBtn%20%3D%20doc.document.getElementById%28%22htmlButton%22%29%2C%0A%20%20%20%20%20%20bSite%20%3D%20doc.document.getElementById%28%22bbcSites%22%29%2C%20hSite%20%3D%20doc.document.getElementById%28%22htmlSites%22%29%2C%0A%20%20%20%20%20%20bLen%20%3D%20bSite.value.length%2C%20hLen%20%3D%20hSite.value.length%3B%0A%20%20doc.moveTo%28pref%28%27settingsLeft%27%29%2C%20pref%28%27settingsTop%27%29%29%3B%0A%20%20aDom.value%20%3D%20win%3B%0A%20%20bBtn.onmouseover%20%3D%20function%28%29%20%7B%20bSite.focus%28%29%3B%20bSite.setSelectionRange%28bLen%2C%20bLen%29%20%7D%0A%20%20bBtn.onmouseout%20%3D%20function%28%29%20%7B%20bSite.blur%28%29%20%7D%0A%20%20hBtn.onmouseover%20%3D%20function%28%29%20%7B%20hSite.focus%28%29%3B%20hSite.setSelectionRange%28hLen%2C%20hLen%29%20%7D%0A%20%20hBtn.onmouseout%20%3D%20function%28%29%20%7B%20hSite.blur%28%29%20%7D%0A%20%20mBtn.onmouseover%20%3D%20function%28%29%20%7B%20mSite.focus%28%29%3B%20mSite.setSelectionRange%28mLen%2C%20mLen%29%20%7D%0A%20%20mBtn.onmouseout%20%3D%20function%28%29%20%7B%20mSite.blur%28%29%20%7D%0A%7D%0A%0Athis.onTextbox%20%3D%20function%28e%29%20%7B%0A%20%20let%20doc%20%3D%20wm%28%27link%3Asettings%27%29%3B%0A%20%20doc.document.getElementById%28%27accept%27%29.disabled%20%3D%20false%3B%0A%7D%0A%5D%5D%3E%3C/initcode%3E%0A%20%20%3Ccode%3E%3C%21%5BCDATA%5B/*CODE*/%5D%5D%3E%3C/code%3E%0A%20%20%3Caccelkey%3E%3C%21%5BCDATA%5B%5D%5D%3E%3C/accelkey%3E%0A%20%20%3CCSS%3E%3C%21%5BCDATA%5B%23linkDialog%20%7B%0A%20%20padding%3A%204px%20%21important%3B%0A%7D%0A%0A%23linkDialog%20.image%20%7B%0A%20%20margin%3A%208px%2016px%200%208px%20%21important%3B%0A%20%20max-height%3A%2032px%20%21important%3B%0A%20%20max-width%3A%2032px%20%21important%3B%0A%7D%0A%0A%23linkDialog%20.label%20%7B%0A%20%20font-weight%3A%20bold%20%21important%3B%0A%20%20margin%3A%200%200%206px%200%20%21important%3B%0A%7D%0A%0A%23linkDialog%20.menulist%20%7B%0A%20%20margin%3A%200%206px%200%200%20%21important%3B%0A%20%20padding%3A%200%200%200%202px%20%21important%3B%0A%7D%0A%0A%23linkDialog%20.menupopup%20%7B%0A%20%20-moz-appearance%3A%20none%20%21important%3B%0A%7D%0A%0A%23linkDialog%20menuitem%20%7B%0A%20%20-moz-appearance%3A%20none%20%21important%3B%0A%7D%0A%0A%23linkDialog%20menuitem%5B_moz-menuactive%5D%20%7B%0A%20%20background%3A%20%23444%20%21important%3B%0A%20%20color%3A%20%23FFF%20%21important%3B%0A%7D%0A%0A%23linkDialog%20%23hbox2%20%7B%0A%20%20margin%3A%206px%200%200%200%20%21important%3B%0A%7D%0A%0A%23linkDialog%20.button%2C%0A%23linkDialog%20.button%5Bdisabled%5D%20%7B%0A%20%20-moz-appearance%3A%20none%20%21important%3B%0A%20%20border%3A%201px%20solid%20%23FFF%20%21important%3B%0A%20%20border-radius%3A%204px%20%21important%3B%20%0A%20%20box-shadow%3A%200%201px%202px%20rgba%280%2C%200%2C%200%2C%200.3%29%20inset%20%21important%3B%0A%20%20color%3A%20%23000%20%21important%3B%0A%20%20margin%3A%200%20%21important%3B%0A%20%20text-shadow%3A%20none%20%21important%3B%0A%7D%0A%0A%23linkDialog%20.button%20%7B%0A%20%20background%3A%20linear-gradient%28%23FFF%2C%20%23CCC%29%20%21important%3B%0A%20%20height%3A%2028px%20%21important%3B%0A%20%20min-width%3A%2032px%20%21important%3B%0A%20%20padding%3A%202px%204px%200%204px%20%21important%3B%0A%7D%0A%0A%23linkDialog%20.button%5Bdisabled%5D%20%7B%0A%20%20opacity%3A%20.4%20%21important%3B%0A%7D%0A%0A%23linkDialog%20.button%3Anot%28%5Bdisabled%5D%29%3Ahover%20%7B%0A%20%20background%3A%20%23FFF%20%21important%3B%0A%7D%5D%5D%3E%3C/CSS%3E%0A%20%20%3CxCSS%3E%3C%21%5BCDATA%5B%5D%5D%3E%3C/xCSS%3E%0A%20%20%3CCSS2%3E%3C%21%5BCDATA%5B%23linkSettings%20%7B%0A%20%20padding%3A%202px%206px%20%21important%3B%0A%7D%0A%0A%23linkSettings%20.label%20%7B%0A%20%20font-weight%3A%20bold%20%21important%3B%0A%20%20padding%3A%200%20%21important%3B%0A%7D%0A%0A%23linkSettings%20%23vbox1%20.label%20%7B%0A%20%20margin%3A%208px%200%200%200%20%21important%3B%0A%7D%0A%0A%23linkSettings%20.textbox%20%7B%0A%20%20margin%3A%200%20%21important%3B%0A%20%20padding%3A%203px%204px%20%21important%3B%0A%7D%0A%0A%23linkSettings%20.hbox%20%7B%0A%20%20margin%3A%206px%200%204px%200%20%21important%3B%0A%20%20padding%3A%200%20%21important%3B%0A%7D%0A%0A%23linkSettings%20.image%20%7B%0A%20%20margin%3A%200%200%200%206px%20%21important%3B%0A%7D%0A%0A%23linkSettings%20.button%2C%0A%23linkSettings%20.button%5Bdisabled%5D%2C%0A%23linkSettings%20.textbox%20%7B%0A%20%20-moz-appearance%3A%20none%20%21important%3B%0A%20%20border%3A%201px%20solid%20%23FFF%20%21important%3B%0A%20%20border-radius%3A%204px%20%21important%3B%20%0A%20%20box-shadow%3A%200%201px%202px%20rgba%280%2C%200%2C%200%2C%200.3%29%20inset%20%21important%3B%0A%20%20color%3A%20%23000%20%21important%3B%0A%20%20margin%3A%200%20%21important%3B%0A%20%20text-shadow%3A%20none%20%21important%3B%0A%7D%0A%0A%23linkSettings%20.button%20%7B%0A%20%20background%3A%20linear-gradient%28%23FFF%2C%20%23CCC%29%20%21important%3B%0A%20%20height%3A%2028px%20%21important%3B%0A%20%20min-width%3A%2032px%20%21important%3B%0A%20%20padding%3A%202px%204px%200%204px%20%21important%3B%0A%7D%0A%0A%23linkSettings%20.button%5Bdisabled%5D%20%7B%0A%20%20opacity%3A%20.4%20%21important%3B%0A%7D%0A%0A%23linkSettings%20.textbox%20%7B%0A%20%20background%3A%20%23E6E6E6%20%21important%3B%0A%7D%0A%0A%23linkSettings%20.button%3Anot%28%5Bdisabled%5D%29%3Ahover%2C%0A%23linkSettings%20.textbox%3Ahover%2C%0A%23linkSettings%20.textbox%5Bfocused%5D%20%7B%0A%20%20background%3A%20%23FFF%20%21important%3B%0A%7D%5D%5D%3E%3C/CSS2%3E%0A%20%20%3CxCSS2%3E%3C%21%5BCDATA%5B%5D%5D%3E%3C/xCSS2%3E%0A%20%20%3CCSS3%3E%3C%21%5BCDATA%5B%5D%5D%3E%3C/CSS3%3E%0A%20%20%3CxCSS3%3E%3C%21%5BCDATA%5B%5D%5D%3E%3C/xCSS3%3E%0A%20%20%3CCSS4%3E%3C%21%5BCDATA%5B%5D%5D%3E%3C/CSS4%3E%0A%20%20%3CxCSS4%3E%3C%21%5BCDATA%5B%5D%5D%3E%3C/xCSS4%3E%0A%20%20%3CHTML%3E%3C%21%5BCDATA%5B%5D%5D%3E%3C/HTML%3E%0A%20%20%3CxHTML%3E%3C%21%5BCDATA%5B%5D%5D%3E%3C/xHTML%3E%0A%20%20%3Cnotes%3E%3C%21%5BCDATA%5B%5D%5D%3E%3C/notes%3E%0A%20%20%3Cattributes/%3E%0A%3C/custombutton%3E
