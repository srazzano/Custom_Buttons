custombucustombutton://%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%3F%3E%0D%0A%3Ccustombutton%20xmlns%3Acb%3D%22http%3A//xsms.nm.ru/custombuttons/%22%3E%0A%20%20%3Cname%3EUser%20Agent%20Switcher%3C/name%3E%0A%20%20%3Cimage%3E%3C%21%5BCDATA%5Bfile%3A///C%3A/Users/srazz/Downloads/Images32/profile.png%5D%5D%3E%3C/image%3E%0A%20%20%3Cmode%3E0%3C/mode%3E%0A%20%20%3Cinitcode%3E%3C%21%5BCDATA%5B%22use%20strict%22%3B%0A%0Aconst%20removePrefs%20%3D%20false%2C%20//%20Remove%20all%20aRoot%20prefs%20from%20about%3Aconfig%20on%20button%20deletion%0A%20%20%20%20%20%20resetValues%20%3D%20false%2C%20//%20Reset%20all%20aRoot%20sites%20to%20default%20values%20on%20button%20deletion%0A%20%20%20%20%20%20aRoot%20%3D%20%22custombuttons.useragent.override.%22%2C%0A%20%20%20%20%20%20aUser%20%3D%20%22general.useragent.override.%22%2C%0A%20%20%20%20%20%20as%20%3D%20Cc%5B%22@mozilla.org/alerts-service%3B1%22%5D.getService%28Ci.nsIAlertsService%29.showAlertNotification%2C%0A%20%20%20%20%20%20ios%20%3D%20Cc%5B%22@mozilla.org/network/io-service%3B1%22%5D.getService%28Ci.nsIIOService%29%2C%0A%20%20%20%20%20%20pb%20%3D%20Cc%5B%22@mozilla.org/preferences-service%3B1%22%5D.getService%28Ci.nsIPrefService%29.QueryInterface%28Ci.nsIPrefBranch%29%2C%0A%20%20%20%20%20%20ss%20%3D%20Cc%5B%22@mozilla.org/supports-string%3B1%22%5D.createInstance%28Ci.nsISupportsString%29%2C%0A%20%20%20%20%20%20sss%20%3D%20Cc%5B%22@mozilla.org/content/style-sheet-service%3B1%22%5D.getService%28Ci.nsIStyleSheetService%29%2C%0A%20%20%20%20%20%20wm%20%3D%20Cc%5B%22@mozilla.org/appshell/window-mediator%3B1%22%5D.getService%28Ci.nsIWindowMediator%29.getMostRecentWindow%2C%0A%20%20%20%20%20%20gRoot%20%3D%20pb.getBranch%28aRoot%29%2C%0A%20%20%20%20%20%20gUser%20%3D%20pb.getBranch%28aUser%29%2C%0A%20%20%20%20%20%20hTab%20%3D%20encodeURIComponent%28this.Help%29%3B%0A%0Apref.defaults%20%3D%20%7B%0A%20%20addCurrent%3A%20%22Add/Remove%20Current%22%2C%0A%20%20addCurrentTip%3A%20%22Add/Remove%20current%20site%20domain%20to/from%20list%22%2C%0A%20%20alertMsg%3A%20%22is%20not%20a%20domain%22%2C%0A%20%20buttonIcon%3A%20%22data%3Aimage/png%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAADLElEQVR42n2UXUgUURTH/3dmP6ZcbTUzw1UJlLZk+zDLpezJIsG+XBZRApHYBwuKIkIyCCUxeuihpKdkwSB8MSEikKIIFoIihELcLUXT3R0tt9xVWsf57O4oS+NKF+7M5dz//Oaec+45xO123yaEXMDGg4GimEAAjT4Iw4gbiTRN85OamppZh8NRuH4zmUwiEAgYbFVVB7F1a34GKBKJzJH6+vpgeXm5c/1mf3+//jabzZAkKW13uVyorKw0aMfHx0Okubk56PF4DCCe59HZ2amv21o8KC6wYS6WgCDKKNlZhu2lFQbQ0NBQiLS1tQW9Xq8BFI1EcPXaNX09/fYBGIboa0lWEF3QMIdiA2hwcDBE2tvbg3V1dQaQLMtobGxE15VGtJ6pBsswul2k9rlFCmLKDKDh4eEQ6enpyThRajy4exPXm9zI3ZIFs4kFzSxESUYsSbPkOJ55ot7e3qDP53NaLBbD5ofAa2z+9R4FuTZYrWaYWAbLggSR24GiQ01pnSiK6OvrCxG/3x+kAXdyHJeR1kD/DeRmW8FZzLCaTUiuiCg7eQOs1ZbWCIKAgYGB/4NePrqEbfYsHWKhU1Q07PN2GzRpUIZrf8LARB+QGMVoshb89zGoGkGePQelFW7kYQrmvZepkBhd+zfYXHwExfIEsBynOiqUeUhHHkJYCGMiGsOB6lrg2QlorI0GPoaZ/f7M9BNFhDvxHOoCT9OiAoqk/5Xk50I5/QR7u8cw3lWB5fv7oYa/6IAfu04gsqdjNf2pC3n61Cln0Yd7yN+UA00WKIeCZBFSLAw1EYb9eAsaRi7iTUc2ZjqOQv0T10EMC3zzPsWLN4HVEmk4d9bpencHxLadgkQdJM6HIdGZ8jCrpBQHph4jepPH5L3WdKBTe4GaW/gYnAzpRVta7HCeX/oMVZaw8nsewjxPgXL6A3qF4Nn2CkOxk7SraGm7xQS8OOzDVHQ2tNZGigpzpr/i2PwkpKVFbDR+llShYOYTUmW3aLNjirNjdvch+hd2tY2kG5umEdqgUoEmjCixOUtxjqgqUViTqrCsusJtkmUrJ1N/tFS5rPmmHy/V2P4C6DluwuG4xBYAAAAASUVORK5CYII%3D%22%2C%0A%20%20buttonIconLabel%3A%20%22Button%20icon%22%2C%0A%20%20buttonIconTip%3A%20%22Change%20toolbarbutton-icon%20via%20filepicker%22%2C%0A%20%20dialogLeft%3A%20300%2C%0A%20%20dialogTop%3A%20300%2C%0A%20%20doneButtonLabel%3A%20%22Done%22%2C%0A%20%20doneButtonTip%3A%20%22Set%20useragent%20override%20strings%20for%20site%20domains%20in%20lists%22%2C%0A%20%20editorButtonLabel%3A%20%22Editor%22%2C%0A%20%20editorButtonTip%3A%20%22Opens%20editor%20to%20edit%20useragent%20strings%22%2C%0A%20%20editorLabel1%3A%20%22useragent%20string%201%22%2C%0A%20%20editorLabel2%3A%20%22useragent%20string%202%22%2C%0A%20%20editorLabel3%3A%20%22useragent%20string%203%22%2C%0A%20%20editorLeft%3A%20300%2C%0A%20%20editorTop%3A%20300%2C%0A%20%20infoLabel%3A%20%22Sites%22%2C%0A%20%20infoMsg%3A%20%22All%20sites%20domains%20set%20to%20default%20values%22%2C%0A%20%20placeHolder%3A%20%22Site%20Domains%20to%20use%20above%20useragent%20string%22%2C%0A%20%20prefsButtonLabel%3A%20%22about%3Aconfig%22%2C%0A%20%20prefsButtonTip%3A%20%22Open%20prefs%20in%20about%3Aconfig%20for%20editing%22%2C%0A%20%20removeLabel%3A%20%22Removed%20sites%20reset%20to%20default%20value%22%2C%0A%20%20siteListLabel%3A%20%22Site%20Domains%22%2C%0A%20%20siteListTextbox1%3A%20%22%22%2C%0A%20%20siteListTextbox2%3A%20%22%22%2C%0A%20%20siteListTextbox3%3A%20%22%22%2C%0A%20%20sitesUserset%3A%20%22Sites%20and%20values%20that%20are%20user%20set%22%2C%0A%20%20str1%3A%20%22Mozilla/5.0%20%28Windows%20NT%2010.0%3B%20Win64%3B%20x64%3B%20rv%3A77.0%29%20Gecko/20100101%20Firefox/77.0%22%2C%0A%20%20str2%3A%20%22Mozilla/5.0%20%28platform%3B%20rv%3A56.0%29%20Gecko/20100101%20Firefox/56.0%20Waterfox/waterfoxversion%22%2C%0A%20%20str3%3A%20%22Mozilla/5.0%20%28Windows%20NT%2010.0%3B%20Win64%3B%20x64%3B%20rv%3A56.0%29%20Gecko/20100101%20Firefox/56.0%20Waterfox/56.3%22%2C%0A%20%20viewButtonLabel%3A%20%22Sites%20user%20set%22%0A%7D%0A%0Afor%20%28let%20key%20in%20pref.defaults%29%20%7B%0A%20%20if%20%28pref.defaults.hasOwnProperty%28key%29%29%20%7B%0A%20%20%20%20let%20val%20%3D%20pref.defaults%5Bkey%5D%3B%0A%20%20%20%20switch%20%28typeof%20val%29%20%7B%0A%20%20%20%20%20%20case%20%22boolean%22%3A%0A%20%20%20%20%20%20%20%20pb.getDefaultBranch%28aRoot%29.setBoolPref%28key%2C%20val%29%3B%0A%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20case%20%22number%22%3A%0A%20%20%20%20%20%20%20%20pb.getDefaultBranch%28aRoot%29.setIntPref%28key%2C%20val%29%3B%0A%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20case%20%22string%22%3A%0A%20%20%20%20%20%20%20%20ss.data%20%3D%20val%3B%0A%20%20%20%20%20%20%20%20pb.getDefaultBranch%28aRoot%29.setComplexValue%28%28key%29%2C%20Ci.nsISupportsString%2C%20ss%29%3B%0A%7D%20%7D%20%7D%0A%0Afunction%20pref%28key%29%20%7B%0A%20%20let%20%7Bbranch%2C%20defaults%7D%20%3D%20pref%3B%0A%20%20if%20%28branch%20%3D%3D%20null%29%20branch%20%3D%20pb.getBranch%28aRoot%29%3B%0A%20%20switch%20%28typeof%20defaults%5Bkey%5D%29%20%7B%0A%20%20%20%20case%20%22boolean%22%3A%0A%20%20%20%20%20%20return%20branch.getBoolPref%28key%29%3B%0A%20%20%20%20case%20%22number%22%3A%0A%20%20%20%20%20%20return%20branch.getIntPref%28key%29%3B%0A%20%20%20%20case%20%22string%22%3A%0A%20%20%20%20%20%20return%20branch.getCharPref%28key%29%3B%0A%20%20%7D%0A%20%20return%20null%3B%0A%7D%0A%0Afunction%20getSS%28filepath%29%20%7B%0A%20%20return%20ios.newURI%28%22data%3Atext/css%2C%22%20+%20filepath%2C%20null%2C%20null%29%3B%0A%7D%0A%0Afunction%20loadSheet%28filepath%29%20%7B%0A%20%20sss.loadAndRegisterSheet%28getSS%28filepath%29%2C%20sss.AGENT_SHEET%29%3B%0A%7D%0A%0Afunction%20unloadSheet%28filepath%29%20%7B%0A%20%20let%20uri%20%3D%20getSS%28filepath%29%3B%0A%20%20if%20%28sss.sheetRegistered%28uri%2C%20sss.AGENT_SHEET%29%29%20sss.unregisterSheet%28uri%2C%20sss.AGENT_SHEET%29%3B%0A%7D%0A%0Afunction%20gCV%28aKey%29%20%7B%0A%20%20return%20pb.getComplexValue%28aRoot%20+%20aKey%2C%20Ci.nsISupportsString%29.data%3B%0A%7D%0A%0Afunction%20sCV%28aKey%2C%20aVal%29%20%7B%0A%20%20ss.data%20%3D%20aVal%3B%0A%20%20pb.setComplexValue%28aRoot%20+%20aKey%2C%20Ci.nsISupportsString%2C%20ss%29%3B%0A%7D%0A%0AloadSheet%28hTab%29%3B%0A%0Aif%20%28pref%28%22siteListTextbox1%22%29%29%20%7B%0A%20%20let%20siteList1%20%3D%20pref%28%22siteListTextbox1%22%29.split%28%22%2C%20%22%29%3B%0A%20%20for%20%28let%20x%20in%20siteList1%29%20gUser.setCharPref%28siteList1%5Bx%5D%2C%20pref%28%22str1%22%29%29%3B%0A%7D%0A%0Aif%20%28pref%28%22siteListTextbox2%22%29%29%20%7B%0A%20%20let%20siteList2%20%3D%20pref%28%22siteListTextbox2%22%29.split%28%22%2C%20%22%29%3B%0A%20%20for%20%28let%20y%20in%20siteList2%29%20gUser.setCharPref%28siteList2%5By%5D%2C%20pref%28%22str2%22%29%29%3B%0A%7D%0A%0Aif%20%28pref%28%22siteListTextbox3%22%29%29%20%7B%0A%20%20let%20siteList3%20%3D%20pref%28%22siteListTextbox3%22%29.split%28%22%2C%20%22%29%3B%0A%20%20for%20%28let%20z%20in%20siteList3%29%20gUser.setCharPref%28siteList3%5Bz%5D%2C%20pref%28%22str3%22%29%29%3B%0A%7D%0A%0Athis.image%20%3D%20pref%28%22buttonIcon%22%29%3B%0A%0Athis.onclick%20%3D%20function%28e%29%20%7B%0A%20%20if%20%28e.button%20%21%3D%3D%200%29%20return%3B%0A%20%20if%20%28wm%28%22useragent%3Adialog%22%29%29%20%7B%0A%20%20%20%20wm%28%22useragent%3Adialog%22%29.focus%28%29%3B%0A%20%20%20%20return%3B%0A%20%20%7D%0A%20%20let%20data%20%3D%20%27%3C%3Fxml%20version%3D%221.0%22%3F%3E%3C%3Fxml-stylesheet%20href%3D%22chrome%3A//global/skin/%22%20type%3D%22text/css%22%3F%3E%5C%0A%20%20%20%20%3Cwindow%20xmlns%3D%22%27%20+%20xulns%20+%20%27%22%20id%3D%22useragent-dialog%22%20windowtype%3D%22useragent%3Adialog%22%20%5C%0A%20%20%20%20%20%20persist%3D%22width%20height%22%20title%3D%22%27%20+%20self.label%20+%20%27%22%20onload%3D%22self.onDialogLoad%28this%29%22%20%5C%0A%20%20%20%20%20%20onclose%3D%22self.onDialogClose%28%29%22%3E%5C%0A%20%20%20%20%20%20%3Chbox%20id%3D%22siteContainer1%22%20class%3D%22hbox%22%20align%3D%22center%22%3E%5C%0A%20%20%20%20%20%20%20%20%3Clabel%20id%3D%22siteListLabel1%22%20class%3D%22label%22%20value%3D%22%27%20+%20gCV%28%22siteListLabel%22%29%20+%20%27%22/%3E%5C%0A%20%20%20%20%20%20%20%20%3Cbutton%20id%3D%22addCurrent1%22%20class%3D%22button%22%20label%3D%22%27%20+%20gCV%28%22addCurrent%22%29%20+%20%27%22%20%5C%0A%20%20%20%20%20%20%20%20%20%20tooltiptext%3D%22%27%20+%20gCV%28%22addCurrentTip%22%29%20+%20%27%22%20oncommand%3D%22self.onCurrent%28this%29%22/%3E%5C%0A%20%20%20%20%20%20%20%20%3Clabel%20id%3D%22removeLabel1%22%20class%3D%22label%22%20value%3D%22%27%20+%20gCV%28%22removeLabel%22%29%20+%20%27%22/%3E%5C%0A%20%20%20%20%20%20%3C/hbox%3E%5C%0A%20%20%20%20%20%20%3Clabel%20id%3D%22userAgentLabel1%22%20class%3D%22label%22%20value%3D%22%27%20+%20pref%28%22str1%22%29%20+%20%27%22/%3E%5C%0A%20%20%20%20%20%20%3Ctextbox%20id%3D%22siteListTextbox1%22%20class%3D%22textbox%22%20value%3D%22%27%20+%20pref%28%22siteListTextbox1%22%29%20+%20%27%22%20%5C%0A%20%20%20%20%20%20%20%20readonly%3D%22true%22%20multiline%3D%22true%22%20placeholder%3D%22%27%20+%20gCV%28%22placeHolder%22%29%20+%20%27%22%20flex%3D%221%22%20%5C%0A%20%20%20%20%20%20%20%20onchange%3D%22self.onTextbox%28this%29%22/%3E%5C%0A%20%20%20%20%20%20%3Chbox%20id%3D%22siteContainer2%22%20class%3D%22hbox%22%20align%3D%22center%22%3E%5C%0A%20%20%20%20%20%20%20%20%3Clabel%20id%3D%22siteListLabel2%22%20class%3D%22label%22%20value%3D%22%27%20+%20gCV%28%22siteListLabel%22%29%20+%20%27%22/%3E%5C%0A%20%20%20%20%20%20%20%20%3Cbutton%20id%3D%22addCurrent2%22%20class%3D%22button%22%20label%3D%22%27%20+%20gCV%28%22addCurrent%22%29%20+%20%27%22%20%5C%0A%20%20%20%20%20%20%20%20%20%20tooltiptext%3D%22%27%20+%20gCV%28%22addCurrentTip%22%29%20+%20%27%22%20oncommand%3D%22self.onCurrent%28this%29%22/%3E%5C%0A%20%20%20%20%20%20%20%20%3Clabel%20id%3D%22removeLabel2%22%20class%3D%22label%22%20value%3D%22%27%20+%20gCV%28%22removeLabel%22%29%20+%20%27%22/%3E%5C%0A%20%20%20%20%20%20%3C/hbox%3E%5C%0A%20%20%20%20%20%20%3Clabel%20id%3D%22userAgentLabel2%22%20class%3D%22label%22%20value%3D%22%27%20+%20pref%28%22str2%22%29%20+%20%27%22/%3E%5C%0A%20%20%20%20%20%20%3Ctextbox%20id%3D%22siteListTextbox2%22%20class%3D%22textbox%22%20value%3D%22%27%20+%20pref%28%22siteListTextbox2%22%29%20+%20%27%22%20%5C%0A%20%20%20%20%20%20%20%20readonly%3D%22true%22%20multiline%3D%22true%22%20placeholder%3D%22%27%20+%20gCV%28%22placeHolder%22%29%20+%20%27%22%20flex%3D%221%22%20%5C%0A%20%20%20%20%20%20%20%20onchange%3D%22self.onTextbox%28this%29%22/%3E%5C%0A%20%20%20%20%20%20%3Chbox%20id%3D%22siteContainer3%22%20class%3D%22hbox%22%20align%3D%22center%22%3E%5C%0A%20%20%20%20%20%20%20%20%3Clabel%20id%3D%22siteListLabel3%22%20class%3D%22label%22%20value%3D%22%27%20+%20gCV%28%22siteListLabel%22%29%20+%20%27%22/%3E%5C%0A%20%20%20%20%20%20%20%20%3Cbutton%20id%3D%22addCurrent3%22%20class%3D%22button%22%20label%3D%22%27%20+%20gCV%28%22addCurrent%22%29%20+%20%27%22%20%5C%0A%20%20%20%20%20%20%20%20%20%20tooltiptext%3D%22%27%20+%20gCV%28%22addCurrentTip%22%29%20+%20%27%22%20oncommand%3D%22self.onCurrent%28this%29%22/%3E%5C%0A%20%20%20%20%20%20%20%20%3Clabel%20id%3D%22removeLabel3%22%20class%3D%22label%22%20value%3D%22%27%20+%20gCV%28%22removeLabel%22%29%20+%20%27%22/%3E%5C%0A%20%20%20%20%20%20%3C/hbox%3E%5C%0A%20%20%20%20%20%20%3Clabel%20id%3D%22userAgentLabel3%22%20class%3D%22label%22%20value%3D%22%27%20+%20pref%28%22str3%22%29%20+%20%27%22/%3E%5C%0A%20%20%20%20%20%20%3Ctextbox%20id%3D%22siteListTextbox3%22%20class%3D%22textbox%22%20value%3D%22%27%20+%20pref%28%22siteListTextbox3%22%29%20+%20%27%22%20%5C%0A%20%20%20%20%20%20%20%20readonly%3D%22true%22%20multiline%3D%22true%22%20placeholder%3D%22%27%20+%20gCV%28%22placeHolder%22%29%20+%20%27%22%20flex%3D%221%22%20%5C%0A%20%20%20%20%20%20%20%20onchange%3D%22self.onTextbox%28this%29%22/%3E%5C%0A%20%20%20%20%20%20%3Chbox%20id%3D%22buttonContainer%22%20class%3D%22hbox%22%20align%3D%22center%22%3E%5C%0A%20%20%20%20%20%20%20%20%3Cbutton%20id%3D%22buttonIcon%22%20class%3D%22button%22%20label%3D%22%27%20+%20gCV%28%22buttonIconLabel%22%29%20+%20%27%22%20%5C%0A%20%20%20%20%20%20%20%20%20%20tooltiptext%3D%22%27%20+%20gCV%28%22buttonIconTip%22%29%20+%20%27%22%20oncommand%3D%22self.onIcon%28this%29%22/%3E%5C%0A%20%20%20%20%20%20%20%20%3Cimage%20id%3D%22imageIcon%22%20class%3D%22image%22%20src%3D%22%27%20+%20pref%28%22buttonIcon%22%29%20+%20%27%22/%3E%5C%0A%20%20%20%20%20%20%20%20%3Cspacer%20id%3D%22buttonSpacer%22%20class%3D%22spacer%22%20flex%3D%221%22/%3E%5C%0A%20%20%20%20%20%20%20%20%3Cbutton%20id%3D%22editorButton%22%20class%3D%22button%22%20label%3D%22%27%20+%20gCV%28%22editorButtonLabel%22%29%20+%20%27%22%20%5C%0A%20%20%20%20%20%20%20%20%20%20tooltiptext%3D%22%27%20+%20gCV%28%22editorButtonTip%22%29%20+%20%27%22%20oncommand%3D%22self.onEditor%28%29%22/%3E%5C%0A%20%20%20%20%20%20%20%20%3Cbutton%20id%3D%22prefsButton%22%20class%3D%22button%22%20label%3D%22%27%20+%20gCV%28%22prefsButtonLabel%22%29%20+%20%27%22%20%5C%0A%20%20%20%20%20%20%20%20%20%20tooltiptext%3D%22%27%20+%20gCV%28%22prefsButtonTip%22%29%20+%20%27%22%20oncommand%3D%22self.onPrefs%28%29%22/%3E%5C%0A%20%20%20%20%20%20%20%20%3Cbutton%20id%3D%22viewButton%22%20class%3D%22button%22%20label%3D%22%27%20+%20gCV%28%22viewButtonLabel%22%29%20+%20%27%22%20%5C%0A%20%20%20%20%20%20%20%20%20%20tooltiptext%3D%22%27%20+%20gCV%28%22sitesUserset%22%29%20+%20%27%22%20oncommand%3D%22self.onView%28%29%22/%3E%5C%0A%20%20%20%20%20%20%20%20%3Cbutton%20id%3D%22doneButton%22%20class%3D%22button%22%20label%3D%22%27%20+%20gCV%28%22doneButtonLabel%22%29%20+%20%27%22%20%5C%0A%20%20%20%20%20%20%20%20%20%20tooltiptext%3D%22%27%20+%20gCV%28%22doneButtonTip%22%29%20+%20%27%22%20oncommand%3D%22self.onDialogDone%28%29%22/%3E%5C%0A%20%20%20%20%20%20%3C/hbox%3E%5C%0A%20%20%20%20%3C/window%3E%27%3B%0A%20%20data%20%3D%20data.replace%28/self/g%2C%20%22opener.document.getElementById%28%27%22%20+%20self.id%20+%20%22%27%29%22%29%3B%0A%20%20let%20url%20%3D%20%22data%3Aapplication/vnd.mozilla.xul+xml%3Btext/plain%2C%22%20+%20encodeURIComponent%28data%29%3B%0A%20%20window.openDialog%28url%2C%20%22%22%2C%20%22chrome%2Cdialog%2Cresizable%2CalwaysRaised%22%29%3B%0A%7D%0A%0Athis.onCurrent%20%3D%20function%28e%29%20%7B%0A%20%20let%20dlg%20%3D%20wm%28%22useragent%3Adialog%22%29%2C%0A%20%20%20%20%20%20list%20%3D%20dlg.document.getElementById%28%22siteListTextbox%22%20+%20e.id.match%28/%5Cd/%29%29%2C%0A%20%20%20%20%20%20str%20%3D%20%22str%22%20+%20e.id.match%28/%5Cd/%29%2C%0A%20%20%20%20%20%20uri%20%3D%20gBrowser.contentDocument.documentURIObject%2C%0A%20%20%20%20%20%20et%20%3D%20Cc%5B%22@mozilla.org/network/effective-tld-service%3B1%22%5D.getService%28Ci.nsIEffectiveTLDService%29%2C%0A%20%20%20%20%20%20eTLD%3B%0A%20%20try%20%7B%20eTLD%20%3D%20et.getBaseDomain%28uri%29%20%7D%20catch%20%28ex%29%20%7B%20eTLD%20%3D%20uri.asciiHost%20%7D%0A%20%20if%20%28%21eTLD%29%20%7B%0A%20%20%20%20let%20bar%20%3D%20gURLBar.value%20+%20%22%20%22%20+%20gCV%28%22alertMsg%22%29%2C%0A%20%20%20%20%20%20%20%20title%20%3D%20this.label%20+%20%22%20Alert%22%3B%0A%20%20%20%20as%28this.image%2C%20title%2C%20bar%2C%20false%2C%20null%2C%20null%2C%20%22%22%29%3B%0A%20%20%20%20return%3B%0A%20%20%7D%0A%20%20if%20%28list.value.match%28eTLD%29%29%20%7B%0A%20%20%20%20list.value%20%3D%20list.value.replace%28eTLD%2C%20%22%22%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.replace%28/%5Cs+/g%2C%20%22%22%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.replace%28/%5E%2C+/%2C%20%22%22%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.replace%28/%2C+%24/g%2C%20%22%22%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.replace%28/%2C+/g%2C%20%22%2C%20%22%29%3B%0A%20%20%20%20gUser.clearUserPref%28eTLD%29%3B%0A%20%20%7D%20else%20%7B%0A%20%20%20%20if%20%28list.value%29%20list.value%20%3D%20list.value%20+%20%22%2C%20%22%20+%20eTLD%3B%0A%20%20%20%20else%20list.value%20%3D%20list.value%20+%20eTLD%3B%0A%20%20%20%20gUser.setCharPref%28eTLD%2C%20str%29%3B%0A%20%20%7D%0A%20%20gRoot.setCharPref%28e.id%2C%20list.value%29%3B%0A%7D%0A%0Athis.onDestroy%20%3D%20function%28reason%29%20%7B%0A%20%20if%20%28reason%20%3D%3D%3D%20%22delete%22%29%20%7B%0A%20%20%20%20if%20%28resetValues%29%20%7B%0A%20%20%20%20%20%20let%20arr%20%3D%20pref%28%22siteListTextbox1%22%29.concat%28pref%28%22siteListTextbox2%22%29%2C%20pref%28%22siteListTextbox3%22%29%29%3B%0A%20%20%20%20%20%20if%20%28arr%29%20%7B%0A%20%20%20%20%20%20%20%20let%20siteList%20%3D%20arr.split%28%22%2C%20%22%29%3B%0A%20%20%20%20%20%20%20%20for%20%28let%20x%20in%20siteList%29%20gUser.clearUserPref%28siteList%5Bx%5D%29%3B%0A%20%20%20%20%7D%20%7D%0A%20%20%20%20if%20%28removePrefs%29%20pb.deleteBranch%28aRoot%29%3B%0A%20%20%20%20unloadSheet%28hTab%29%3B%0A%7D%20%7D%0A%0Athis.onDialogClose%20%3D%20function%28%29%20%7B%0A%20%20let%20dlg%20%3D%20wm%28%22useragent%3Adialog%22%29%2C%0A%20%20%20%20%20%20prefList%20%3D%20gUser.getChildList%28%22%22%2C%20%7B%7D%29%3B%0A%20%20gRoot.setIntPref%28%22dialogLeft%22%2C%20dlg.screenX%29%3B%0A%20%20gRoot.setIntPref%28%22dialogTop%22%2C%20dlg.screenY%29%3B%0A%20%20for%20%28let%20i%20in%20prefList%29%20%7B%0A%20%20%20%20let%20val%20%3D%20gUser.getCharPref%28prefList%5Bi%5D%29%3B%0A%20%20%20%20if%20%28val.match%28/%5Estr%5Cd%24/%29%29%20gUser.clearUserPref%28prefList%5Bi%5D%29%3B%0A%20%20%7D%0A%20%20dlg.close%28%29%3B%0A%7D%0A%0Athis.onDialogDone%20%3D%20function%28%29%20%7B%0A%20%20let%20dlg%20%3D%20wm%28%22useragent%3Adialog%22%29%2C%0A%20%20%20%20%20%20list1%20%3D%20dlg.document.getElementById%28%22siteListTextbox1%22%29%2C%0A%20%20%20%20%20%20list2%20%3D%20dlg.document.getElementById%28%22siteListTextbox2%22%29%2C%0A%20%20%20%20%20%20list3%20%3D%20dlg.document.getElementById%28%22siteListTextbox3%22%29%2C%0A%20%20%20%20%20%20aList1%20%3D%20list1.value.split%28%22%2C%20%22%29%2C%0A%20%20%20%20%20%20aList2%20%3D%20list2.value.split%28%22%2C%20%22%29%2C%0A%20%20%20%20%20%20aList3%20%3D%20list3.value.split%28%22%2C%20%22%29%3B%0A%20%20gRoot.setCharPref%28%22siteListTextbox1%22%2C%20list1.value%29%3B%0A%20%20gRoot.setCharPref%28%22siteListTextbox2%22%2C%20list2.value%29%3B%0A%20%20gRoot.setCharPref%28%22siteListTextbox3%22%2C%20list3.value%29%3B%0A%20%20for%20%28let%20i%20%3D%200%3B%20i%20%3C%20aList1.length%3B%20i++%29%20%7B%0A%20%20%20%20if%20%28%21aList1%5Bi%5D%29%20continue%3B%0A%20%20%20%20gUser.setCharPref%28aList1%5Bi%5D%2C%20pref%28%22str1%22%29%29%3B%0A%20%20%7D%0A%20%20for%20%28let%20j%20%3D%200%3B%20j%20%3C%20aList2.length%3B%20j++%29%20%7B%0A%20%20%20%20if%20%28%21aList2%5Bj%5D%29%20continue%3B%0A%20%20%20%20gUser.setCharPref%28aList2%5Bj%5D%2C%20pref%28%22str2%22%29%29%3B%0A%20%20%7D%0A%20%20for%20%28let%20k%20%3D%200%3B%20k%20%3C%20aList3.length%3B%20k++%29%20%7B%0A%20%20%20%20if%20%28%21aList3%5Bk%5D%29%20continue%3B%0A%20%20%20%20gUser.setCharPref%28aList3%5Bk%5D%2C%20pref%28%22str3%22%29%29%3B%0A%20%20%7D%0A%20%20self.onDialogClose%28%29%3B%0A%7D%0A%0Athis.onDialogLoad%20%3D%20function%28e%29%20%7B%0A%20%20e.moveTo%28pref%28%22dialogLeft%22%29%2C%20pref%28%22dialogTop%22%29%29%3B%0A%7D%0A%0Athis.onEditor%20%3D%20function%28%29%20%7B%0A%20%20if%20%28wm%28%22editor%3Adialog%22%29%29%20%7B%0A%20%20%20%20wm%28%22useragent%3Adialog%22%29.focus%28%29%3B%0A%20%20%20%20return%3B%0A%20%20%7D%0A%20%20let%20data%20%3D%20%27%3C%3Fxml%20version%3D%221.0%22%3F%3E%3C%3Fxml-stylesheet%20href%3D%22chrome%3A//global/skin/%22%20type%3D%22text/css%22%3F%3E%5C%0A%20%20%20%20%3Cwindow%20xmlns%3D%22%27%20+%20xulns%20+%20%27%22%20id%3D%22editor-dialog%22%20windowtype%3D%22editor%3Adialog%22%20persist%3D%22width%20height%22%20%5C%0A%20%20%20%20%20%20title%3D%22%27%20+%20self.label%20+%20%27%20Editor%27%20+%20%27%22%20onload%3D%22self.onEditorLoad%28this%29%22%20onclose%3D%22self.onEditorClose%28%29%22%3E%5C%0A%20%20%20%20%20%20%3Clabel%20id%3D%22editorLabel1%22%20class%3D%22label%22%20value%3D%22%27%20+%20gCV%28%22editorLabel1%22%29%20+%20%27%22/%3E%5C%0A%20%20%20%20%20%20%3Ctextbox%20id%3D%22editorTextbox1%22%20class%3D%22textbox%22%20value%3D%22%27%20+%20pref%28%22str1%22%29%20+%20%27%22%20flex%3D%221%22/%3E%5C%0A%20%20%20%20%20%20%3Clabel%20id%3D%22editorLabel2%22%20class%3D%22label%22%20value%3D%22%27%20+%20gCV%28%22editorLabel2%22%29%20+%20%27%22/%3E%5C%0A%20%20%20%20%20%20%3Ctextbox%20id%3D%22editorTextbox2%22%20class%3D%22textbox%22%20value%3D%22%27%20+%20pref%28%22str2%22%29%20+%20%27%22%20flex%3D%221%22/%3E%5C%0A%20%20%20%20%20%20%3Clabel%20id%3D%22editorLabel3%22%20class%3D%22label%22%20value%3D%22%27%20+%20gCV%28%22editorLabel3%22%29%20+%20%27%22/%3E%5C%0A%20%20%20%20%20%20%3Ctextbox%20id%3D%22editorTextbox3%22%20class%3D%22textbox%22%20value%3D%22%27%20+%20pref%28%22str3%22%29%20+%20%27%22%20flex%3D%221%22/%3E%5C%0A%20%20%20%20%20%20%3Chbox%20id%3D%22buttonContainer%22%20class%3D%22hbox%22%20align%3D%22center%22%3E%5C%0A%20%20%20%20%20%20%20%20%3Cspacer%20id%3D%22editorSpacer%22%20class%3D%22spacer%22%20flex%3D%221%22/%3E%5C%0A%20%20%20%20%20%20%20%20%3Cbutton%20id%3D%22doneButton%22%20class%3D%22button%22%20label%3D%22%27%20+%20gCV%28%22doneButtonLabel%22%29%20+%20%27%22%20%5C%0A%20%20%20%20%20%20%20%20%20%20oncommand%3D%22self.onEditorDone%28%29%22/%3E%5C%0A%20%20%20%20%20%20%3C/hbox%3E%5C%0A%20%20%20%20%3C/window%3E%27%3B%0A%20%20data%20%3D%20data.replace%28/self/g%2C%20%22opener.document.getElementById%28%27%22%20+%20self.id%20+%20%22%27%29%22%29%3B%0A%20%20let%20url%20%3D%20%22data%3Aapplication/vnd.mozilla.xul+xml%3Btext/plain%2C%22%20+%20encodeURIComponent%28data%29%3B%0A%20%20window.openDialog%28url%2C%20%22%22%2C%20%22chrome%2Cdialog%2Cresizable%2CalwaysRaised%22%29%3B%0A%7D%0A%0Athis.onEditorClose%20%3D%20function%28%29%20%7B%0A%20%20let%20edt%20%3D%20wm%28%22editor%3Adialog%22%29%3B%0A%20%20gRoot.setIntPref%28%22editorLeft%22%2C%20edt.screenX%29%3B%0A%20%20gRoot.setIntPref%28%22editorTop%22%2C%20edt.screenY%29%3B%0A%20%20edt.close%28%29%3B%0A%7D%0A%0Athis.onEditorDone%20%3D%20function%28%29%20%7B%0A%20%20let%20dlg%20%3D%20wm%28%22useragent%3Adialog%22%29%2C%0A%20%20%20%20%20%20edt%20%3D%20wm%28%22editor%3Adialog%22%29%2C%0A%20%20%20%20%20%20lab1%20%3D%20dlg.document.getElementById%28%22userAgentLabel1%22%29%2C%0A%20%20%20%20%20%20lab2%20%3D%20dlg.document.getElementById%28%22userAgentLabel2%22%29%2C%0A%20%20%20%20%20%20lab3%20%3D%20dlg.document.getElementById%28%22userAgentLabel3%22%29%2C%0A%20%20%20%20%20%20tb1%20%3D%20edt.document.getElementById%28%22editorTextbox1%22%29%2C%0A%20%20%20%20%20%20tb2%20%3D%20edt.document.getElementById%28%22editorTextbox2%22%29%2C%0A%20%20%20%20%20%20tb3%20%3D%20edt.document.getElementById%28%22editorTextbox3%22%29%3B%0A%20%20gRoot.setCharPref%28%22str1%22%2C%20tb1.value%29%3B%0A%20%20gRoot.setCharPref%28%22str2%22%2C%20tb2.value%29%3B%0A%20%20gRoot.setCharPref%28%22str3%22%2C%20tb3.value%29%3B%0A%20%20lab1.value%20%3D%20tb1.value%3B%0A%20%20lab2.value%20%3D%20tb2.value%3B%0A%20%20lab3.value%20%3D%20tb3.value%3B%0A%20%20self.onEditorClose%28%29%3B%0A%7D%0A%0Athis.onEditorLoad%20%3D%20function%28e%29%20%7B%0A%20%20e.moveTo%28pref%28%22editorLeft%22%29%2C%20pref%28%22editorTop%22%29%29%3B%0A%7D%0A%0Athis.onIcon%20%3D%20function%28e%29%20%7B%0A%20%20let%20win%20%3D%20wm%28%22navigator%3Abrowser%22%29%2C%0A%20%20%20%20%20%20fp%20%3D%20Cc%5B%27@mozilla.org/filepicker%3B1%27%5D.createInstance%28Ci.nsIFilePicker%29%3B%0A%20%20fp.init%28window%2C%20null%2C%20fp.modeOpen%29%3B%0A%20%20fp.appendFilters%28fp.filterImages%29%3B%0A%20%20if%20%28fp.show%28%29%20%21%3D%20fp.returnCancel%29%20%7B%0A%20%20%20%20let%20url%20%3D%20fp.fileURL.spec%3B%0A%20%20%20%20gRoot.setCharPref%28%22buttonIcon%22%2C%20url%29%3B%0A%20%20%20%20win.document.getElementById%28self.id%29.image%20%3D%20url%3B%0A%20%20%20%20e.nextSibling.src%20%3D%20url%3B%0A%7D%20%7D%0A%0Athis.onPrefs%20%3D%20function%28%29%20%7B%0A%20%20let%20win%20%3D%20wm%28%22navigator%3Abrowser%22%29%2C%0A%20%20%20%20%20%20nodes%20%3D%20win.gBrowser.tabContainer.childNodes%2C%0A%20%20%20%20%20%20addTab%20%3D%20true%3B%0A%20%20for%20%28let%20i%20%3D%200%3B%20i%20%3C%20nodes.length%3B%20i++%29%20%7B%0A%20%20%20%20if%20%28nodes%5Bi%5D.linkedBrowser.currentURI.spec.match%28%22about%3Aconfig%22%29%29%20%7B%0A%20%20%20%20%20%20win.gBrowser.selectedTab%20%3D%20nodes%5Bi%5D%3B%0A%20%20%20%20%20%20addTab%20%3D%20false%3B%0A%20%20%7D%20%7D%0A%20%20if%20%28addTab%29%20openUILinkIn%28%22about%3Aconfig%22%2C%20%22tab%22%29%3B%0A%20%20setTimeout%28function%28%29%20%7B%0A%20%20%20%20win.content.document.activeElement.value%20%3D%20%22useragent.override.%22%3B%0A%20%20%20%20win.content.document.getElementById%28%22textbox%22%29.click%28%29%3B%0A%20%20%7D%2C%20250%29%3B%0A%7D%0A%0Athis.onTextbox%20%3D%20function%28e%29%20%7B%0A%20%20switch%20%28e.id%29%20%7B%0A%20%20%20%20case%20%22siteListTextbox1%22%3A%20case%20%22siteListTextbox2%22%3A%20case%20%22siteListTextbox3%22%3A%0A%20%20%20%20%20%20e.value%20%3D%20e.value.replace%28/%5Cs+/g%2C%20%22%22%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.replace%28/%5E%2C+/%2C%20%22%22%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.replace%28/%2C+%24/g%2C%20%22%22%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.replace%28/%2C+/g%2C%20%22%2C%20%22%29%3B%0A%7D%20%7D%0A%0Athis.onView%20%3D%20function%28%29%20%7B%0A%20%20let%20prefList%20%3D%20gUser.getChildList%28%22%22%2C%20%7B%7D%29%2C%0A%20%20%20%20%20%20info%20%3D%20gCV%28%22infoMsg%22%29%2C%0A%20%20%20%20%20%20title%20%3D%20self.label%20+%20%22%20%22%20+%20gCV%28%22infoLabel%22%29%2C%0A%20%20%20%20%20%20arr%20%3D%20%5B%5D%3B%0A%20%20for%20%28let%20i%20in%20prefList%29%20%7B%0A%20%20%20%20let%20val%20%3D%20gUser.getCharPref%28prefList%5Bi%5D%29%3B%0A%20%20%20%20if%20%28gUser.prefHasUserValue%28prefList%5Bi%5D%29%29%20arr.push%28prefList%5Bi%5D%20+%20%22%3A%5Cn%20%20%20%22%20+%20val%29%3B%0A%20%20%7D%0A%20%20arr%20%3D%20arr.join%28%22%5Cn%22%29%3B%0A%20%20if%20%28arr%29%20%7B%0A%20%20%20%20if%20%28arr.match%28%22str1%22%29%29%20arr%20%3D%20arr.replace%28/str1/g%2C%20pref%28%22str1%22%29%29%3B%0A%20%20%20%20if%20%28arr.match%28%22str2%22%29%29%20arr%20%3D%20arr.replace%28/str2/g%2C%20pref%28%22str2%22%29%29%3B%0A%20%20%20%20if%20%28arr.match%28%22str3%22%29%29%20arr%20%3D%20arr.replace%28/str3/g%2C%20pref%28%22str3%22%29%29%3B%0A%20%20%20%20alert%28pref%28%22sitesUserset%22%29%20+%20%22%5Cn%5Cn%22%20+%20arr%29%3B%0A%20%20%7D%20else%20as%28self.image%2C%20title%2C%20info%2C%20false%2C%20null%2C%20null%2C%20%22%22%29%3B%0A%7D%5D%5D%3E%3C/initcode%3E%0A%20%20%3Ccode%3E%3C%21%5BCDATA%5B/*%20CODE%20*/%5D%5D%3E%3C/code%3E%0A%20%20%3Caccelkey%3E%3C%21%5BCDATA%5B%5D%5D%3E%3C/accelkey%3E%0A%20%20%3Chelp%3E%3C%21%5BCDATA%5B%23useragent-dialog%20%7B%0A%20%20min-height%3A%20313px%20%21important%3B%0A%20%20min-width%3A%20562px%20%21important%3B%0A%20%20padding%3A%204px%20%21important%3B%0A%7D%0A%0A%23useragent-dialog%20%5Bid%5E%3D%22userAgentLabel%22%5D.label%20%7B%0A%20%20font-weight%3A%20bold%20%21important%3B%0A%7D%0A%0A%23useragent-dialog%20%23imageIcon.image%20%7B%0A%20%20max-height%3A%2032px%20%21important%3B%0A%20%20max-width%3A%2032px%20%21important%3B%0A%7D%0A%0A%23useragent-dialog%20.textbox%20%7B%0A%20%20margin-bottom%3A%2016px%20%21important%3B%0A%20%20height%3A%2022px%20%21important%3B%0A%20%20pointer-events%3A%20none%20%21important%3B%0A%7D%0A%0A%23useragent-dialog%20.button%20%7B%0A%20%20min-width%3A%2042px%20%21important%3B%0A%7D%0A%0A%23editor-dialog%20%7B%0A%20%20min-height%3A%20219px%20%21important%3B%0A%20%20min-width%3A%20562px%20%21important%3B%0A%20%20padding%3A%204px%20%21important%3B%0A%7D%0A%0A%23editor-dialog%20.textbox%20%7B%0A%20%20margin-bottom%3A%2016px%20%21important%3B%0A%20%20height%3A%2022px%20%21important%3B%0A%7D%0A%5D%5D%3E%3C/help%3E%0A%20%20%3CCSS%3E%3C%21%5BCDATA%5B%5D%5D%3E%3C/CSS%3E%0A%20%20%3CxCSS%3E%3C%21%5BCDATA%5B%5D%5D%3E%3C/xCSS%3E%0A%20%20%3CCSS2%3E%3C%21%5BCDATA%5B%5D%5D%3E%3C/CSS2%3E%0A%20%20%3CxCSS2%3E%3C%21%5BCDATA%5B%5D%5D%3E%3C/xCSS2%3E%0A%20%20%3CCSS3%3E%3C%21%5BCDATA%5B%5D%5D%3E%3C/CSS3%3E%0A%20%20%3CxCSS3%3E%3C%21%5BCDATA%5B%5D%5D%3E%3C/xCSS3%3E%0A%20%20%3CCSS4%3E%3C%21%5BCDATA%5B%5D%5D%3E%3C/CSS4%3E%0A%20%20%3CxCSS4%3E%3C%21%5BCDATA%5B%5D%5D%3E%3C/xCSS4%3E%0A%20%20%3CCSS5%3E%3C%21%5BCDATA%5B%5D%5D%3E%3C/CSS5%3E%0A%20%20%3CxCSS5%3E%3C%21%5BCDATA%5B%5D%5D%3E%3C/xCSS5%3E%0A%20%20%3CHTML%3E%3C%21%5BCDATA%5B%5D%5D%3E%3C/HTML%3E%0A%20%20%3CxHTML%3E%3C%21%5BCDATA%5B%5D%5D%3E%3C/xHTML%3E%0A%20%20%3Cnotes%3E%3C%21%5BCDATA%5B/*%20Notes%20*/%5D%5D%3E%3C/notes%3E%0A%20%20%3Cattributes/%3E%0A%3C/custombutton%3Etton://%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%3F%3E%0D%0A%3Ccustombutton%20xmlns%3Acb%3D%22http%3A//xsms.nm.ru/custombuttons/%22%3E%0A%20%20%3Cname%3EUser%20Agent%20Switcher%3C/name%3E%0A%20%20%3Cimage%3E%3C%21%5BCDATA%5Bfile%3A///C%3A/Users/srazz/Downloads/Images32/profile.png%5D%5D%3E%3C/image%3E%0A%20%20%3Cmode%3E0%3C/mode%3E%0A%20%20%3Cinitcode%3E%3C%21%5BCDATA%5B%22use%20strict%22%3B%0A%0Aconst%20aRoot%20%3D%20%22custombuttons.useragent.override.%22%2C%0A%20%20%20%20%20%20removePrefs%20%3D%20false%2C%20//%20Remove%20all%20aRoot%20prefs%20from%20about%3Aconfig%20on%20button%20deletion%0A%20%20%20%20%20%20resetValues%20%3D%20false%2C%20//%20Reset%20all%20aRoot%20sites%20to%20default%20values%20on%20button%20deletion%0A%20%20%20%20%20%20aUser%20%3D%20%22general.useragent.override.%22%2C%0A%20%20%20%20%20%20as%20%3D%20Cc%5B%22@mozilla.org/alerts-service%3B1%22%5D.getService%28Ci.nsIAlertsService%29.showAlertNotification%2C%0A%20%20%20%20%20%20ios%20%3D%20Cc%5B%22@mozilla.org/network/io-service%3B1%22%5D.getService%28Ci.nsIIOService%29%2C%0A%20%20%20%20%20%20pb%20%3D%20Cc%5B%22@mozilla.org/preferences-service%3B1%22%5D.getService%28Ci.nsIPrefService%29.QueryInterface%28Ci.nsIPrefBranch%29%2C%0A%20%20%20%20%20%20ss%20%3D%20Cc%5B%22@mozilla.org/supports-string%3B1%22%5D.createInstance%28Ci.nsISupportsString%29%2C%0A%20%20%20%20%20%20sss%20%3D%20Cc%5B%22@mozilla.org/content/style-sheet-service%3B1%22%5D.getService%28Ci.nsIStyleSheetService%29%2C%0A%20%20%20%20%20%20wm%20%3D%20Cc%5B%22@mozilla.org/appshell/window-mediator%3B1%22%5D.getService%28Ci.nsIWindowMediator%29.getMostRecentWindow%2C%0A%20%20%20%20%20%20gRoot%20%3D%20pb.getBranch%28aRoot%29%2C%0A%20%20%20%20%20%20gUser%20%3D%20pb.getBranch%28aUser%29%2C%0A%20%20%20%20%20%20hTab%20%3D%20encodeURIComponent%28this.Help%29%3B%0A%0Apref.defaults%20%3D%20%7B%0A%20%20addCurrentSite%3A%20%22Add/Remove%20Current%20Site%22%2C%0A%20%20addCurrentSiteTip%3A%20%22Add/Remove%20current%20site%20to/from%20list%22%2C%0A%20%20alertMsg%3A%20%22is%20not%20a%20domain%22%2C%0A%20%20buttonIcon%3A%20%22data%3Aimage/png%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAADLElEQVR42n2UXUgUURTH/3dmP6ZcbTUzw1UJlLZk+zDLpezJIsG+XBZRApHYBwuKIkIyCCUxeuihpKdkwSB8MSEikKIIFoIihELcLUXT3R0tt9xVWsf57O4oS+NKF+7M5dz//Oaec+45xO123yaEXMDGg4GimEAAjT4Iw4gbiTRN85OamppZh8NRuH4zmUwiEAgYbFVVB7F1a34GKBKJzJH6+vpgeXm5c/1mf3+//jabzZAkKW13uVyorKw0aMfHx0Okubk56PF4DCCe59HZ2amv21o8KC6wYS6WgCDKKNlZhu2lFQbQ0NBQiLS1tQW9Xq8BFI1EcPXaNX09/fYBGIboa0lWEF3QMIdiA2hwcDBE2tvbg3V1dQaQLMtobGxE15VGtJ6pBsswul2k9rlFCmLKDKDh4eEQ6enpyThRajy4exPXm9zI3ZIFs4kFzSxESUYsSbPkOJ55ot7e3qDP53NaLBbD5ofAa2z+9R4FuTZYrWaYWAbLggSR24GiQ01pnSiK6OvrCxG/3x+kAXdyHJeR1kD/DeRmW8FZzLCaTUiuiCg7eQOs1ZbWCIKAgYGB/4NePrqEbfYsHWKhU1Q07PN2GzRpUIZrf8LARB+QGMVoshb89zGoGkGePQelFW7kYQrmvZepkBhd+zfYXHwExfIEsBynOiqUeUhHHkJYCGMiGsOB6lrg2QlorI0GPoaZ/f7M9BNFhDvxHOoCT9OiAoqk/5Xk50I5/QR7u8cw3lWB5fv7oYa/6IAfu04gsqdjNf2pC3n61Cln0Yd7yN+UA00WKIeCZBFSLAw1EYb9eAsaRi7iTUc2ZjqOQv0T10EMC3zzPsWLN4HVEmk4d9bpencHxLadgkQdJM6HIdGZ8jCrpBQHph4jepPH5L3WdKBTe4GaW/gYnAzpRVta7HCeX/oMVZaw8nsewjxPgXL6A3qF4Nn2CkOxk7SraGm7xQS8OOzDVHQ2tNZGigpzpr/i2PwkpKVFbDR+llShYOYTUmW3aLNjirNjdvch+hd2tY2kG5umEdqgUoEmjCixOUtxjqgqUViTqrCsusJtkmUrJ1N/tFS5rPmmHy/V2P4C6DluwuG4xBYAAAAASUVORK5CYII%3D%22%2C%0A%20%20buttonIconLabel%3A%20%22Button%20icon%22%2C%0A%20%20buttonIconTip%3A%20%22Change%20toolbarbutton-icon%20via%20filepicker%22%2C%0A%20%20dialogLeft%3A%20300%2C%0A%20%20dialogTop%3A%20300%2C%0A%20%20doneButtonLabel%3A%20%22Done%22%2C%0A%20%20doneButtonTip%3A%20%22Set%20useragent%20override%20for%20sites%20in%20lists%22%2C%0A%20%20editorButtonLabel%3A%20%22Editor%22%2C%0A%20%20editorButtonTip%3A%20%22Opens%20editor%20to%20edit%20useragent%20strings%22%2C%0A%20%20editorLabel1%3A%20%22useragent%20override%20string%201%22%2C%0A%20%20editorLabel2%3A%20%22useragent%20override%20string%202%22%2C%0A%20%20editorLabel3%3A%20%22useragent%20override%20string%203%22%2C%0A%20%20editorLeft%3A%20300%2C%0A%20%20editorTop%3A%20300%2C%0A%20%20infoLabel%3A%20%22Sites%22%2C%0A%20%20infoMsg%3A%20%22All%20sites%20set%20to%20default%20values%22%2C%0A%20%20placeHolder%3A%20%22Site%20Domains%20to%20use%20above%20useragent%20string%22%2C%0A%20%20prefsButtonLabel%3A%20%22about%3Aconfig%22%2C%0A%20%20prefsButtonTip%3A%20%22Open%20prefs%20in%20about%3Aconfig%20for%20editing%22%2C%0A%20%20removeLabel%3A%20%22Removing%20sites%20resets%20them%20to%20default%20value%22%2C%0A%20%20siteListLabel%3A%20%22Site%20Domains%22%2C%0A%20%20siteListTextbox1%3A%20%22%22%2C%0A%20%20siteListTextbox2%3A%20%22%22%2C%0A%20%20siteListTextbox3%3A%20%22%22%2C%0A%20%20sitesUserset%3A%20%22Sites%20and%20values%20that%20are%20user%20set%22%2C%0A%20%20str1%3A%20%22Mozilla/5.0%20%28Windows%20NT%2010.0%3B%20Win64%3B%20x64%3B%20rv%3A77.0%29%20Gecko/20100101%20Firefox/77.0%22%2C%0A%20%20str2%3A%20%22Mozilla/5.0%20%28platform%3B%20rv%3A56.0%29%20Gecko/20100101%20Firefox/56.0%20Waterfox/waterfoxversion%22%2C%0A%20%20str3%3A%20%22Mozilla/5.0%20%28Windows%20NT%2010.0%3B%20Win64%3B%20x64%3B%20rv%3A56.0%29%20Gecko/20100101%20Firefox/56.0%20Waterfox/56.3%22%2C%0A%20%20viewButtonLabel%3A%20%22Sites%20user%20set%22%0A%7D%0A%0Afor%20%28let%20key%20in%20pref.defaults%29%20%7B%0A%20%20if%20%28pref.defaults.hasOwnProperty%28key%29%29%20%7B%0A%20%20%20%20let%20val%20%3D%20pref.defaults%5Bkey%5D%3B%0A%20%20%20%20switch%20%28typeof%20val%29%20%7B%0A%20%20%20%20%20%20case%20%22boolean%22%3A%0A%20%20%20%20%20%20%20%20pb.getDefaultBranch%28aRoot%29.setBoolPref%28key%2C%20val%29%3B%0A%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20case%20%22number%22%3A%0A%20%20%20%20%20%20%20%20pb.getDefaultBranch%28aRoot%29.setIntPref%28key%2C%20val%29%3B%0A%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20case%20%22string%22%3A%0A%20%20%20%20%20%20%20%20ss.data%20%3D%20val%3B%0A%20%20%20%20%20%20%20%20pb.getDefaultBranch%28aRoot%29.setComplexValue%28%28key%29%2C%20Ci.nsISupportsString%2C%20ss%29%3B%0A%7D%20%7D%20%7D%0A%0Afunction%20pref%28key%29%20%7B%0A%20%20let%20%7Bbranch%2C%20defaults%7D%20%3D%20pref%3B%0A%20%20if%20%28branch%20%3D%3D%20null%29%20branch%20%3D%20pb.getBranch%28aRoot%29%3B%0A%20%20switch%20%28typeof%20defaults%5Bkey%5D%29%20%7B%0A%20%20%20%20case%20%22boolean%22%3A%0A%20%20%20%20%20%20return%20branch.getBoolPref%28key%29%3B%0A%20%20%20%20case%20%22number%22%3A%0A%20%20%20%20%20%20return%20branch.getIntPref%28key%29%3B%0A%20%20%20%20case%20%22string%22%3A%0A%20%20%20%20%20%20return%20branch.getCharPref%28key%29%3B%0A%20%20%7D%0A%20%20return%20null%3B%0A%7D%0A%0Afunction%20getSS%28filepath%29%20%7B%0A%20%20return%20ios.newURI%28%22data%3Atext/css%2C%22%20+%20filepath%2C%20null%2C%20null%29%3B%0A%7D%0A%0Afunction%20loadSheet%28filepath%29%20%7B%0A%20%20sss.loadAndRegisterSheet%28getSS%28filepath%29%2C%20sss.AGENT_SHEET%29%3B%0A%7D%0A%0Afunction%20unloadSheet%28filepath%29%20%7B%0A%20%20let%20uri%20%3D%20getSS%28filepath%29%3B%0A%20%20if%20%28sss.sheetRegistered%28uri%2C%20sss.AGENT_SHEET%29%29%20sss.unregisterSheet%28uri%2C%20sss.AGENT_SHEET%29%3B%0A%7D%0A%0Afunction%20gCV%28aKey%29%20%7B%0A%20%20return%20pb.getComplexValue%28aRoot%20+%20aKey%2C%20Ci.nsISupportsString%29.data%3B%0A%7D%0A%0Afunction%20sCV%28aKey%2C%20aVal%29%20%7B%0A%20%20ss.data%20%3D%20aVal%3B%0A%20%20pb.setComplexValue%28aRoot%20+%20aKey%2C%20Ci.nsISupportsString%2C%20ss%29%3B%0A%7D%0A%0AloadSheet%28hTab%29%3B%0A%0Aif%20%28pref%28%22siteListTextbox1%22%29%29%20%7B%0A%20%20let%20siteList1%20%3D%20pref%28%22siteListTextbox1%22%29.split%28%22%2C%20%22%29%3B%0A%20%20for%20%28let%20x%20in%20siteList1%29%20gUser.setCharPref%28siteList1%5Bx%5D%2C%20pref%28%22str1%22%29%29%3B%0A%7D%0A%0Aif%20%28pref%28%22siteListTextbox2%22%29%29%20%7B%0A%20%20let%20siteList2%20%3D%20pref%28%22siteListTextbox2%22%29.split%28%22%2C%20%22%29%3B%0A%20%20for%20%28let%20y%20in%20siteList2%29%20gUser.setCharPref%28siteList2%5By%5D%2C%20pref%28%22str2%22%29%29%3B%0A%7D%0A%0Aif%20%28pref%28%22siteListTextbox3%22%29%29%20%7B%0A%20%20let%20siteList3%20%3D%20pref%28%22siteListTextbox3%22%29.split%28%22%2C%20%22%29%3B%0A%20%20for%20%28let%20z%20in%20siteList3%29%20gUser.setCharPref%28siteList3%5Bz%5D%2C%20pref%28%22str3%22%29%29%3B%0A%7D%0A%0Athis.image%20%3D%20pref%28%22buttonIcon%22%29%3B%0A%0Athis.onclick%20%3D%20function%28e%29%20%7B%0A%20%20if%20%28e.button%20%21%3D%3D%200%29%20return%3B%0A%20%20if%20%28wm%28%22useragent%3Adialog%22%29%29%20%7B%0A%20%20%20%20wm%28%22useragent%3Adialog%22%29.focus%28%29%3B%0A%20%20%20%20return%3B%0A%20%20%7D%0A%20%20let%20data%20%3D%20%27%3C%3Fxml%20version%3D%221.0%22%3F%3E%3C%3Fxml-stylesheet%20href%3D%22chrome%3A//global/skin/%22%20type%3D%22text/css%22%3F%3E%5C%0A%20%20%20%20%3Cwindow%20xmlns%3D%22%27%20+%20xulns%20+%20%27%22%20id%3D%22useragent-dialog%22%20windowtype%3D%22useragent%3Adialog%22%20%5C%0A%20%20%20%20%20%20persist%3D%22width%20height%22%20title%3D%22%27%20+%20self.label%20+%20%27%22%20onload%3D%22self.onDialogLoad%28this%29%22%20%5C%0A%20%20%20%20%20%20onclose%3D%22self.onDialogClose%28%29%22%3E%5C%0A%20%20%20%20%20%20%3Chbox%20id%3D%22siteContainer1%22%20class%3D%22hbox%22%20align%3D%22center%22%3E%5C%0A%20%20%20%20%20%20%20%20%3Clabel%20id%3D%22siteListLabel1%22%20class%3D%22label%22%20value%3D%22%27%20+%20gCV%28%22siteListLabel%22%29%20+%20%27%22/%3E%5C%0A%20%20%20%20%20%20%20%20%3Cbutton%20id%3D%22addCurrentSite1%22%20class%3D%22button%22%20label%3D%22%27%20+%20gCV%28%22addCurrentSite%22%29%20+%20%27%22%20%5C%0A%20%20%20%20%20%20%20%20%20%20tooltiptext%3D%22%27%20+%20gCV%28%22addCurrentSiteTip%22%29%20+%20%27%22%20oncommand%3D%22self.onCurrent%28this%29%22/%3E%5C%0A%20%20%20%20%20%20%20%20%3Clabel%20id%3D%22removeLabel1%22%20class%3D%22label%22%20value%3D%22%27%20+%20gCV%28%22removeLabel%22%29%20+%20%27%22/%3E%5C%0A%20%20%20%20%20%20%3C/hbox%3E%5C%0A%20%20%20%20%20%20%3Clabel%20id%3D%22userAgentLabel1%22%20class%3D%22label%22%20value%3D%22%27%20+%20pref%28%22str1%22%29%20+%20%27%22/%3E%5C%0A%20%20%20%20%20%20%3Ctextbox%20id%3D%22siteListTextbox1%22%20class%3D%22textbox%22%20value%3D%22%27%20+%20pref%28%22siteListTextbox1%22%29%20+%20%27%22%20%5C%0A%20%20%20%20%20%20%20%20readonly%3D%22true%22%20multiline%3D%22true%22%20placeholder%3D%22%27%20+%20gCV%28%22placeHolder%22%29%20+%20%27%22%20flex%3D%221%22%20%5C%0A%20%20%20%20%20%20%20%20onchange%3D%22self.onTextbox%28this%29%22/%3E%5C%0A%20%20%20%20%20%20%3Chbox%20id%3D%22siteContainer2%22%20class%3D%22hbox%22%20align%3D%22center%22%3E%5C%0A%20%20%20%20%20%20%20%20%3Clabel%20id%3D%22siteListLabel2%22%20class%3D%22label%22%20value%3D%22%27%20+%20gCV%28%22siteListLabel%22%29%20+%20%27%22/%3E%5C%0A%20%20%20%20%20%20%20%20%3Cbutton%20id%3D%22addCurrentSite2%22%20class%3D%22button%22%20label%3D%22%27%20+%20gCV%28%22addCurrentSite%22%29%20+%20%27%22%20%5C%0A%20%20%20%20%20%20%20%20%20%20tooltiptext%3D%22%27%20+%20gCV%28%22addCurrentSiteTip%22%29%20+%20%27%22%20oncommand%3D%22self.onCurrent%28this%29%22/%3E%5C%0A%20%20%20%20%20%20%20%20%3Clabel%20id%3D%22removeLabel2%22%20class%3D%22label%22%20value%3D%22%27%20+%20gCV%28%22removeLabel%22%29%20+%20%27%22/%3E%5C%0A%20%20%20%20%20%20%3C/hbox%3E%5C%0A%20%20%20%20%20%20%3Clabel%20id%3D%22userAgentLabel2%22%20class%3D%22label%22%20value%3D%22%27%20+%20pref%28%22str2%22%29%20+%20%27%22/%3E%5C%0A%20%20%20%20%20%20%3Ctextbox%20id%3D%22siteListTextbox2%22%20class%3D%22textbox%22%20value%3D%22%27%20+%20pref%28%22siteListTextbox2%22%29%20+%20%27%22%20%5C%0A%20%20%20%20%20%20%20%20readonly%3D%22true%22%20multiline%3D%22true%22%20placeholder%3D%22%27%20+%20gCV%28%22placeHolder%22%29%20+%20%27%22%20flex%3D%221%22%20%5C%0A%20%20%20%20%20%20%20%20onchange%3D%22self.onTextbox%28this%29%22/%3E%5C%0A%20%20%20%20%20%20%3Chbox%20id%3D%22siteContainer3%22%20class%3D%22hbox%22%20align%3D%22center%22%3E%5C%0A%20%20%20%20%20%20%20%20%3Clabel%20id%3D%22siteListLabel3%22%20class%3D%22label%22%20value%3D%22%27%20+%20gCV%28%22siteListLabel%22%29%20+%20%27%22/%3E%5C%0A%20%20%20%20%20%20%20%20%3Cbutton%20id%3D%22addCurrentSite3%22%20class%3D%22button%22%20label%3D%22%27%20+%20gCV%28%22addCurrentSite%22%29%20+%20%27%22%20%5C%0A%20%20%20%20%20%20%20%20%20%20tooltiptext%3D%22%27%20+%20gCV%28%22addCurrentSiteTip%22%29%20+%20%27%22%20oncommand%3D%22self.onCurrent%28this%29%22/%3E%5C%0A%20%20%20%20%20%20%20%20%3Clabel%20id%3D%22removeLabel3%22%20class%3D%22label%22%20value%3D%22%27%20+%20gCV%28%22removeLabel%22%29%20+%20%27%22/%3E%5C%0A%20%20%20%20%20%20%3C/hbox%3E%5C%0A%20%20%20%20%20%20%3Clabel%20id%3D%22userAgentLabel3%22%20class%3D%22label%22%20value%3D%22%27%20+%20pref%28%22str3%22%29%20+%20%27%22/%3E%5C%0A%20%20%20%20%20%20%3Ctextbox%20id%3D%22siteListTextbox3%22%20class%3D%22textbox%22%20value%3D%22%27%20+%20pref%28%22siteListTextbox3%22%29%20+%20%27%22%20%5C%0A%20%20%20%20%20%20%20%20readonly%3D%22true%22%20multiline%3D%22true%22%20placeholder%3D%22%27%20+%20gCV%28%22placeHolder%22%29%20+%20%27%22%20flex%3D%221%22%20%5C%0A%20%20%20%20%20%20%20%20onchange%3D%22self.onTextbox%28this%29%22/%3E%5C%0A%20%20%20%20%20%20%3Chbox%20id%3D%22buttonContainer%22%20class%3D%22hbox%22%20align%3D%22center%22%3E%5C%0A%20%20%20%20%20%20%20%20%3Cbutton%20id%3D%22buttonIcon%22%20class%3D%22button%22%20label%3D%22%27%20+%20gCV%28%22buttonIconLabel%22%29%20+%20%27%22%20%5C%0A%20%20%20%20%20%20%20%20%20%20tooltiptext%3D%22%27%20+%20gCV%28%22buttonIconTip%22%29%20+%20%27%22%20oncommand%3D%22self.onIcon%28this%29%22/%3E%5C%0A%20%20%20%20%20%20%20%20%3Cimage%20id%3D%22imageIcon%22%20class%3D%22image%22%20src%3D%22%27%20+%20pref%28%22buttonIcon%22%29%20+%20%27%22/%3E%5C%0A%20%20%20%20%20%20%20%20%3Cspacer%20id%3D%22buttonSpacer%22%20class%3D%22spacer%22%20flex%3D%221%22/%3E%5C%0A%20%20%20%20%20%20%20%20%3Cbutton%20id%3D%22editorButton%22%20class%3D%22button%22%20label%3D%22%27%20+%20gCV%28%22editorButtonLabel%22%29%20+%20%27%22%20%5C%0A%20%20%20%20%20%20%20%20%20%20tooltiptext%3D%22%27%20+%20gCV%28%22editorButtonTip%22%29%20+%20%27%22%20oncommand%3D%22self.onEditor%28%29%22/%3E%5C%0A%20%20%20%20%20%20%20%20%3Cbutton%20id%3D%22prefsButton%22%20class%3D%22button%22%20label%3D%22%27%20+%20gCV%28%22prefsButtonLabel%22%29%20+%20%27%22%20%5C%0A%20%20%20%20%20%20%20%20%20%20tooltiptext%3D%22%27%20+%20gCV%28%22prefsButtonTip%22%29%20+%20%27%22%20oncommand%3D%22self.onPrefs%28%29%22/%3E%5C%0A%20%20%20%20%20%20%20%20%3Cbutton%20id%3D%22viewButton%22%20class%3D%22button%22%20label%3D%22%27%20+%20gCV%28%22viewButtonLabel%22%29%20+%20%27%22%20%5C%0A%20%20%20%20%20%20%20%20%20%20tooltiptext%3D%22%27%20+%20gCV%28%22sitesUserset%22%29%20+%20%27%22%20oncommand%3D%22self.onView%28%29%22/%3E%5C%0A%20%20%20%20%20%20%20%20%3Cbutton%20id%3D%22doneButton%22%20class%3D%22button%22%20label%3D%22%27%20+%20gCV%28%22doneButtonLabel%22%29%20+%20%27%22%20%5C%0A%20%20%20%20%20%20%20%20%20%20tooltiptext%3D%22%27%20+%20gCV%28%22doneButtonTip%22%29%20+%20%27%22%20oncommand%3D%22self.onDialogDone%28%29%22/%3E%5C%0A%20%20%20%20%20%20%3C/hbox%3E%5C%0A%20%20%20%20%3C/window%3E%27%3B%0A%20%20data%20%3D%20data.replace%28/self/g%2C%20%22opener.document.getElementById%28%27%22%20+%20self.id%20+%20%22%27%29%22%29%3B%0A%20%20let%20url%20%3D%20%22data%3Aapplication/vnd.mozilla.xul+xml%3Btext/plain%2C%22%20+%20encodeURIComponent%28data%29%3B%0A%20%20window.openDialog%28url%2C%20%22%22%2C%20%22chrome%2Cdialog%2Cresizable%2CalwaysRaised%22%29%3B%0A%7D%0A%0Athis.onCurrent%20%3D%20function%28e%29%20%7B%0A%20%20let%20dlg%20%3D%20wm%28%22useragent%3Adialog%22%29%2C%0A%20%20%20%20%20%20list%20%3D%20dlg.document.getElementById%28%22siteListTextbox%22%20+%20e.id.match%28/%5Cd/%29%29%2C%0A%20%20%20%20%20%20str%20%3D%20%22str%22%20+%20e.id.match%28/%5Cd/%29%2C%0A%20%20%20%20%20%20uri%20%3D%20gBrowser.contentDocument.documentURIObject%2C%0A%20%20%20%20%20%20et%20%3D%20Cc%5B%22@mozilla.org/network/effective-tld-service%3B1%22%5D.getService%28Ci.nsIEffectiveTLDService%29%2C%0A%20%20%20%20%20%20eTLD%3B%0A%20%20try%20%7B%20eTLD%20%3D%20et.getBaseDomain%28uri%29%20%7D%20catch%20%28ex%29%20%7B%20eTLD%20%3D%20uri.asciiHost%20%7D%0A%20%20if%20%28%21eTLD%29%20%7B%0A%20%20%20%20let%20bar%20%3D%20gURLBar.value%20+%20%22%20%22%20+%20gCV%28%22alertMsg%22%29%2C%0A%20%20%20%20%20%20%20%20title%20%3D%20this.label%20+%20%22%20Alert%22%3B%0A%20%20%20%20as%28this.image%2C%20title%2C%20bar%2C%20false%2C%20null%2C%20null%2C%20%22%22%29%3B%0A%20%20%20%20return%3B%0A%20%20%7D%0A%20%20if%20%28list.value.match%28eTLD%29%29%20%7B%0A%20%20%20%20list.value%20%3D%20list.value.replace%28eTLD%2C%20%22%22%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.replace%28/%5Cs+/g%2C%20%22%22%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.replace%28/%5E%2C+/%2C%20%22%22%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.replace%28/%2C+%24/g%2C%20%22%22%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.replace%28/%2C+/g%2C%20%22%2C%20%22%29%3B%0A%20%20%20%20gUser.clearUserPref%28eTLD%29%3B%0A%20%20%7D%20else%20%7B%0A%20%20%20%20if%20%28list.value%29%20list.value%20%3D%20list.value%20+%20%22%2C%20%22%20+%20eTLD%3B%0A%20%20%20%20else%20list.value%20%3D%20list.value%20+%20eTLD%3B%0A%20%20%20%20gUser.setCharPref%28eTLD%2C%20str%29%3B%0A%20%20%7D%0A%20%20gRoot.setCharPref%28e.id%2C%20list.value%29%3B%0A%7D%0A%0Athis.onDestroy%20%3D%20function%28reason%29%20%7B%0A%20%20if%20%28reason%20%3D%3D%3D%20%22delete%22%29%20%7B%0A%20%20%20%20if%20%28resetValues%29%20%7B%0A%20%20%20%20%20%20let%20arr%20%3D%20pref%28%22siteListTextbox1%22%29.concat%28pref%28%22siteListTextbox2%22%29%2C%20pref%28%22siteListTextbox3%22%29%29%3B%0A%20%20%20%20%20%20if%20%28arr%29%20%7B%0A%20%20%20%20%20%20%20%20let%20siteList%20%3D%20arr.split%28%22%2C%20%22%29%3B%0A%20%20%20%20%20%20%20%20for%20%28let%20x%20in%20siteList%29%20gUser.clearUserPref%28siteList%5Bx%5D%29%3B%0A%20%20%20%20%7D%20%7D%0A%20%20%20%20if%20%28removePrefs%29%20pb.deleteBranch%28aRoot%29%3B%0A%20%20%20%20unloadSheet%28hTab%29%3B%0A%7D%20%7D%0A%0Athis.onDialogClose%20%3D%20function%28%29%20%7B%0A%20%20let%20dlg%20%3D%20wm%28%22useragent%3Adialog%22%29%2C%0A%20%20%20%20%20%20prefList%20%3D%20gUser.getChildList%28%22%22%2C%20%7B%7D%29%3B%0A%20%20gRoot.setIntPref%28%22dialogLeft%22%2C%20dlg.screenX%29%3B%0A%20%20gRoot.setIntPref%28%22dialogTop%22%2C%20dlg.screenY%29%3B%0A%20%20for%20%28let%20i%20in%20prefList%29%20%7B%0A%20%20%20%20let%20val%20%3D%20gUser.getCharPref%28prefList%5Bi%5D%29%3B%0A%20%20%20%20if%20%28val.match%28/%5Estr%5Cd%24/%29%29%20gUser.clearUserPref%28prefList%5Bi%5D%29%3B%0A%20%20%7D%0A%20%20dlg.close%28%29%3B%0A%7D%0A%0Athis.onDialogDone%20%3D%20function%28%29%20%7B%0A%20%20let%20dlg%20%3D%20wm%28%22useragent%3Adialog%22%29%2C%0A%20%20%20%20%20%20list1%20%3D%20dlg.document.getElementById%28%22siteListTextbox1%22%29%2C%0A%20%20%20%20%20%20list2%20%3D%20dlg.document.getElementById%28%22siteListTextbox2%22%29%2C%0A%20%20%20%20%20%20list3%20%3D%20dlg.document.getElementById%28%22siteListTextbox3%22%29%2C%0A%20%20%20%20%20%20aList1%20%3D%20list1.value.split%28%22%2C%20%22%29%2C%0A%20%20%20%20%20%20aList2%20%3D%20list2.value.split%28%22%2C%20%22%29%2C%0A%20%20%20%20%20%20aList3%20%3D%20list3.value.split%28%22%2C%20%22%29%3B%0A%20%20gRoot.setCharPref%28%22siteListTextbox1%22%2C%20list1.value%29%3B%0A%20%20gRoot.setCharPref%28%22siteListTextbox2%22%2C%20list2.value%29%3B%0A%20%20gRoot.setCharPref%28%22siteListTextbox3%22%2C%20list3.value%29%3B%0A%20%20for%20%28let%20i%20%3D%200%3B%20i%20%3C%20aList1.length%3B%20i++%29%20%7B%0A%20%20%20%20if%20%28%21aList1%5Bi%5D%29%20continue%3B%0A%20%20%20%20gUser.setCharPref%28aList1%5Bi%5D%2C%20pref%28%22str1%22%29%29%3B%0A%20%20%7D%0A%20%20for%20%28let%20j%20%3D%200%3B%20j%20%3C%20aList2.length%3B%20j++%29%20%7B%0A%20%20%20%20if%20%28%21aList2%5Bj%5D%29%20continue%3B%0A%20%20%20%20gUser.setCharPref%28aList2%5Bj%5D%2C%20pref%28%22str2%22%29%29%3B%0A%20%20%7D%0A%20%20for%20%28let%20k%20%3D%200%3B%20k%20%3C%20aList3.length%3B%20k++%29%20%7B%0A%20%20%20%20if%20%28%21aList3%5Bk%5D%29%20continue%3B%0A%20%20%20%20gUser.setCharPref%28aList3%5Bk%5D%2C%20pref%28%22str3%22%29%29%3B%0A%20%20%7D%0A%20%20self.onDialogClose%28%29%3B%0A%7D%0A%0Athis.onDialogLoad%20%3D%20function%28e%29%20%7B%0A%20%20e.moveTo%28pref%28%22dialogLeft%22%29%2C%20pref%28%22dialogTop%22%29%29%3B%0A%7D%0A%0Athis.onEditor%20%3D%20function%28%29%20%7B%0A%20%20if%20%28wm%28%22editor%3Adialog%22%29%29%20%7B%0A%20%20%20%20wm%28%22useragent%3Adialog%22%29.focus%28%29%3B%0A%20%20%20%20return%3B%0A%20%20%7D%0A%20%20let%20data%20%3D%20%27%3C%3Fxml%20version%3D%221.0%22%3F%3E%3C%3Fxml-stylesheet%20href%3D%22chrome%3A//global/skin/%22%20type%3D%22text/css%22%3F%3E%5C%0A%20%20%20%20%3Cwindow%20xmlns%3D%22%27%20+%20xulns%20+%20%27%22%20id%3D%22editor-dialog%22%20windowtype%3D%22editor%3Adialog%22%20persist%3D%22width%20height%22%20%5C%0A%20%20%20%20%20%20title%3D%22%27%20+%20self.label%20+%20%27%20Editor%27%20+%20%27%22%20onload%3D%22self.onEditorLoad%28this%29%22%20onclose%3D%22self.onEditorClose%28%29%22%3E%5C%0A%20%20%20%20%20%20%3Clabel%20id%3D%22editorLabel1%22%20class%3D%22label%22%20value%3D%22%27%20+%20gCV%28%22editorLabel1%22%29%20+%20%27%22/%3E%5C%0A%20%20%20%20%20%20%3Ctextbox%20id%3D%22editorTextbox1%22%20class%3D%22textbox%22%20value%3D%22%27%20+%20pref%28%22str1%22%29%20+%20%27%22%20flex%3D%221%22/%3E%5C%0A%20%20%20%20%20%20%3Clabel%20id%3D%22editorLabel2%22%20class%3D%22label%22%20value%3D%22%27%20+%20gCV%28%22editorLabel2%22%29%20+%20%27%22/%3E%5C%0A%20%20%20%20%20%20%3Ctextbox%20id%3D%22editorTextbox2%22%20class%3D%22textbox%22%20value%3D%22%27%20+%20pref%28%22str2%22%29%20+%20%27%22%20flex%3D%221%22/%3E%5C%0A%20%20%20%20%20%20%3Clabel%20id%3D%22editorLabel3%22%20class%3D%22label%22%20value%3D%22%27%20+%20gCV%28%22editorLabel3%22%29%20+%20%27%22/%3E%5C%0A%20%20%20%20%20%20%3Ctextbox%20id%3D%22editorTextbox3%22%20class%3D%22textbox%22%20value%3D%22%27%20+%20pref%28%22str3%22%29%20+%20%27%22%20flex%3D%221%22/%3E%5C%0A%20%20%20%20%20%20%3Chbox%20id%3D%22buttonContainer%22%20class%3D%22hbox%22%20align%3D%22center%22%3E%5C%0A%20%20%20%20%20%20%20%20%3Cspacer%20id%3D%22editorSpacer%22%20class%3D%22spacer%22%20flex%3D%221%22/%3E%5C%0A%20%20%20%20%20%20%20%20%3Cbutton%20id%3D%22doneButton%22%20class%3D%22button%22%20label%3D%22%27%20+%20gCV%28%22doneButtonLabel%22%29%20+%20%27%22%20%5C%0A%20%20%20%20%20%20%20%20%20%20oncommand%3D%22self.onEditorDone%28%29%22/%3E%5C%0A%20%20%20%20%20%20%3C/hbox%3E%5C%0A%20%20%20%20%3C/window%3E%27%3B%0A%20%20data%20%3D%20data.replace%28/self/g%2C%20%22opener.document.getElementById%28%27%22%20+%20self.id%20+%20%22%27%29%22%29%3B%0A%20%20let%20url%20%3D%20%22data%3Aapplication/vnd.mozilla.xul+xml%3Btext/plain%2C%22%20+%20encodeURIComponent%28data%29%3B%0A%20%20window.openDialog%28url%2C%20%22%22%2C%20%22chrome%2Cdialog%2Cresizable%2CalwaysRaised%22%29%3B%0A%7D%0A%0Athis.onEditorClose%20%3D%20function%28%29%20%7B%0A%20%20let%20edt%20%3D%20wm%28%22editor%3Adialog%22%29%3B%0A%20%20gRoot.setIntPref%28%22editorLeft%22%2C%20edt.screenX%29%3B%0A%20%20gRoot.setIntPref%28%22editorTop%22%2C%20edt.screenY%29%3B%0A%20%20edt.close%28%29%3B%0A%7D%0A%0Athis.onEditorDone%20%3D%20function%28%29%20%7B%0A%20%20let%20dlg%20%3D%20wm%28%22useragent%3Adialog%22%29%2C%0A%20%20%20%20%20%20edt%20%3D%20wm%28%22editor%3Adialog%22%29%2C%0A%20%20%20%20%20%20lab1%20%3D%20dlg.document.getElementById%28%22userAgentLabel1%22%29%2C%0A%20%20%20%20%20%20lab2%20%3D%20dlg.document.getElementById%28%22userAgentLabel2%22%29%2C%0A%20%20%20%20%20%20lab3%20%3D%20dlg.document.getElementById%28%22userAgentLabel3%22%29%2C%0A%20%20%20%20%20%20tb1%20%3D%20edt.document.getElementById%28%22editorTextbox1%22%29%2C%0A%20%20%20%20%20%20tb2%20%3D%20edt.document.getElementById%28%22editorTextbox2%22%29%2C%0A%20%20%20%20%20%20tb3%20%3D%20edt.document.getElementById%28%22editorTextbox3%22%29%3B%0A%20%20gRoot.setCharPref%28%22str1%22%2C%20tb1.value%29%3B%0A%20%20gRoot.setCharPref%28%22str2%22%2C%20tb2.value%29%3B%0A%20%20gRoot.setCharPref%28%22str3%22%2C%20tb3.value%29%3B%0A%20%20lab1.value%20%3D%20tb1.value%3B%0A%20%20lab2.value%20%3D%20tb2.value%3B%0A%20%20lab3.value%20%3D%20tb3.value%3B%0A%20%20self.onEditorClose%28%29%3B%0A%7D%0A%0Athis.onEditorLoad%20%3D%20function%28e%29%20%7B%0A%20%20e.moveTo%28pref%28%22editorLeft%22%29%2C%20pref%28%22editorTop%22%29%29%3B%0A%7D%0A%0Athis.onIcon%20%3D%20function%28e%29%20%7B%0A%20%20let%20win%20%3D%20wm%28%22navigator%3Abrowser%22%29%2C%0A%20%20%20%20%20%20fp%20%3D%20Cc%5B%27@mozilla.org/filepicker%3B1%27%5D.createInstance%28Ci.nsIFilePicker%29%3B%0A%20%20fp.init%28window%2C%20null%2C%20fp.modeOpen%29%3B%0A%20%20fp.appendFilters%28fp.filterImages%29%3B%0A%20%20if%20%28fp.show%28%29%20%21%3D%20fp.returnCancel%29%20%7B%0A%20%20%20%20let%20url%20%3D%20fp.fileURL.spec%3B%0A%20%20%20%20gRoot.setCharPref%28%22buttonIcon%22%2C%20url%29%3B%0A%20%20%20%20win.document.getElementById%28self.id%29.image%20%3D%20url%3B%0A%20%20%20%20e.nextSibling.src%20%3D%20url%3B%0A%7D%20%7D%0A%0Athis.onPrefs%20%3D%20function%28%29%20%7B%0A%20%20let%20win%20%3D%20wm%28%22navigator%3Abrowser%22%29%2C%0A%20%20%20%20%20%20nodes%20%3D%20win.gBrowser.tabContainer.childNodes%2C%0A%20%20%20%20%20%20addTab%20%3D%20true%3B%0A%20%20for%20%28let%20i%20%3D%200%3B%20i%20%3C%20nodes.length%3B%20i++%29%20%7B%0A%20%20%20%20if%20%28nodes%5Bi%5D.linkedBrowser.currentURI.spec.match%28%22about%3Aconfig%22%29%29%20%7B%0A%20%20%20%20%20%20win.gBrowser.selectedTab%20%3D%20nodes%5Bi%5D%3B%0A%20%20%20%20%20%20addTab%20%3D%20false%3B%0A%20%20%7D%20%7D%0A%20%20if%20%28addTab%29%20openUILinkIn%28%22about%3Aconfig%22%2C%20%22tab%22%29%3B%0A%20%20setTimeout%28function%28%29%20%7B%0A%20%20%20%20win.content.document.activeElement.value%20%3D%20%22useragent.override.%22%3B%0A%20%20%20%20win.content.document.getElementById%28%22textbox%22%29.click%28%29%3B%0A%20%20%7D%2C%20250%29%3B%0A%7D%0A%0Athis.onTextbox%20%3D%20function%28e%29%20%7B%0A%20%20switch%20%28e.id%29%20%7B%0A%20%20%20%20case%20%22siteListTextbox1%22%3A%20case%20%22siteListTextbox2%22%3A%20case%20%22siteListTextbox3%22%3A%0A%20%20%20%20%20%20e.value%20%3D%20e.value.replace%28/%5Cs+/g%2C%20%22%22%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.replace%28/%5E%2C+/%2C%20%22%22%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.replace%28/%2C+%24/g%2C%20%22%22%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.replace%28/%2C+/g%2C%20%22%2C%20%22%29%3B%0A%7D%20%7D%0A%0Athis.onView%20%3D%20function%28%29%20%7B%0A%20%20let%20prefList%20%3D%20gUser.getChildList%28%22%22%2C%20%7B%7D%29%2C%0A%20%20%20%20%20%20info%20%3D%20gCV%28%22infoMsg%22%29%2C%0A%20%20%20%20%20%20title%20%3D%20self.label%20+%20%22%20%22%20+%20gCV%28%22infoLabel%22%29%2C%0A%20%20%20%20%20%20arr%20%3D%20%5B%5D%3B%0A%20%20for%20%28let%20i%20in%20prefList%29%20%7B%0A%20%20%20%20let%20val%20%3D%20gUser.getCharPref%28prefList%5Bi%5D%29%3B%0A%20%20%20%20if%20%28gUser.prefHasUserValue%28prefList%5Bi%5D%29%29%20arr.push%28prefList%5Bi%5D%20+%20%22%3A%5Cn%20%20%20%22%20+%20val%29%3B%0A%20%20%7D%0A%20%20arr%20%3D%20arr.join%28%22%5Cn%22%29%3B%0A%20%20if%20%28arr%29%20%7B%0A%20%20%20%20if%20%28arr.match%28%22str1%22%29%29%20arr%20%3D%20arr.replace%28/str1/g%2C%20pref%28%22str1%22%29%29%3B%0A%20%20%20%20if%20%28arr.match%28%22str2%22%29%29%20arr%20%3D%20arr.replace%28/str2/g%2C%20pref%28%22str2%22%29%29%3B%0A%20%20%20%20if%20%28arr.match%28%22str3%22%29%29%20arr%20%3D%20arr.replace%28/str3/g%2C%20pref%28%22str3%22%29%29%3B%0A%20%20%20%20alert%28pref%28%22sitesUserset%22%29%20+%20%22%5Cn%5Cn%22%20+%20arr%29%3B%0A%20%20%7D%20else%20as%28self.image%2C%20title%2C%20info%2C%20false%2C%20null%2C%20null%2C%20%22%22%29%3B%0A%7D%5D%5D%3E%3C/initcode%3E%0A%20%20%3Ccode%3E%3C%21%5BCDATA%5B/*%20CODE%20*/%5D%5D%3E%3C/code%3E%0A%20%20%3Caccelkey%3E%3C%21%5BCDATA%5B%5D%5D%3E%3C/accelkey%3E%0A%20%20%3Chelp%3E%3C%21%5BCDATA%5B%23useragent-dialog%20%7B%0A%20%20min-height%3A%20313px%20%21important%3B%0A%20%20min-width%3A%20562px%20%21important%3B%0A%20%20padding%3A%204px%20%21important%3B%0A%7D%0A%0A%23useragent-dialog%20%5Bid%5E%3D%22userAgentLabel%22%5D.label%20%7B%0A%20%20font-weight%3A%20bold%20%21important%3B%0A%7D%0A%0A%23useragent-dialog%20%23imageIcon.image%20%7B%0A%20%20max-height%3A%2032px%20%21important%3B%0A%20%20max-width%3A%2032px%20%21important%3B%0A%7D%0A%0A%23useragent-dialog%20.textbox%20%7B%0A%20%20margin-bottom%3A%2016px%20%21important%3B%0A%20%20height%3A%2022px%20%21important%3B%0A%20%20pointer-events%3A%20none%20%21important%3B%0A%7D%0A%0A%23useragent-dialog%20.button%20%7B%0A%20%20min-width%3A%2042px%20%21important%3B%0A%7D%0A%0A%23editor-dialog%20%7B%0A%20%20min-height%3A%20219px%20%21important%3B%0A%20%20min-width%3A%20562px%20%21important%3B%0A%20%20padding%3A%204px%20%21important%3B%0A%7D%0A%0A%23editor-dialog%20.textbox%20%7B%0A%20%20margin-bottom%3A%2016px%20%21important%3B%0A%20%20height%3A%2022px%20%21important%3B%0A%7D%0A%5D%5D%3E%3C/help%3E%0A%20%20%3CCSS%3E%3C%21%5BCDATA%5B%5D%5D%3E%3C/CSS%3E%0A%20%20%3CxCSS%3E%3C%21%5BCDATA%5B%5D%5D%3E%3C/xCSS%3E%0A%20%20%3CCSS2%3E%3C%21%5BCDATA%5B%5D%5D%3E%3C/CSS2%3E%0A%20%20%3CxCSS2%3E%3C%21%5BCDATA%5B%5D%5D%3E%3C/xCSS2%3E%0A%20%20%3CCSS3%3E%3C%21%5BCDATA%5B%5D%5D%3E%3C/CSS3%3E%0A%20%20%3CxCSS3%3E%3C%21%5BCDATA%5B%5D%5D%3E%3C/xCSS3%3E%0A%20%20%3CCSS4%3E%3C%21%5BCDATA%5B%5D%5D%3E%3C/CSS4%3E%0A%20%20%3CxCSS4%3E%3C%21%5BCDATA%5B%5D%5D%3E%3C/xCSS4%3E%0A%20%20%3CCSS5%3E%3C%21%5BCDATA%5B%5D%5D%3E%3C/CSS5%3E%0A%20%20%3CxCSS5%3E%3C%21%5BCDATA%5B%5D%5D%3E%3C/xCSS5%3E%0A%20%20%3CHTML%3E%3C%21%5BCDATA%5B%5D%5D%3E%3C/HTML%3E%0A%20%20%3CxHTML%3E%3C%21%5BCDATA%5B%5D%5D%3E%3C/xHTML%3E%0A%20%20%3Cnotes%3E%3C%21%5BCDATA%5B/*%20Notes%20*/%5D%5D%3E%3C/notes%3E%0A%20%20%3Cattributes/%3E%0A%3C/custombutton%3E
