custombutton://%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%3F%3E%0D%0A%3Ccustombutton%20xmlns%3Acb%3D%22http%3A//xsms.nm.ru/custombuttons/%22%3E%0A%20%20%3Cname%3EToggle%20Toolbar%28s%29%3C/name%3E%0A%20%20%3Cimage%3E%3C%21%5BCDATA%5Bdata%3Aimage/png%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAIEUlEQVR42tWWeWwU9xXHv3Pt7K7X6/Wx67WxF3zUHEYYTLAgkHCoKoSUkgKNMDQlKX9UasUfdnopraqqqqISMA5RFLVQEG5ESgo2VDFQIAEsxxUYfFB84ROv8bH2Xvbu7D07fbMSbdRSwEVq1JFWY3uff+/ze+/7DgZf8sP8XwH4DlU9L/v8tqgldVfI694Sv3SVTmARW7kCjDljX37lT95/aFtR8b3FbnfoDcnvqXRMumA0miCKzNm6uvpt/xWA6twdj+7BwMBSzuWyCYpi5bQG8MuXw0unhOTYvgWVP0wAVFb+4JO+3oF5Mz7fvKQkg6GoaCGKi4vR3NyMo0ePMrMCCJz88GuKTnxZ7upa7hkamq9EosakdDNnyMri+PQMKFYr+vr70WMf7vTk5tov3mjMCEuhYr0+SW+xWLFgwYKEc7PZjMOHD88OYOrMyWrNyFgJ55peGLbft4Y4FlxeAbRFRWBSTIgEAuDo03S7BX/t70NfLAI2zYQkikxeXh4KCgqQlZWFpKQkRKNR1NTUPBnA2dzAZZStlScu1F5gevq+KgwMC7xnGlIsCnH18xCXlCCqEeEYHcXY8DB4jwc3WlvRHAyCz85B8eJFKCTHycnJUJQ4vF4vXC53AuDevXtPFwHHhdpbcmv7Mr6nnxNjcbA5uYjMyYbhxbXgMjLgHRpCZ0sLetva4JmeRl84jGBaKgqKF6KsdEXi5h6PR+nv75P7e3sx7phgOU5gY7HYkwEcHx2PMe8f4ZQsq6LTGxjtomKwpaVAdhZYswVhtxv2zk60k/O2jg70+P3IzM+HLW8erKSHzEwrLBYLhoaGlK6Ou4nzeYEdGBwcLOAF3ZMBJlevirP0ZzG/AMLSpQw3fz45NgMGA1jK5UhPDz5raMC1W7fwQJJgKyzE4pISzJ07FyaTCYIgwE9QZ86coQj0/5aiEaTcv3npL+e8Z2rPpzwRwFNaqggrVkCj3jo9HTGfDzIJTZuTA54E1UuK/7SpCU12O9iUFJSQc41Gg1AoBJZlkZaWRqwGNDY2KmNjYwfr6up+/Dih/xuA64UXFP3GjQDdLOB0ItDdDY5ulEZAIqm/i4R35eZNtJD4jARUWPQVNd+YmBhHPA7YbDbkEGx3d7fidrurjh079iP13PbWRkMsJuO5snX+xwOUlSm6lzYjbLXARc5kah76YAjpmzZBR+noGBnBp7dvo4UiI2ZmwkRlN01CVCHU8Ofk2JCbmwvKuUIVUK2Gf1YRcKxapYhr1iCUnRmZejAS0X12jU0OhHSGV15hdBSV3okJfN7ejia/D9PGFFlRZImuTo1RpkxoObM5M1H7qghnZmaqT58+PTuAsW/vjrJFhUw0N/uGe2hoNPXkqQItuGVJmzezOgrvGAmvbaBfaXRNyZ0K64yEQlf1ybpCjucWUKkZjcZUkk46RkZGFJ/PV11fXz9rACW+cUNbzmt7S9XfJ3j+oJCZWandtInRZWfDL3Do9fkid+z3J296fNeOXL78HdXu1Ve/OUwasGm1SYkmND4+rkiSVH3lypXZAfzrQwAHBIvlTe369YyOmtC0VsQ4FMei/QesX7TbuXP7cCwWtzEMD61Wi6mpKYUqo/r69evPBjBOEdCmp1eKBEBveLUaTPGcff7+g3PV73fvKWdP1vwxXl6+wx6JyLkMwyXK0uVyJQAaGhqeOQJVYnp6hRoBkWrcqxPhFHh70W8OJABef30Xc+LER8quXd9KAADsPwACgdA7jY0NP302AJatEs3mCnHDBkZLAB5RgINl7YsOHpr7RTuKwHAsKttAKVABnE4ndQXUXLp06bvPHAENAWjXrk2kwM0oGItERpYc+b3toU3lzm21Ewy7IhJVI/DPFMyZY+04frxmiWpDG9IHo/ZR/Km2/vuzAnCIYhVvsVToV65kxNRUzETCcEh+55xVqw8/tPlF8+fL3Az74kwsnhGPxsHzfGIe5OdTU8qxIiZHqSwfwOV0o7bu/Ow2IofJVEXjrcJYXMyINIyUSASBgCS7qRQltzMscRxa5mSJd5KTNeOywkUDYdoDlMQnQrYsFIg6QREEPnHe2bPn2VkBTKWlVcWt1gpjUREj6vWgzQLhgKQ4qRX7PC5EaADdov7QmpKMsViceQigPiRC+jlKZalR9HpR1QTOnbvIPzXAyN69b8lO51ZRkp5L0+lYDfX6ME1GiTYcdnwM3ow0uNauQbtvBk1SCI5gBDItJ+pkjFNX4jiG5oOqCSFK7wE6so4AfvZUAP79+39J0+RlOBwL2YkJvRiJMFE6XJ6chDAwiDGNgNHCPHi2bkGnx4u28UlM0FsFVAHoxrQL6mgVFylLTBfLcvUU/l89VRX4Dx36OSRpB7WzIsbh0LHklFSFMK1U8XA4GPb7pU5TCt9aVGAKZlrwwB/AqMMJx9QU/VuQbq7QPEghAIMkitwd6o5/JufvPMrXIwGkd989FR4e/np4YCBJc/8+NJKkMJRX/7JlMmu1Xh3Vau+0iRprr8Bus98f0jknnYzX5WWo99NSAsVoTFZMJkNEFLUXaURf/Pjjs0f/U6QfCRB4770/zNy9+w2moSFFT0slnabQohJNW7/+rpBpfku/+7XLqt3bb//6YlfX31YODg4bp6dnWLX+s7OtcdoHApT32xwX31dd/buOx+nsiQC6wUG4161TLG/sOUFfnWJZ/qq2vDy2ffsWtrb2k/jWrZtuTU66lwaDId5sTseSJSWkv+AOsu0rK1vXXV5eLs8a4H/5fOkAfwdMEttORy+DBgAAAABJRU5ErkJggg%3D%3D%5D%5D%3E%3C/image%3E%0A%20%20%3Cmode%3E0%3C/mode%3E%0A%20%20%3Cinitcode%3E%3C%21%5BCDATA%5B%22use%20strict%22%3B%0A%0Avar%20%7Bclasses%3A%20Cc%2C%20interfaces%3A%20Ci%2C%20utils%3A%20Cu%7D%20%3D%20Components%2C%0A%20%20%20%20helpCSS%20%3D%20encodeURIComponent%28this.Help%29%2C%0A%20%20%20%20filterCSS%20%3D%20encodeURIComponent%28%22%23%22%20+%20this.id%20+%20%22%3Ahover%20%7Bfilter%3A%20hue-rotate%2890deg%29%7D%22%29%3B%0A%0Aconst%20fp%20%3D%20Cc%5B%22@mozilla.org/filepicker%3B1%22%5D.createInstance%28Ci.nsIFilePicker%29%2C%0A%20%20%20%20%20%20ios%20%3D%20Cc%5B%22@mozilla.org/network/io-service%3B1%22%5D.getService%28Ci.nsIIOService%29%2C%0A%20%20%20%20%20%20sss%20%3D%20Cc%5B%22@mozilla.org/content/style-sheet-service%3B1%22%5D.getService%28Ci.nsIStyleSheetService%29%2C%0A%20%20%20%20%20%20wm%20%3D%20Cc%5B%22@mozilla.org/appshell/window-mediator%3B1%22%5D.getService%28Ci.nsIWindowMediator%29.getMostRecentWindow%3B%0A%20%20%20%20%0Apref.root%20%3D%20%22extensions.custombuttons.Toggle_Toolbar.%22%3B%0Apref.defaults%20%3D%20%7B%0A%20%20applyFilter%3A%20true%2C%0A%20%20applyFilterLabel%3A%20%22Apply%20filter%22%2C%0A%20%20image16%3A%20%22data%3Aimage/png%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAADYElEQVR42m2SX0xbdRTHv797e9t729vaMctKGV1CsMNWCBnOBNyGU%5C%0Ax8gE9jCRoAIWUz2MJctbj74ur1JmvgvxkSUGYIxqUFlkkwYwdBkW7IxdagtyIZdW0fX0fbWwO3W2/b+dttkCgnn6fc7J+eT7znnS7BFpC9c6MmVb+vL+MbaQRgU2ttOV59779On%5C%0A9aNdHTT+MInaWjfIxkb5+28/LgSDjam/lvaatttY6wt1LLXbMfHzTECqqoqMz0y3GI0m44EDr8Dj8YDjOJDETT+bTyQmyOKd14Vbv3NyPgfLyZPI6Q347fp16CQJn1y7Bp1jJzo%5C%0A722E2myFJKSSTKQiCEST+zcU8vvuREYwiMb7ZDzgqkGN1iAQC+Gp0FIvr69j72quwa0rq6uoRCoXoYvDPXxmWWO12RzV5+HKTKlTXgGtoINy+fYAo4n40ihm/H6Ozs3DW1OBQRw%5C%0AesViuy2SzGxsaoFh+OjIy8OzM9IZHk/v3UeOoUMokEsnNzKNuzB8sGA6Zv3MAdnkeN6zksLAShqkBzc7P2XqBer5cp7uzWzVmRxJuaKO3uUlb/iSrlEz+ZxMOHSVRTcfX2bVxmm%5C%0AAKlBZkWcia9nmfr6xtKIwwPDzNPF0+kjz74Zds75xqLn2Rlpcq3tpLCriosra0pQ/N/+IauXBno7j4S1hQ4bTY7YrEYHR8f/x+w8YxJh0PlDx4kys5KxEDj7kGvvZjv6ekK5/Oq%5C%0AUxBErK6u0snJya0B0o4dJcCjygokOF3E9b531/HjfURRcmFFKVRpY2jnS9KpqamtAamKCpVvaSGZZ8uwoijR+qEvncV8X+/RiJIrAoRNgO6uNz7bBIi7XKrF4yF6zWGZjFyIhkN%5C%0ArMsviYq3LHCtQVpEfQzsh8koWBoGjHKfbrCDudqsWl4sYNEA2I9NQ5B4UhsHnz+/GSl4lRUDJ8vIaeF5PjUaDWgKsDw6ep+n0IWZ+vtGgKOSxZiRu+W/MuV2QNPt+HVzCAymNf1%5C%0AMpaE0oK7Nqwkjw0qXJl0qA1Nmz69nlZZMYCFCiScy0tU3f5/l5n8i/HbkXEu4u3GVkWdbcaFatVlERRfMZn++HL/5b4oMTJ9LE73/mkdNJbceOpVmLpZzv7c0Xa52drXPh8MqLN%5C%0Att2DAy8tdTf379749hPABVsewnVBi10AAAAAElFTkSuQmCC%22%2C%0A%20%20image32%3A%20%22data%3Aimage/png%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAIEUlEQVR42tWWeWwU9xXHv3Pt7K7X6/Wx67WxF3zUHEYYTLAgkHCoK%5C%0AoSUkgKNMDQlKX9UasUfdnopraqqqqISMA5RFLVQEG5ESgo2VDFQIAEsxxUYfFB84ROv8bH2Xvbu7D07fbMSbdRSwEVq1JFWY3uff+/ze+/7DgZf8sP8XwH4DlU9L/v8tqgldVfI%5C%0A694Sv3SVTmARW7kCjDljX37lT95/aFtR8b3FbnfoDcnvqXRMumA0miCKzNm6uvpt/xWA6twdj+7BwMBSzuWyCYpi5bQG8MuXw0unhOTYvgWVP0wAVFb+4JO+3oF5Mz7fvKQkg6G%5C%0AoaCGKi4vR3NyMo0ePMrMCCJz88GuKTnxZ7upa7hkamq9EosakdDNnyMri+PQMKFYr+vr70WMf7vTk5tov3mjMCEuhYr0+SW+xWLFgwYKEc7PZjMOHD88OYOrMyWrNyFgJ55peGL%5C%0Abft4Y4FlxeAbRFRWBSTIgEAuDo03S7BX/t70NfLAI2zYQkikxeXh4KCgqQlZWFpKQkRKNR1NTUPBnA2dzAZZStlScu1F5gevq+KgwMC7xnGlIsCnH18xCXlCCqEeEYHcXY8DB4j%5C%0Awc3WlvRHAyCz85B8eJFKCTHycnJUJQ4vF4vXC53AuDevXtPFwHHhdpbcmv7Mr6nnxNjcbA5uYjMyYbhxbXgMjLgHRpCZ0sLetva4JmeRl84jGBaKgqKF6KsdEXi5h6PR+nv75P7%5C%0Ae3sx7phgOU5gY7HYkwEcHx2PMe8f4ZQsq6LTGxjtomKwpaVAdhZYswVhtxv2zk60k/O2jg70+P3IzM+HLW8erKSHzEwrLBYLhoaGlK6Ou4nzeYEdGBwcLOAF3ZMBJlevirP0ZzG%5C%0A/AMLSpQw3fz45NgMGA1jK5UhPDz5raMC1W7fwQJJgKyzE4pISzJ07FyaTCYIgwE9QZ86coQj0/5aiEaTcv3npL+e8Z2rPpzwRwFNaqggrVkCj3jo9HTGfDzIJTZuTA54E1UuK/7%5C%0ASpCU12O9iUFJSQc41Gg1AoBJZlkZaWRqwGNDY2KmNjYwfr6up+/Dih/xuA64UXFP3GjQDdLOB0ItDdDY5ulEZAIqm/i4R35eZNtJD4jARUWPQVNd+YmBhHPA7YbDbkEGx3d7fid%5C%0Arurjh079iP13PbWRkMsJuO5snX+xwOUlSm6lzYjbLXARc5kah76YAjpmzZBR+noGBnBp7dvo4UiI2ZmwkRlN01CVCHU8Ofk2JCbmwvKuUIVUK2Gf1YRcKxapYhr1iCUnRmZejAS%5C%0A0X12jU0OhHSGV15hdBSV3okJfN7ejia/D9PGFFlRZImuTo1RpkxoObM5M1H7qghnZmaqT58+PTuAsW/vjrJFhUw0N/uGe2hoNPXkqQItuGVJmzezOgrvGAmvbaBfaXRNyZ0K64y%5C%0AEQlf1ybpCjucWUKkZjcZUkk46RkZGFJ/PV11fXz9rACW+cUNbzmt7S9XfJ3j+oJCZWandtInRZWfDL3Do9fkid+z3J296fNeOXL78HdXu1Ve/OUwasGm1SYkmND4+rkiSVH3lyp%5C%0AXZAfzrQwAHBIvlTe369YyOmtC0VsQ4FMei/QesX7TbuXP7cCwWtzEMD61Wi6mpKYUqo/r69evPBjBOEdCmp1eKBEBveLUaTPGcff7+g3PV73fvKWdP1vwxXl6+wx6JyLkMwyXK0%5C%0AuVyJQAaGhqeOQJVYnp6hRoBkWrcqxPhFHh70W8OJABef30Xc+LER8quXd9KAADsPwACgdA7jY0NP302AJatEs3mCnHDBkZLAB5RgINl7YsOHpr7RTuKwHAsKttAKVABnE4ndQXU%5C%0AXLp06bvPHAENAWjXrk2kwM0oGItERpYc+b3toU3lzm21Ewy7IhJVI/DPFMyZY+04frxmiWpDG9IHo/ZR/Km2/vuzAnCIYhVvsVToV65kxNRUzETCcEh+55xVqw8/tPlF8+fL3Az%5C%0A74kwsnhGPxsHzfGIe5OdTU8qxIiZHqSwfwOV0o7bu/Ow2IofJVEXjrcJYXMyINIyUSASBgCS7qRQltzMscRxa5mSJd5KTNeOywkUDYdoDlMQnQrYsFIg6QREEPnHe2bPn2VkBTK%5C%0AWlVcWt1gpjUREj6vWgzQLhgKQ4qRX7PC5EaADdov7QmpKMsViceQigPiRC+jlKZalR9HpR1QTOnbvIPzXAyN69b8lO51ZRkp5L0+lYDfX6ME1GiTYcdnwM3ow0uNauQbtvBk1SC%5C%0AI5gBDItJ+pkjFNX4jiG5oOqCSFK7wE6so4AfvZUAP79+39J0+RlOBwL2YkJvRiJMFE6XJ6chDAwiDGNgNHCPHi2bkGnx4u28UlM0FsFVAHoxrQL6mgVFylLTBfLcvUU/l89VRX4%5C%0ADx36OSRpB7WzIsbh0LHklFSFMK1U8XA4GPb7pU5TCt9aVGAKZlrwwB/AqMMJx9QU/VuQbq7QPEghAIMkitwd6o5/JufvPMrXIwGkd989FR4e/np4YCBJc/8+NJKkMJRX/7JlMmu%5C%0A1Xh3Vau+0iRprr8Bus98f0jknnYzX5WWo99NSAsVoTFZMJkNEFLUXaURf/Pjjs0f/U6QfCRB4770/zNy9+w2moSFFT0slnabQohJNW7/+rpBpfku/+7XLqt3bb//6YlfX31YODg%5C%0A4bp6dnWLX+s7OtcdoHApT32xwX31dd/buOx+nsiQC6wUG4161TLG/sOUFfnWJZ/qq2vDy2ffsWtrb2k/jWrZtuTU66lwaDId5sTseSJSWkv+AOsu0rK1vXXV5eLs8a4H/5fOkAf%5C%0AwdMEttORy+DBgAAAABJRU5ErkJggg%3D%3D%22%2C%0A%20%20helpTabCSS%3A%20true%2C%0A%20%20helpTabLabel%3A%20%22Help%20tab%20css%22%2C%0A%20%20largeIcon%3A%20%22Large%20icon%22%2C%0A%20%20smallIcon%3A%20%22Small%20icon%22%2C%0A%20%20toggle%3A%20false%2C%0A%20%20toolbarIcon%3A%2016%2C%0A%20%20toolbarIconLabel%3A%20%22Toolbar%20icon%3A%22%2C%0A%20%20toolbars%3A%20%22PersonalToolbar%22%2C%0A%20%20toolbarsLabel%3A%20%22Toolbar%20id%27s%20to%20toggle%22%0A%7D%0A%0Apref.observe%20%3D%20function%28prefs%2C%20callback%29%20%7B%0A%20%20let%20%7Broot%7D%20%3D%20pref%3B%0A%20%20function%20observe%28subject%2C%20topic%2C%20data%29%20%7B%0A%20%20%20%20if%20%28topic%20%21%3D%3D%20%22nsPref%3Achanged%22%29%20return%3B%0A%20%20%20%20let%20pref%20%3D%20data.slice%28root.length%29%3B%0A%20%20%20%20if%20%28prefs.indexOf%28pref%29%20%3D%3D%3D%20-1%29%20return%3B%0A%20%20%20%20callback%28pref%29%3B%0A%20%20%7D%0A%20%20Services.prefs.addObserver%28root%2C%20observe%2C%20false%29%3B%0A%20%20unload%20%3D%3E%20Services.prefs.removeObserver%28root%2C%20observe%29%3B%0A%7D%0A%0Afor%20%28let%20key%20in%20pref.defaults%29%20%7B%0A%20%20if%20%28pref.defaults.hasOwnProperty%28key%29%29%20%7B%0A%20%20%20%20let%20val%20%3D%20pref.defaults%5Bkey%5D%3B%0A%20%20%20%20switch%20%28typeof%20val%29%20%7B%0A%20%20%20%20%20%20case%20%22boolean%22%3A%0A%20%20%20%20%20%20%20%20Services.prefs.getDefaultBranch%28pref.root%29.setBoolPref%28key%2C%20val%29%3B%0A%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20case%20%22number%22%3A%0A%20%20%20%20%20%20%20%20Services.prefs.getDefaultBranch%28pref.root%29.setIntPref%28key%2C%20val%29%3B%0A%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20case%20%22string%22%3A%0A%20%20%20%20%20%20%20%20let%20str%20%3D%20Cc%5B%22@mozilla.org/supports-string%3B1%22%5D.createInstance%28Ci.nsISupportsString%29%3B%0A%20%20%20%20%20%20%20%20str.data%20%3D%20val%3B%0A%20%20%20%20%20%20%20%20Services.prefs.getDefaultBranch%28pref.root%29.setComplexValue%28%28key%29%2C%20Ci.nsISupportsString%2C%20str%29%3B%0A%20%20%20%20%20%20%20%20break%3B%0A%7D%20%7D%20%7D%0A%0Afunction%20pref%28key%29%20%7B%0A%20%20let%20%7Bbranch%2C%20defaults%7D%20%3D%20pref%3B%0A%20%20if%20%28branch%20%3D%3D%20null%29%20branch%20%3D%20Services.prefs.getBranch%28pref.root%29%3B%0A%20%20switch%20%28typeof%20defaults%5Bkey%5D%29%20%7B%0A%20%20%20%20case%20%22boolean%22%3A%20return%20branch.getBoolPref%28key%29%3B%0A%20%20%20%20case%20%22number%22%3A%20return%20branch.getIntPref%28key%29%3B%0A%20%20%20%20case%20%22string%22%3A%20return%20branch.getComplexValue%28key%2C%20Ci.nsISupportsString%29.data%3B%0A%20%20%7D%0A%20%20return%20null%3B%0A%7D%0A%0Afunction%20getSS%28filepath%29%20%7Breturn%20ios.newURI%28%22data%3Atext/css%2C%22%20+%20filepath%2C%20null%2C%20null%29%7D%0A%0Afunction%20loadSheet%28filepath%29%20%7Bsss.loadAndRegisterSheet%28getSS%28filepath%29%2C%20sss.USER_SHEET%29%7D%0A%0Afunction%20unloadSheet%28filepath%29%20%7B%0A%20%20let%20uri%20%3D%20getSS%28filepath%29%3B%0A%20%20if%20%28sss.sheetRegistered%28uri%2C%20sss.USER_SHEET%29%29%20sss.unregisterSheet%28uri%2C%20sss.USER_SHEET%29%3B%0A%7D%0A%0Afunction%20loadAndObserve%28prefName%2C%20filepath%29%20%7B%0A%20%20if%20%28pref%28prefName%29%29%20loadSheet%28filepath%29%3B%0A%20%20pref.observe%28%5BprefName%5D%2C%20function%28%29%20%7Bpref%28prefName%29%20%3F%20loadSheet%28filepath%29%20%3A%20unloadSheet%28filepath%29%7D%29%3B%0A%20%20unload%20%3D%3E%20unloadSheet%28filepath%29%3B%0A%7D%0A%0Afunction%20unload%28callback%2C%20container%29%20%7B%0A%20%20let%20unloaders%20%3D%20unload.unloaders%3B%0A%20%20if%20%28unloaders%20%3D%3D%20null%29%20unloaders%20%3D%20unload.unloaders%20%3D%20%5B%5D%3B%0A%20%20if%20%28callback%20%3D%3D%20null%29%20%7B%0A%20%20%20%20unloaders.slice%28%29.forEach%28unloader%20%3D%3E%20unloader%28%29%29%3B%0A%20%20%20%20unloaders.length%20%3D%200%3B%0A%20%20%20%20return%3B%0A%20%20%7D%0A%20%20if%20%28container%20%21%3D%20null%29%20%7B%0A%20%20%20%20container.addEventListener%28%22unload%22%2C%20removeUnloader%2C%20false%29%3B%0A%20%20%20%20let%20origCallback%20%3D%20callback%3B%0A%20%20%20%20callback%20%3D%20function%28%29%20%7B%0A%20%20%20%20%20%20container.removeEventListener%28%22unload%22%2C%20removeUnloader%2C%20false%29%3B%0A%20%20%20%20%20%20origCallback%28%29%3B%0A%20%20%7D%20%7D%0A%20%20function%20unloader%28%29%20%7B%0A%20%20%20%20try%20%7B%0A%20%20%20%20%20%20callback%28%29%3B%0A%20%20%20%20%7D%20catch%28ex%29%20%7B%7D%0A%20%20%7D%0A%20%20unloaders.push%28unloader%29%3B%0A%20%20function%20removeUnloader%28%29%20%7B%0A%20%20%20%20let%20index%20%3D%20unloaders.indexOf%28unloader%29%3B%0A%20%20%20%20if%20%28index%20%21%3D%3D%20-1%29%20unloaders.splice%28index%2C%201%29%3B%0A%20%20%7D%0A%20%20return%20removeUnloader%3B%0A%7D%0A%0Avar%20gRoot%20%3D%20Services.prefs.getBranch%28pref.root%29%2C%0A%20%20%20%20toggler%20%3D%20pref%28%22toolbars%22%29.replace%28/%5Cs+/g%2C%20%22%22%29.split%28%22%2C%22%29%3B%0A%0Afor%20%28let%20i%20in%20toggler%29%20%7B%0A%20%20let%20tb%20%3D%20document.getElementById%28toggler%5Bi%5D%29%3B%0A%20%20if%20%28tb.id%20%3D%3D%3D%20this.parentNode.id%29%20continue%3B%0A%20%20setToolbarVisibility%28tb%2C%20tb.collapsed%20%3D%20%21pref%28%22toggle%22%29%29%3B%0A%7D%0A%0Apref%28%22toolbarIcon%22%29%20%21%3D%3D%2016%20%3F%20this.image%20%3D%20pref%28%22image32%22%29%20%3A%20this.image%20%3D%20pref%28%22image16%22%29%3B%0A%0AloadAndObserve%28%22applyFilter%22%2C%20filterCSS%29%3B%0AloadAndObserve%28%22helpTabCSS%22%2C%20helpCSS%29%3B%0A%0Athis.tooltipText%20%3D%20this.label%20+%20%22%20%3A%3A%20Left-click%20+%20Ctrl%20or%20Middle-click%20for%20Settings%5Cn%20%5Cu2022%20%22%20+%20pref%28%22toolbars%22%29.replace%28/%2C/g%2C%20%22%20%5Cn%20%5Cu2022%20%22%29%3B%0A%0Athis.getImage%20%3D%20function%28%29%20%7B%20pref%28%22toolbarIcon%22%29%20%21%3D%3D%2016%20%3F%20this.image%20%3D%20pref%28%22image32%22%29%20%3A%20this.image%20%3D%20pref%28%22image16%22%29%20%7D%0A%0Athis.onclick%20%3D%20function%28e%29%20%7B%0A%20%20if%20%28e.button%20%3D%3D%3D%200%20%26%26%20%21e.ctrlKey%29%20%7B%0A%20%20%20%20let%20bool%20%3D%20pref%28%22toggle%22%29%20%21%3D%3D%20true%20%3F%20true%20%3A%20false%3B%0A%20%20%20%20Services.prefs.getBranch%28pref.root%29.setBoolPref%28%22toggle%22%2C%20bool%29%3B%0A%20%20%20%20for%20%28let%20i%20in%20toggler%29%20%7B%0A%20%20%20%20%20%20let%20tb%20%3D%20document.getElementById%28toggler%5Bi%5D%29%3B%0A%20%20%20%20%20%20if%20%28tb.id%20%3D%3D%3D%20this.parentNode.id%29%20continue%3B%0A%20%20%20%20%20%20setToolbarVisibility%28tb%2C%20tb.collapsed%20%3D%20%21bool%29%3B%0A%20%20%7D%20%7D%0A%20%20if%20%28e.button%20%3D%3D%3D%200%20%26%26%20e.ctrlKey%20%7C%7C%20e.button%20%3D%3D%3D%201%29%20%7B%0A%20%20%20%20if%20%28wm%28%22toggle%3Atoolbar%22%29%29%20%7B%0A%20%20%20%20%20%20wm%28%22toggle%3Atoolbar%22%29.focus%28%29%3B%0A%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%0A%20%20%20%20let%20data%20%3D%20%27%3C%3Fxml%20version%3D%221.0%22%3F%3E%3C%3Fxml-stylesheet%20href%3D%22chrome%3A//global/skin/%22%20type%3D%22text/css%22%3F%3E%5C%0A%20%20%20%20%20%20%3Cwindow%20xmlns%3D%22%27%20+%20xulns%20+%20%27%22%20id%3D%22toggle-toolbar%22%20windowtype%3D%22toggle%3Atoolbar%22%20%5C%0A%20%20%20%20%20%20%20%20persist%3D%22screenX%20screenY%20width%20height%22%20title%3D%22%27%20+%20this.label%20+%20%27%22%3E%5C%0A%20%20%20%20%20%20%20%20%3Chbox%20id%3D%22hbox1%22%20class%3D%22hbox%22%20align%3D%22center%22%20pack%3D%22center%22%3E%5C%0A%20%20%20%20%20%20%20%20%20%20%3Clabel%20id%3D%22toolbarIconLabel%22%20class%3D%22label%22%20value%3D%22%27%20+%20pref%28%22toolbarIconLabel%22%29%20+%20%27%22/%3E%5C%0A%20%20%20%20%20%20%20%20%20%20%3Cradiogroup%20id%3D%22toolbarIcon%22%20class%3D%22radiogroup%22%20value%3D%22%27%20+%20pref%28%22toolbarIcon%22%29%20+%20%27%22%20orient%3D%22horizontal%22%20onclick%3D%22self.onRadio%28this%29%22%3E%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cradio%20id%3D%22smallIcon%22%20class%3D%22radio%22%20label%3D%2216px%22%20value%3D%2216%22/%3E%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cradio%20id%3D%22largeIcon%22%20class%3D%22radio%22%20label%3D%2232px%22%20value%3D%2232%22/%3E%5C%0A%20%20%20%20%20%20%20%20%20%20%3C/radiogroup%3E%5C%0A%20%20%20%20%20%20%20%20%20%20%3Ccheckbox%20id%3D%22applyFilter%22%20class%3D%22checkbox%22%20label%3D%22%27%20+%20pref%28%22applyFilterLabel%22%29%20+%20%27%22%20checked%3D%22%27%20+%20pref%28%22applyFilter%22%29%20+%20%27%22%20oncommand%3D%22self.onCheckbox%28this%29%22/%3E%5C%0A%20%20%20%20%20%20%20%20%20%20%3Ccheckbox%20id%3D%22helpTabCSS%22%20class%3D%22checkbox%22%20label%3D%22%27%20+%20pref%28%22helpTabLabel%22%29%20+%20%27%22%20checked%3D%22%27%20+%20pref%28%22helpTabCSS%22%29%20+%20%27%22%20oncommand%3D%22self.onCheckbox%28this%29%22/%3E%5C%0A%20%20%20%20%20%20%20%20%3C/hbox%3E%5C%0A%20%20%20%20%20%20%20%20%3Chbox%20id%3D%22hbox2%22%20class%3D%22hbox%22%20align%3D%22center%22%20pack%3D%22center%22%3E%5C%0A%20%20%20%20%20%20%20%20%20%20%3Clabel%20id%3D%22toolbarsLabel%22%20class%3D%22label%22%20value%3D%22%27%20+%20pref%28%22toolbarsLabel%22%29%20+%20%27%22/%3E%5C%0A%20%20%20%20%20%20%20%20%20%20%3Ctextbox%20id%3D%22toolbars%22%20class%3D%22textbox%22%20value%3D%22%27%20+%20pref%28%22toolbars%22%29%20+%20%27%22%20oninput%3D%22self.onTextbox%28this%29%22%20flex%3D%221%22/%3E%5C%0A%20%20%20%20%20%20%20%20%3C/hbox%3E%5C%0A%20%20%20%20%20%20%20%20%3Chbox%20id%3D%22hbox3%22%20class%3D%22hbox%22%20align%3D%22center%22%20pack%3D%22center%22%3E%5C%0A%20%20%20%20%20%20%20%20%20%20%3Cbutton%20id%3D%22image16%22%20class%3D%22button%22%20label%3D%22%27%20+%20pref%28%22smallIcon%22%29%20+%20%27%22%20oncommand%3D%22self.onButton%28this%29%22/%3E%5C%0A%20%20%20%20%20%20%20%20%20%20%3Cimage%20id%3D%22image16icon%22%20class%3D%22image%22%20src%3D%22%27%20+%20pref%28%22image16%22%29%20+%20%27%22/%3E%5C%0A%20%20%20%20%20%20%20%20%20%20%3Cbutton%20id%3D%22image32%22%20class%3D%22button%22%20label%3D%22%27%20+%20pref%28%22largeIcon%22%29%20+%20%27%22%20oncommand%3D%22self.onButton%28this%29%22/%3E%5C%0A%20%20%20%20%20%20%20%20%20%20%3Cimage%20id%3D%22image32icon%22%20class%3D%22image%22%20src%3D%22%27%20+%20pref%28%22image32%22%29%20+%20%27%22/%3E%5C%0A%20%20%20%20%20%20%20%20%3C/hbox%3E%5C%0A%20%20%20%20%20%20%3C/window%3E%27%3B%0A%20%20%20%20data%20%3D%20data.replace%28/self/g%2C%20%22opener.document.getElementById%28%27%22%20+%20self.id%20+%20%22%27%29%22%29%3B%0A%20%20%20%20let%20url%20%3D%20%22data%3Aapplication/vnd.mozilla.xul+xml%3Btext/plain%2C%22%20+%20encodeURIComponent%28data%29%3B%0A%20%20%20%20window.openDialog%28url%2C%20%22%22%2C%20%22chrome%2Ccenterscreen%2Cdialog%3Dno%2Cresizable%22%29%3B%0A%7D%20%7D%0A%0Athis.onButton%20%3D%20function%28e%29%20%7B%0A%20%20fp.init%28window%2C%20null%2C%20fp.modeOpen%29%3B%0A%20%20fp.appendFilters%28fp.filterImages%29%3B%0A%20%20if%20%28fp.show%28%29%20%21%3D%20fp.returnCancel%29%20%7B%0A%20%20%20%20let%20url%20%3D%20fp.fileURL.spec%3B%0A%20%20%20%20gRoot.setCharPref%28e.id%2C%20url%29%3B%0A%20%20%20%20e.nextSibling.src%20%3D%20url%3B%0A%20%20%7D%0A%20%20this.getImage%28%29%3B%0A%20%20wm%28%22toggle%3Atoolbar%22%29.focus%28%29%3B%0A%7D%0A%0Athis.onCheckbox%20%3D%20function%28e%29%20%7B%0A%20%20let%20bool%20%3D%20pref%28e.id%29%20%21%3D%3D%20false%20%3F%20false%20%3A%20true%3B%0A%20%20gRoot.setBoolPref%28e.id%2C%20bool%29%3B%0A%7D%0A%0Athis.onDestroy%20%3D%20function%28reason%29%20%7B%0A%20%20if%20%28reason%20%3D%3D%3D%20%22delete%22%29%20%7B%0A%20%20%20%20unloadSheet%28helpCSS%29%3B%0A%20%20%20%20unloadSheet%28filterCSS%29%3B%0A%7D%20%7D%0A%0Athis.onRadio%20%3D%20function%28e%29%20%7B%0A%20%20gRoot.setIntPref%28e.id%2C%20e.value%29%3B%0A%20%20this.getImage%28%29%3B%0A%7D%0A%0Athis.onTextbox%20%3D%20function%28e%29%20%7B%0A%20%20e.value%20%3D%20e.value.replace%28/%5Cs+/g%2C%20%22%22%29%3B%0A%20%20gRoot.setCharPref%28e.id%2C%20e.value%29%3B%0A%7D%0A%0A//%20BUTTON%20ATTRIBUTES%0A//%20Name%3A%20Toggle%20Tooolbar%28s%29%0A//%20Created%3A%20July%201st%202017%0A//%20Updated%3A%20September%2027th%202017%0A//%20Creator%3A%20Sonny%20Razzano%20aka%20srazzano%0A//%20Description%3A%20Toggles%20coded%20toolbar%28s%29%2C%20prevents%20toggling%20of%20buttons%20parent%20toolbar%2C%20retains%20last%20toggle%20state%20on%20startup%20and%20tooltip%20displays%20coded%20toolbar%28s%29.%0A//%20Homepage%3A%20http%3A//custombuttons.sourceforge.net/forum/viewtopic.php%3Ff%3D4%26t%3D14966%26p%3D61750%0A//%20Support%3A%20https%3A//sonco.synthasite.com%5D%5D%3E%3C/initcode%3E%0A%20%20%3Ccode%3E%3C%21%5BCDATA%5B/*Code*/%5D%5D%3E%3C/code%3E%0A%20%20%3Caccelkey%3E%3C%21%5BCDATA%5B%5D%5D%3E%3C/accelkey%3E%0A%20%20%3Chelp%3E%3C%21%5BCDATA%5B%23toggle-toolbar%20%7B%0A%20%20padding%3A%200%206px%206px%200%20%21important%3B%0A%7D%0A%0A%23toggle-toolbar%20.checkbox-label-box%2C%20%0A%23toggle-toolbar%20.radio-label-box%20%7B%0A%20%20border%3A%201px%20dotted%20transparent%20%21important%3B%0A%20%20outline%3A%20none%20%21important%3B%0A%7D%0A%0A%23toggle-toolbar%20.hbox%20%7B%0A%20%20margin%3A%206px%200%200%200%20%21important%3B%0A%7D%0A%0A%23toggle-toolbar%20%23applyFilter%20%7B%0A%20%20margin%3A%200%200%200%2026px%20%21important%3B%0A%7D%0A%0A%23toggle-toolbar%20%23image32%20%7B%0A%20%20margin%3A%200%200%200%2032px%20%21important%3B%0A%7D%5D%5D%3E%3C/help%3E%0A%20%20%3Cattributes/%3E%0A%3C/custombutton%3E
